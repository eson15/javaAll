> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œå…¬ä¼—å·ä¸èƒ½ä¸å…³æ³¨ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå­¦ä¹ æŒ‡å—**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå­¦ä¹ æŒ‡å—](https://img-blog.csdnimg.cn/20200601113720522.png)
----

å‰é¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä¸»è¦ç»™å¤§å®¶è®²è§£äº† Spring Boot ä¸­å¸¸ç”¨çš„ä¸€äº›æŠ€æœ¯ç‚¹ï¼Œè¿™äº›æŠ€æœ¯ç‚¹åœ¨å®é™…é¡¹ç›®ä¸­å¯èƒ½ä¸ä¼šå…¨éƒ¨ç”¨å¾—åˆ°ï¼Œå› ä¸ºä¸åŒçš„é¡¹ç›®å¯èƒ½ä½¿ç”¨çš„æŠ€æœ¯ä¸åŒï¼Œä½†æ˜¯å¸Œæœ›å¤§å®¶éƒ½èƒ½æŒæ¡å¦‚ä½•ä½¿ç”¨ï¼Œå¹¶èƒ½è‡ªå·±æ ¹æ®å®é™…é¡¹ç›®ä¸­çš„éœ€æ±‚è¿›è¡Œç›¸åº”çš„æ‰©å±•ã€‚

ä¸çŸ¥é“å¤§å®¶äº†ä¸äº†è§£å•ç‰‡æœºï¼Œå•ç‰‡æœºé‡Œæœ‰ä¸ªæœ€å°ç³»ç»Ÿï¼Œè¿™ä¸ªæœ€å°ç³»ç»Ÿæ­å»ºå¥½äº†ä¹‹åï¼Œå°±å¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œäººä¸ºçš„æ‰©å±•ã€‚è¿™èŠ‚è¯¾æˆ‘ä»¬è¦åšçš„å°±æ˜¯æ­å»ºä¸€ä¸ª â€œSpring Boot æœ€å°ç³»ç»Ÿæ¶æ„â€ ã€‚æ‹¿ç€è¿™ä¸ªæ¶æ„ï¼Œå¯ä»¥åœ¨æ­¤åŸºç¡€ä¸Šæ ¹æ®å®é™…éœ€æ±‚åšç›¸åº”çš„æ‰©å±•ã€‚

ä»é›¶å¼€å§‹æ­å»ºä¸€ä¸ªç¯å¢ƒï¼Œä¸»è¦è¦è€ƒè™‘å‡ ç‚¹ï¼šç»Ÿä¸€å°è£…çš„æ•°æ®ç»“æ„ã€å¯è°ƒå¼çš„æ¥å£ã€jsonçš„å¤„ç†ã€æ¨¡æ¿å¼•æ“çš„ä½¿ç”¨ï¼ˆæœ¬æ–‡ä¸å†™è¯¥é¡¹ï¼Œå› ä¸ºç°åœ¨å¤§éƒ¨åˆ†é¡¹ç›®éƒ½å‰åç«¯åˆ†ç¦»äº†ï¼Œä½†æ˜¯è€ƒè™‘åˆ°ä¹Ÿè¿˜æœ‰éå‰åç«¯åˆ†ç¦»çš„é¡¹ç›®ï¼Œæ‰€ä»¥æˆ‘åœ¨æºä»£ç é‡Œä¹ŸåŠ ä¸Šäº† thymeleafï¼‰ã€æŒä¹…å±‚çš„é›†æˆã€æ‹¦æˆªå™¨ï¼ˆè¿™ä¸ªä¹Ÿæ˜¯å¯é€‰çš„ï¼‰å’Œå…¨å±€å¼‚å¸¸å¤„ç†ã€‚ä¸€èˆ¬åŒ…æ‹¬è¿™äº›ä¸œè¥¿çš„è¯ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ª Spring Boot é¡¹ç›®ç¯å¢ƒå°±å·®ä¸å¤šäº†ï¼Œç„¶åå°±æ˜¯æ ¹æ®å…·ä½“æƒ…å†µæ¥æ‰©å±•äº†ã€‚

ç»“åˆå‰é¢çš„è¯¾ç¨‹å’Œä»¥ä¸Šçš„è¿™äº›ç‚¹ï¼Œæœ¬èŠ‚è¯¾æ‰‹æŠŠæ‰‹å¸¦é¢†å¤§å®¶æ­å»ºä¸€ä¸ªå®é™…é¡¹ç›®å¼€å‘ä¸­å¯ç”¨çš„ Spring Boot æ¶æ„ã€‚æ•´ä¸ªé¡¹ç›®å·¥ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå­¦ä¹ çš„æ—¶å€™ï¼Œå¯ä»¥ç»“åˆæˆ‘çš„æºç ï¼Œè¿™æ ·æ•ˆæœä¼šæ›´å¥½ã€‚

![å·¥ç¨‹æ¶æ„](https://images.gitbook.cn/6f23c980-b89e-11e8-87f1-559c9b456754)

## 1. ç»Ÿä¸€çš„æ•°æ®å°è£… 

ç”±äºå°è£…çš„ json æ•°æ®çš„ç±»å‹ä¸ç¡®å®šï¼Œæ‰€ä»¥åœ¨å®šä¹‰ç»Ÿä¸€çš„ json ç»“æ„æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°æ³›å‹ã€‚ç»Ÿä¸€çš„ json ç»“æ„ä¸­å±æ€§åŒ…æ‹¬æ•°æ®ã€çŠ¶æ€ç ã€æç¤ºä¿¡æ¯å³å¯ï¼Œæ„é€ æ–¹æ³•å¯ä»¥æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚åšç›¸åº”çš„æ·»åŠ å³å¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåº”è¯¥æœ‰é»˜è®¤çš„è¿”å›ç»“æ„ï¼Œä¹Ÿåº”è¯¥æœ‰ç”¨æˆ·æŒ‡å®šçš„è¿”å›ç»“æ„ã€‚å¦‚ä¸‹ï¼š
```java
/**
 * ç»Ÿä¸€è¿”å›å¯¹è±¡
 * @author shengwu ni
 * @param <T>
 */
public class JsonResult<T> {

    private T data;
    private String code;
    private String msg;

    /**
     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œé»˜è®¤çŠ¶æ€ç ä¸º0ï¼Œæç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼
     */
    public JsonResult() {
        this.code = "0";
        this.msg = "æ“ä½œæˆåŠŸï¼";
    }

    /**
     * è‹¥æ²¡æœ‰æ•°æ®è¿”å›ï¼Œå¯ä»¥äººä¸ºæŒ‡å®šçŠ¶æ€ç å’Œæç¤ºä¿¡æ¯
     * @param code
     * @param msg
     */
    public JsonResult(String code, String msg) {
        this.code = code;
        this.msg = msg;
    }

    /**
     * æœ‰æ•°æ®è¿”å›æ—¶ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œé»˜è®¤æç¤ºä¿¡æ¯ä¸ºï¼šæ“ä½œæˆåŠŸï¼
     * @param data
     */
    public JsonResult(T data) {
        this.data = data;
        this.code = "0";
        this.msg = "æ“ä½œæˆåŠŸï¼";
    }

    /**
     * æœ‰æ•°æ®è¿”å›ï¼ŒçŠ¶æ€ç ä¸º0ï¼Œäººä¸ºæŒ‡å®šæç¤ºä¿¡æ¯
     * @param data
     * @param msg
     */
    public JsonResult(T data, String msg) {
        this.data = data;
        this.code = "0";
        this.msg = msg;
    }
    
    /**
     * ä½¿ç”¨è‡ªå®šä¹‰å¼‚å¸¸ä½œä¸ºå‚æ•°ä¼ é€’çŠ¶æ€ç å’Œæç¤ºä¿¡æ¯
     * @param msgEnum
     */
    public JsonResult(BusinessMsgEnum msgEnum) {
        this.code = msgEnum.code();
        this.msg = msgEnum.msg();
    }

    // çœå»getå’Œsetæ–¹æ³•
}
```
å¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±é¡¹ç›®ä¸­æ‰€éœ€è¦çš„ä¸€äº›ä¸œè¥¿ï¼Œåˆç†çš„ä¿®æ”¹ç»Ÿä¸€ç»“æ„ä¸­çš„å­—æ®µä¿¡æ¯ã€‚

## 2. jsonçš„å¤„ç†

Json å¤„ç†å·¥å…·å¾ˆå¤šï¼Œæ¯”å¦‚é˜¿é‡Œå·´å·´çš„ fastjsonï¼Œä¸è¿‡ fastjson å¯¹æœ‰äº›æœªçŸ¥ç±»å‹çš„ null æ— æ³•è½¬æˆç©ºå­—ç¬¦ä¸²ï¼Œè¿™å¯èƒ½æ˜¯ fastjson è‡ªèº«çš„ç¼ºé™·ï¼Œå¯æ‰©å±•æ€§ä¹Ÿä¸æ˜¯å¤ªå¥½ï¼Œä½†æ˜¯ä½¿ç”¨èµ·æ¥æ–¹ä¾¿ï¼Œä½¿ç”¨çš„äººä¹Ÿè›®å¤šçš„ã€‚è¿™èŠ‚è¯¾é‡Œé¢æˆ‘ä»¬ä¸»è¦é›†æˆ Spring Boot è‡ªå¸¦çš„ jacksonã€‚ä¸»è¦æ˜¯å¯¹ jackson åšä¸€ä¸‹å¯¹ null çš„é…ç½®å³å¯ï¼Œç„¶åå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ã€‚

```java
/**
 * jacksonConfig
 * @author shengwu ni
 */
@Configuration
public class JacksonConfig {
    @Bean
    @Primary
    @ConditionalOnMissingBean(ObjectMapper.class)
    public ObjectMapper jacksonObjectMapper(Jackson2ObjectMapperBuilder builder) {
        ObjectMapper objectMapper = builder.createXmlMapper(false).build();
        objectMapper.getSerializerProvider().setNullValueSerializer(new JsonSerializer<Object>() {
            @Override
            public void serialize(Object o, JsonGenerator jsonGenerator, SerializerProvider serializerProvider) throws IOException {
                jsonGenerator.writeString("");
            }
        });
        return objectMapper;
    }
}
```
è¿™é‡Œå…ˆä¸æµ‹è¯•ï¼Œç­‰ä¸‹é¢ swagger2 é…ç½®å¥½äº†ä¹‹åï¼Œæˆ‘ä»¬ä¸€èµ·æ¥æµ‹è¯•ä¸€ä¸‹ã€‚

## 3. swagger2åœ¨çº¿å¯è°ƒå¼æ¥å£

æœ‰äº† swaggerï¼Œå¼€å‘äººå‘˜ä¸éœ€è¦ç»™å…¶ä»–äººå‘˜æä¾›æ¥å£æ–‡æ¡£ï¼Œåªè¦å‘Šè¯‰ä»–ä»¬ä¸€ä¸ª Swagger åœ°å€ï¼Œå³å¯å±•ç¤ºåœ¨çº¿çš„ API æ¥å£æ–‡æ¡£ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œè°ƒç”¨æ¥å£çš„äººå‘˜è¿˜å¯ä»¥åœ¨çº¿æµ‹è¯•æ¥å£æ•°æ®ï¼ŒåŒæ ·åœ°ï¼Œå¼€å‘äººå‘˜åœ¨å¼€å‘æ¥å£æ—¶ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥åˆ©ç”¨ Swagger åœ¨çº¿æ¥å£æ–‡æ¡£æµ‹è¯•æ¥å£æ•°æ®ï¼Œè¿™ç»™å¼€å‘äººå‘˜æä¾›äº†ä¾¿åˆ©ã€‚ä½¿ç”¨ swagger éœ€è¦å¯¹å…¶è¿›è¡Œé…ç½®ï¼š
```java
/**
 * swaggeré…ç½®
 * @author shengwu ni
 */
@Configuration
@EnableSwagger2
public class SwaggerConfig {

    @Bean
    public Docket createRestApi() {
        return new Docket(DocumentationType.SWAGGER_2)
                // æŒ‡å®šæ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯çš„æ–¹æ³•ï¼šapiInfo()
                .apiInfo(apiInfo())
                .select()
                // æŒ‡å®šè¦ç”Ÿæˆapiæ¥å£çš„åŒ…è·¯å¾„ï¼Œè¿™é‡ŒæŠŠcontrollerä½œä¸ºåŒ…è·¯å¾„ï¼Œç”Ÿæˆcontrollerä¸­çš„æ‰€æœ‰æ¥å£
                .apis(RequestHandlerSelectors.basePackage("com.itcodai.course18.controller"))
                .paths(PathSelectors.any())
                .build();
    }

    /**
     * æ„å»ºapiæ–‡æ¡£çš„è¯¦ç»†ä¿¡æ¯
     * @return
     */
    private ApiInfo apiInfo() {
        return new ApiInfoBuilder()
                // è®¾ç½®é¡µé¢æ ‡é¢˜
                .title("Spring Bootæ­å»ºå®é™…é¡¹ç›®ä¸­å¼€å‘çš„æ¶æ„")
                // è®¾ç½®æ¥å£æè¿°
                .description("è·Ÿæ­¦å“¥ä¸€èµ·å­¦Spring Bootç¬¬18è¯¾")
                // è®¾ç½®è”ç³»æ–¹å¼
                .contact("å€ªå‡æ­¦ï¼Œ" + "å¾®ä¿¡å…¬ä¼—å·ï¼šç¨‹åºå‘˜ç§æˆ¿èœ")
                // è®¾ç½®ç‰ˆæœ¬
                .version("1.0")
                // æ„å»º
                .build();
    }
}
```
åˆ°è¿™é‡Œï¼Œå¯ä»¥å…ˆæµ‹è¯•ä¸€ä¸‹ï¼Œå†™ä¸€ä¸ª Controllerï¼Œå¼„ä¸€ä¸ªé™æ€çš„æ¥å£æµ‹è¯•ä¸€ä¸‹ä¸Šé¢é›†æˆçš„å†…å®¹ã€‚
```java
@RestController
@Api(value = "ç”¨æˆ·ä¿¡æ¯æ¥å£")
public class UserController {

    @Resource
    private UserService userService;

    @GetMapping("/getUser/{id}")
    @ApiOperation(value = "æ ¹æ®ç”¨æˆ·å”¯ä¸€æ ‡è¯†è·å–ç”¨æˆ·ä¿¡æ¯")
    public JsonResult<User> getUserInfo(@PathVariable @ApiParam(value = "ç”¨æˆ·å”¯ä¸€æ ‡è¯†") Long id) {
        User user = new User(id, "å€ªå‡æ­¦", "123456");
        return new JsonResult<>(user);
    }
}
```
ç„¶åå¯åŠ¨é¡¹ç›®ï¼Œåœ¨æµè§ˆå™¨ä¸­è¾“å…¥ `localhost:8080/swagger-ui.html` å³å¯çœ‹åˆ° swagger æ¥å£æ–‡æ¡£é¡µé¢ï¼Œè°ƒç”¨ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªæ¥å£ï¼Œå³å¯çœ‹åˆ°è¿”å›çš„ json æ•°æ®ã€‚

## 4. æŒä¹…å±‚é›†æˆ

æ¯ä¸ªé¡¹ç›®ä¸­æ˜¯å¿…é¡»è¦æœ‰æŒä¹…å±‚çš„ï¼Œä¸æ•°æ®åº“äº¤äº’ï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¥é›†æˆ mybatisï¼Œé›†æˆ mybatis é¦–å…ˆè¦åœ¨ application.yml ä¸­è¿›è¡Œé…ç½®ã€‚
```yml
# æœåŠ¡ç«¯å£å·
server:
  port: 8080

# æ•°æ®åº“åœ°å€
datasource:
  url: localhost:3306/blog_test

spring:
  datasource: # æ•°æ®åº“é…ç½®
    driver-class-name: com.mysql.jdbc.Driver
    url: jdbc:mysql://${datasource.url}?useSSL=false&useUnicode=true&characterEncoding=utf-8&allowMultiQueries=true&autoReconnect=true&failOverReadOnly=false&maxReconnects=10
    username: root
    password: 123456
    hikari:
      maximum-pool-size: 10 # æœ€å¤§è¿æ¥æ± æ•°
      max-lifetime: 1770000

mybatis:
  # æŒ‡å®šåˆ«åè®¾ç½®çš„åŒ…ä¸ºæ‰€æœ‰entity
  type-aliases-package: com.itcodai.course18.entity
  configuration:
    map-underscore-to-camel-case: true # é©¼å³°å‘½åè§„èŒƒ
  mapper-locations: # mapperæ˜ å°„æ–‡ä»¶ä½ç½®
    - classpath:mapper/*.xml
```
é…ç½®å¥½äº†ä¹‹åï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥å†™ä¸€ä¸‹ dao å±‚ï¼Œå®é™…ä¸­æˆ‘ä»¬ä½¿ç”¨æ³¨è§£æ¯”è¾ƒå¤šï¼Œå› ä¸ºæ¯”è¾ƒæ–¹ä¾¿ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ xml çš„æ–¹å¼ï¼Œç”šè‡³ä¸¤ç§åŒæ—¶ä½¿ç”¨éƒ½è¡Œï¼Œè¿™é‡Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥é›†æˆï¼Œå…³äº xml çš„æ–¹å¼ï¼Œå¤§å®¶å¯ä»¥æŸ¥çœ‹å‰é¢è¯¾ç¨‹ï¼Œå®é™…ä¸­æ ¹æ®é¡¹ç›®æƒ…å†µæ¥å®šã€‚
```java
public interface UserMapper {

    @Select("select * from user where id = #{id}")
    @Results({
            @Result(property = "username", column = "user_name"),
            @Result(property = "password", column = "password")
    })
    User getUser(Long id);

    @Select("select * from user where id = #{id} and user_name=#{name}")
    User getUserByIdAndName(@Param("id") Long id, @Param("name") String username);

    @Select("select * from user")
    List<User> getAll();
}
```
å…³äº service å±‚æˆ‘å°±ä¸åœ¨æ–‡ç« ä¸­å†™ä»£ç äº†ï¼Œå¤§å®¶å¯ä»¥ç»“åˆæˆ‘çš„æºä»£ç å­¦ä¹ ï¼Œè¿™ä¸€èŠ‚ä¸»è¦å¸¦é¢†å¤§å®¶æ¥æ­å»ºä¸€ä¸ª Spring Boot ç©ºæ¶æ„ã€‚æœ€ååˆ«å¿˜äº†åœ¨å¯åŠ¨ç±»ä¸Šæ·»åŠ æ³¨è§£æ‰«æ `@MapperScan("com.itcodai.course18.dao")`

## 5. æ‹¦æˆªå™¨

æ‹¦æˆªå™¨åœ¨é¡¹ç›®ä¸­ä½¿ç”¨çš„æ˜¯éå¸¸å¤šçš„ï¼ˆä½†ä¸æ˜¯ç»å¯¹çš„ï¼‰ï¼Œæ¯”å¦‚æ‹¦æˆªä¸€äº›ç½®é¡¶çš„ urlï¼Œåšä¸€äº›åˆ¤æ–­å’Œå¤„ç†ç­‰ç­‰ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜éœ€è¦å°†å¸¸ç”¨çš„é™æ€é¡µé¢æˆ–è€… swagger é¡µé¢æ”¾è¡Œï¼Œä¸èƒ½å°†è¿™äº›é™æ€èµ„æºç»™æ‹¦æˆªäº†ã€‚é¦–å…ˆå…ˆè‡ªå®šä¹‰ä¸€ä¸ªæ‹¦æˆªå™¨ã€‚
```java
public class MyInterceptor implements HandlerInterceptor {

    private static final Logger logger = LoggerFactory.getLogger(MyInterceptor.class);

    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {

        logger.info("æ‰§è¡Œæ–¹æ³•ä¹‹å‰æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å‰)");
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        logger.info("æ‰§è¡Œå®Œæ–¹æ³•ä¹‹åè¿›æ‰§è¡Œ(Controlleræ–¹æ³•è°ƒç”¨ä¹‹å)ï¼Œä½†æ˜¯æ­¤æ—¶è¿˜æ²¡è¿›è¡Œè§†å›¾æ¸²æŸ“");
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        logger.info("æ•´ä¸ªè¯·æ±‚éƒ½å¤„ç†å®Œå’¯ï¼ŒDispatcherServletä¹Ÿæ¸²æŸ“äº†å¯¹åº”çš„è§†å›¾å’¯ï¼Œæ­¤æ—¶æˆ‘å¯ä»¥åšä¸€äº›æ¸…ç†çš„å·¥ä½œäº†");
    }
}
```
ç„¶åå°†è‡ªå®šä¹‰çš„æ‹¦æˆªå™¨åŠ å…¥åˆ°æ‹¦æˆªå™¨é…ç½®ä¸­ã€‚
```java
@Configuration
public class MyInterceptorConfig implements WebMvcConfigurer {
    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        // å®ç°WebMvcConfigurerä¸ä¼šå¯¼è‡´é™æ€èµ„æºè¢«æ‹¦æˆª
        registry.addInterceptor(new MyInterceptor())
                // æ‹¦æˆªæ‰€æœ‰url
                .addPathPatterns("/**")
                // æ”¾è¡Œswagger
                .excludePathPatterns("/swagger-resources/**");
    }
}
```
åœ¨ Spring Boot ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šåœ¨å¦‚ä¸‹ç›®å½•é‡Œå­˜æ”¾ä¸€äº›é™æ€èµ„æºï¼š
> classpath:/static   
> classpath:/public   
> classpath:/resources   
> classpath:/META-INF/resources  

ä¸Šé¢ä»£ç ä¸­é…ç½®çš„ `/**` æ˜¯å¯¹æ‰€æœ‰ url éƒ½è¿›è¡Œäº†æ‹¦æˆªï¼Œä½†æˆ‘ä»¬å®ç°äº† WebMvcConfigurer æ¥å£ï¼Œä¸ä¼šå¯¼è‡´ Spring Boot å¯¹ä¸Šé¢è¿™äº›ç›®å½•ä¸‹çš„é™æ€èµ„æºå®æ–½æ‹¦æˆªã€‚ä½†æ˜¯æˆ‘ä»¬å¹³æ—¶è®¿é—®çš„ swagger ä¼šè¢«æ‹¦æˆªï¼Œæ‰€ä»¥è¦å°†å…¶æ”¾è¡Œã€‚swagger é¡µé¢åœ¨ swagger-resources ç›®å½•ä¸‹ï¼Œæ”¾è¡Œè¯¥ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶å³å¯ã€‚

ç„¶ååœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸‹ swagger é¡µé¢ï¼Œè‹¥èƒ½æ­£å¸¸æ˜¾ç¤º swaggerï¼Œè¯´æ˜æ”¾è¡ŒæˆåŠŸã€‚åŒæ—¶å¯ä»¥æ ¹æ®åå°æ‰“å°çš„æ—¥å¿—åˆ¤æ–­ä»£ç æ‰§è¡Œçš„é¡ºåºã€‚

## 6. å…¨å±€å¼‚å¸¸å¤„ç†

å…¨å±€å¼‚å¸¸å¤„ç†æ˜¯æ¯ä¸ªé¡¹ç›®ä¸­å¿…é¡»ç”¨åˆ°çš„ä¸œè¥¿ï¼Œåœ¨å…·ä½“çš„å¼‚å¸¸ä¸­ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šåšå…·ä½“çš„å¤„ç†ï¼Œä½†æ˜¯å¯¹äºæ²¡æœ‰å¤„ç†çš„å¼‚å¸¸ï¼Œä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªç»Ÿä¸€çš„å…¨å±€å¼‚å¸¸å¤„ç†ã€‚åœ¨å¼‚å¸¸å¤„ç†ä¹‹å‰ï¼Œæœ€å¥½ç»´æŠ¤ä¸€ä¸ªå¼‚å¸¸æç¤ºä¿¡æ¯æšä¸¾ç±»ï¼Œä¸“é—¨ç”¨æ¥ä¿å­˜å¼‚å¸¸æç¤ºä¿¡æ¯çš„ã€‚å¦‚ä¸‹ï¼š
```java
public enum BusinessMsgEnum {
    /** å‚æ•°å¼‚å¸¸ */
    PARMETER_EXCEPTION("102", "å‚æ•°å¼‚å¸¸!"),
    /** ç­‰å¾…è¶…æ—¶ */
    SERVICE_TIME_OUT("103", "æœåŠ¡è°ƒç”¨è¶…æ—¶ï¼"),
    /** å‚æ•°è¿‡å¤§ */
    PARMETER_BIG_EXCEPTION("102", "è¾“å…¥çš„å›¾ç‰‡æ•°é‡ä¸èƒ½è¶…è¿‡50å¼ !"),
    /** 500 : å‘ç”Ÿå¼‚å¸¸ */
    UNEXPECTED_EXCEPTION("500", "ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼");

    /**
     * æ¶ˆæ¯ç 
     */
    private String code;
    /**
     * æ¶ˆæ¯å†…å®¹
     */
    private String msg;

    private BusinessMsgEnum(String code, String msg) {
        this.code = code;
        this.msg = msg;
    }

    public String code() {
        return code;
    }

    public String msg() {
        return msg;
    }

}
```
åœ¨å…¨å±€ç»Ÿä¸€å¼‚å¸¸å¤„ç†ç±»ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå¯¹è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸æœ€å…ˆå¤„ç†ï¼Œç„¶åå»å¤„ç†ä¸€äº›å¸¸è§çš„ç³»ç»Ÿå¼‚å¸¸ï¼Œæœ€åä¼šæ¥ä¸€ä¸ªä¸€åŠ³æ°¸é€¸ï¼ˆException å¼‚å¸¸ï¼‰ã€‚
```java
@ControllerAdvice
@ResponseBody
public class GlobalExceptionHandler {

    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);

    /**
     * æ‹¦æˆªä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›ä¸šåŠ¡å¼‚å¸¸ä¿¡æ¯
     * @param ex
     * @return
     */
    @ExceptionHandler(BusinessErrorException.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleBusinessError(BusinessErrorException ex) {
        String code = ex.getCode();
        String message = ex.getMessage();
        return new JsonResult(code, message);
    }

    /**
     * ç©ºæŒ‡é’ˆå¼‚å¸¸
     * @param ex NullPointerException
     * @return
     */
    @ExceptionHandler(NullPointerException.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleTypeMismatchException(NullPointerException ex) {
        logger.error("ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œ{}", ex.getMessage());
        return new JsonResult("500", "ç©ºæŒ‡é’ˆå¼‚å¸¸äº†");
    }

    /**
     * ç³»ç»Ÿå¼‚å¸¸ é¢„æœŸä»¥å¤–å¼‚å¸¸
     * @param ex
     * @return
     */
    @ExceptionHandler(Exception.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleUnexpectedServer(Exception ex) {
        logger.error("ç³»ç»Ÿå¼‚å¸¸ï¼š", ex);
        return new JsonResult(BusinessMsgEnum.UNEXPECTED_EXCEPTION);
    }

}
```
å…¶ä¸­ï¼ŒBusinessErrorException æ˜¯è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸ï¼Œç»§æ‰¿ä¸€ä¸‹ RuntimeException å³å¯ï¼Œå…·ä½“å¯ä»¥çœ‹æˆ‘çš„æºä»£ç ï¼Œæ–‡ç« ä¸­å°±ä¸è´´ä»£ç äº†ã€‚
åœ¨ UserController ä¸­æœ‰ä¸ª testException æ–¹æ³•ï¼Œç”¨æ¥æµ‹è¯•å…¨å±€å¼‚å¸¸çš„ï¼Œæ‰“å¼€ swagger é¡µé¢ï¼Œè°ƒç”¨ä¸€ä¸‹è¯¥æ¥å£ï¼Œå¯ä»¥çœ‹å‡ºè¿”å›ç”¨æˆ·æç¤ºä¿¡æ¯ï¼šâ€ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼â€œã€‚å½“ç„¶äº†ï¼Œå®é™…æƒ…å†µä¸­ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„ä¸šåŠ¡æç¤ºä¸åŒçš„ä¿¡æ¯ã€‚

## 7. æ€»ç»“

æœ¬æ–‡ä¸»è¦æ‰‹æŠŠæ‰‹å¸¦é¢†å¤§å®¶å¿«é€Ÿæ­å»ºä¸€ä¸ªé¡¹ç›®ä¸­å¯ä»¥ä½¿ç”¨çš„ Spring Boot ç©ºæ¶æ„ï¼Œä¸»è¦ä»ç»Ÿä¸€å°è£…çš„æ•°æ®ç»“æ„ã€å¯è°ƒå¼çš„æ¥å£ã€jsonçš„å¤„ç†ã€æ¨¡æ¿å¼•æ“çš„ä½¿ç”¨ï¼ˆä»£ç ä¸­ä½“ç°ï¼‰ã€æŒä¹…å±‚çš„é›†æˆã€æ‹¦æˆªå™¨å’Œå…¨å±€å¼‚å¸¸å¤„ç†ã€‚ä¸€èˆ¬åŒ…æ‹¬è¿™äº›ä¸œè¥¿çš„è¯ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ª Spring Boot é¡¹ç›®ç¯å¢ƒå°±å·®ä¸å¤šäº†ï¼Œç„¶åå°±æ˜¯æ ¹æ®å…·ä½“æƒ…å†µæ¥æ‰©å±•äº†ã€‚



è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š[æˆ³æˆ‘ä¸‹è½½](https://gitee.com/eson15/springboot_study)

----
> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œå…¬ä¼—å·ä¸èƒ½ä¸å…³æ³¨ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå­¦ä¹ æŒ‡å—**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå­¦ä¹ æŒ‡å—](https://img-blog.csdnimg.cn/20200601113720522.png)


