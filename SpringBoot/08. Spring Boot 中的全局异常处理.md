> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œå…¬ä¼—å·ä¸èƒ½ä¸å…³æ³¨ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)
----


åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ç®¡æ˜¯å¯¹åº•å±‚æ•°æ®åº“çš„æ“ä½œè¿‡ç¨‹ï¼Œè¿˜æ˜¯ä¸šåŠ¡å±‚çš„å¤„ç†è¿‡ç¨‹ï¼Œè¿˜æ˜¯æ§åˆ¶å±‚çš„å¤„ç†è¿‡ç¨‹ï¼Œéƒ½ä¸å¯é¿å…ä¼šé‡åˆ°å„ç§å¯é¢„çŸ¥çš„ã€ä¸å¯é¢„çŸ¥çš„å¼‚å¸¸éœ€è¦å¤„ç†ã€‚å¦‚æœå¯¹æ¯ä¸ªè¿‡ç¨‹éƒ½å•ç‹¬ä½œå¼‚å¸¸å¤„ç†ï¼Œé‚£ç³»ç»Ÿçš„ä»£ç è€¦åˆåº¦ä¼šå˜å¾—å¾ˆé«˜ï¼Œæ­¤å¤–ï¼Œå¼€å‘å·¥ä½œé‡ä¹Ÿä¼šåŠ å¤§è€Œä¸”ä¸å¥½ç»Ÿä¸€ï¼Œè¿™ä¹Ÿå¢åŠ äº†ä»£ç çš„ç»´æŠ¤æˆæœ¬ã€‚   
é’ˆå¯¹è¿™ç§å®é™…æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€æœ‰ç±»å‹çš„å¼‚å¸¸å¤„ç†ä»å„å¤„ç†è¿‡ç¨‹è§£è€¦å‡ºæ¥ï¼Œè¿™æ ·æ—¢ä¿è¯äº†ç›¸å…³å¤„ç†è¿‡ç¨‹çš„åŠŸèƒ½å•ä¸€ï¼Œä¹Ÿå®ç°äº†å¼‚å¸¸ä¿¡æ¯çš„ç»Ÿä¸€å¤„ç†å’Œç»´æŠ¤ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸å¸Œæœ›ç›´æ¥æŠŠå¼‚å¸¸æŠ›ç»™ç”¨æˆ·ï¼Œåº”è¯¥å¯¹å¼‚å¸¸è¿›è¡Œå¤„ç†ï¼Œå¯¹é”™è¯¯ä¿¡æ¯è¿›è¡Œå°è£…ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‹å¥½çš„ä¿¡æ¯ç»™ç”¨æˆ·ã€‚è¿™èŠ‚ä¸»è¦æ€»ç»“ä¸€ä¸‹é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨ Spring Boot å¦‚ä½•æ‹¦æˆªå¹¶å¤„ç†å…¨å±€çš„å¼‚å¸¸ã€‚

## 1. å®šä¹‰è¿”å›çš„ç»Ÿä¸€ json ç»“æ„

å‰ç«¯æˆ–è€…å…¶ä»–æœåŠ¡è¯·æ±‚æœ¬æœåŠ¡çš„æ¥å£æ—¶ï¼Œè¯¥æ¥å£éœ€è¦è¿”å›å¯¹åº”çš„ json æ•°æ®ï¼Œä¸€èˆ¬è¯¥æœåŠ¡åªéœ€è¦è¿”å›è¯·æ±‚ç€éœ€è¦çš„å‚æ•°å³å¯ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°è£…æ›´å¤šçš„ä¿¡æ¯ï¼Œæ¯”å¦‚çŠ¶æ€ç  codeã€ç›¸å…³ä¿¡æ¯ msg ç­‰ç­‰ï¼Œè¿™ä¸€æ–¹é¢æ˜¯åœ¨é¡¹ç›®ä¸­å¯ä»¥æœ‰ä¸ªç»Ÿä¸€çš„è¿”å›ç»“æ„ï¼Œæ•´ä¸ªé¡¹ç›®ç»„éƒ½é€‚ç”¨ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ–¹ä¾¿ç»“åˆå…¨å±€å¼‚å¸¸å¤„ç†ä¿¡æ¯ï¼Œå› ä¸ºå¼‚å¸¸å¤„ç†ä¿¡æ¯ä¸­ä¸€èˆ¬æˆ‘ä»¬éœ€è¦æŠŠçŠ¶æ€ç å’Œå¼‚å¸¸å†…å®¹åé¦ˆç»™è°ƒç”¨æ–¹ã€‚   
è¿™ä¸ªç»Ÿä¸€çš„ json ç»“æ„è¿™å¯ä»¥å‚è€ƒ[ç¬¬02è¯¾ï¼šSpring Boot è¿”å› JSON æ•°æ®åŠæ•°æ®å°è£…](https://gitbook.cn/gitchat/column/5b3c9f35a3442272491a176a)ä¸­å°è£…çš„ç»Ÿä¸€ json ç»“æ„ï¼Œæœ¬èŠ‚å†…å®¹æˆ‘ä»¬ç®€åŒ–ä¸€ä¸‹ï¼Œåªä¿ç•™çŠ¶æ€ç  code å’Œå¼‚å¸¸ä¿¡æ¯ msgå³å¯ã€‚å¦‚ä¸‹ï¼š
```java
public class JsonResult {
    /**
     * å¼‚å¸¸ç 
     */
    protected String code;

    /**
     * å¼‚å¸¸ä¿¡æ¯
     */
    protected String msg;
	
    public JsonResult() {
        this.code = "200";
        this.msg = "æ“ä½œæˆåŠŸ";
    }
    
    public JsonResult(String code, String msg) {
        this.code = code;
        this.msg = msg;
    }
	// get set
}
```

## 2. å¤„ç†ç³»ç»Ÿå¼‚å¸¸

æ–°å»ºä¸€ä¸ª GlobalExceptionHandler å…¨å±€å¼‚å¸¸å¤„ç†ç±»ï¼Œç„¶ååŠ ä¸Š `@ControllerAdvice` æ³¨è§£å³å¯æ‹¦æˆªé¡¹ç›®ä¸­æŠ›å‡ºçš„å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š
```java
@ControllerAdvice
@ResponseBody
public class GlobalExceptionHandler {
	// æ‰“å°log
    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    // â€¦â€¦
}
```
æˆ‘ä»¬ç‚¹å¼€ `@ControllerAdvice` æ³¨è§£å¯ä»¥çœ‹åˆ°ï¼Œ`@ControllerAdvice` æ³¨è§£åŒ…å«äº† `@Component` æ³¨è§£ï¼Œè¯´æ˜åœ¨ Spring Boot å¯åŠ¨æ—¶ï¼Œä¹Ÿä¼šæŠŠè¯¥ç±»ä½œä¸ºç»„ä»¶äº¤ç»™ Spring æ¥ç®¡ç†ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¯¥æ³¨è§£è¿˜æœ‰ä¸ª `basePackages` å±æ€§ï¼Œè¯¥å±æ€§æ˜¯ç”¨æ¥æ‹¦æˆªå“ªä¸ªåŒ…ä¸­çš„å¼‚å¸¸ä¿¡æ¯ï¼Œä¸€èˆ¬æˆ‘ä»¬ä¸æŒ‡å®šè¿™ä¸ªå±æ€§ï¼Œæˆ‘ä»¬æ‹¦æˆªé¡¹ç›®å·¥ç¨‹ä¸­çš„æ‰€æœ‰å¼‚å¸¸ã€‚`@ResponseBody` æ³¨è§£æ˜¯ä¸ºäº†å¼‚å¸¸å¤„ç†å®Œä¹‹åç»™è°ƒç”¨æ–¹è¾“å‡ºä¸€ä¸ª json æ ¼å¼çš„å°è£…æ•°æ®ã€‚  
åœ¨é¡¹ç›®ä¸­å¦‚ä½•ä½¿ç”¨å‘¢ï¼ŸSpring Boot ä¸­å¾ˆç®€å•ï¼Œåœ¨æ–¹æ³•ä¸Šé€šè¿‡ `@ExceptionHandler` æ³¨è§£æ¥æŒ‡å®šå…·ä½“çš„å¼‚å¸¸ï¼Œç„¶ååœ¨æ–¹æ³•ä¸­å¤„ç†è¯¥å¼‚å¸¸ä¿¡æ¯ï¼Œæœ€åå°†ç»“æœé€šè¿‡ç»Ÿä¸€çš„ json ç»“æ„ä½“è¿”å›ç»™è°ƒç”¨è€…ã€‚ä¸‹é¢æˆ‘ä»¬ä¸¾å‡ ä¸ªä¾‹å­æ¥è¯´æ˜å¦‚ä½•æ¥ä½¿ç”¨ã€‚

### 2.1 å¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸

åœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸­ï¼Œå‰ç«¯è¯·æ±‚åå°çš„æ¥å£éƒ½æ˜¯é€šè¿‡ rest é£æ ¼æ¥è°ƒç”¨ï¼Œæœ‰æ—¶å€™ï¼Œæ¯”å¦‚ POST è¯·æ±‚ éœ€è¦æºå¸¦ä¸€äº›å‚æ•°ï¼Œä½†æ˜¯å¾€å¾€æœ‰æ—¶å€™å‚æ•°ä¼šæ¼æ‰ã€‚å¦å¤–ï¼Œåœ¨å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œæ¶‰åŠåˆ°å¤šä¸ªå¾®æœåŠ¡ä¹‹é—´çš„æ¥å£è°ƒç”¨æ—¶ï¼Œä¹Ÿå¯èƒ½å‡ºç°è¿™ç§æƒ…å†µï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦å®šä¹‰ä¸€ä¸ªå¤„ç†å‚æ•°ç¼ºå¤±å¼‚å¸¸çš„æ–¹æ³•ï¼Œæ¥ç»™å‰ç«¯æˆ–è€…è°ƒç”¨æ–¹æç¤ºä¸€ä¸ªå‹å¥½ä¿¡æ¯ã€‚  

å‚æ•°ç¼ºå¤±çš„æ—¶å€™ï¼Œä¼šæŠ›å‡º `HttpMessageNotReadableException`ï¼Œæˆ‘ä»¬å¯ä»¥æ‹¦æˆªè¯¥å¼‚å¸¸ï¼Œåšä¸€ä¸ªå‹å¥½å¤„ç†ï¼Œå¦‚ä¸‹ï¼š
```java
/**
* ç¼ºå°‘è¯·æ±‚å‚æ•°å¼‚å¸¸
* @param ex HttpMessageNotReadableException
* @return
*/
@ExceptionHandler(MissingServletRequestParameterException.class)
@ResponseStatus(value = HttpStatus.BAD_REQUEST)
public JsonResult handleHttpMessageNotReadableException(
    MissingServletRequestParameterException ex) {
    logger.error("ç¼ºå°‘è¯·æ±‚å‚æ•°ï¼Œ{}", ex.getMessage());
    return new JsonResult("400", "ç¼ºå°‘å¿…è¦çš„è¯·æ±‚å‚æ•°");
}
```

æˆ‘ä»¬æ¥å†™ä¸ªç®€å•çš„ Controller æµ‹è¯•ä¸€ä¸‹è¯¥å¼‚å¸¸ï¼Œé€šè¿‡ POST è¯·æ±‚æ–¹å¼æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šå§“åå’Œå¯†ç ã€‚
```java
@RestController
@RequestMapping("/exception")
public class ExceptionController {

    private static final Logger logger = LoggerFactory.getLogger(ExceptionController.class);

    @PostMapping("/test")
    public JsonResult test(@RequestParam("name") String name,
                           @RequestParam("pass") String pass) {
        logger.info("nameï¼š{}", name);
        logger.info("passï¼š{}", pass);
        return new JsonResult();
    }
}
```
ç„¶åä½¿ç”¨ Postman æ¥è°ƒç”¨ä¸€ä¸‹è¯¥æ¥å£ï¼Œè°ƒç”¨çš„æ—¶å€™ï¼Œåªä¼ å§“åï¼Œä¸ä¼ å¯†ç ï¼Œå°±ä¼šæŠ›ç¼ºå°‘å‚æ•°å¼‚å¸¸ï¼Œè¯¥å¼‚å¸¸è¢«æ•è·ä¹‹åï¼Œå°±ä¼šè¿›å…¥æˆ‘ä»¬å†™å¥½çš„é€»è¾‘ï¼Œç»™è°ƒç”¨æ–¹è¿”å›ä¸€ä¸ªå‹å¥½ä¿¡æ¯ï¼Œå¦‚ä¸‹ï¼š

![ç¼ºå¤±å‚æ•°å¼‚å¸¸](http://p99jlm9k5.bkt.clouddn.com/csdn/drk/springboot/8-1.png)


### 2.2 å¤„ç†ç©ºæŒ‡é’ˆå¼‚å¸¸

ç©ºæŒ‡é’ˆå¼‚å¸¸æ˜¯å¼€å‘ä¸­å¸ç©ºè§æƒ¯çš„ä¸œè¥¿äº†ï¼Œä¸€èˆ¬å‘ç”Ÿçš„åœ°æ–¹æœ‰å“ªäº›å‘¢ï¼Ÿ  
å…ˆæ¥èŠä¸€èŠä¸€äº›æ³¨æ„çš„åœ°æ–¹ï¼Œæ¯”å¦‚åœ¨å¾®æœåŠ¡ä¸­ï¼Œç»å¸¸ä¼šè°ƒç”¨å…¶ä»–æœåŠ¡è·å–æ•°æ®ï¼Œè¿™ä¸ªæ•°æ®ä¸»è¦æ˜¯ json æ ¼å¼çš„ï¼Œä½†æ˜¯åœ¨è§£æ json çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæœ‰ç©ºå‡ºç°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è·å–æŸä¸ª jsonObject æ—¶ï¼Œå†é€šè¿‡è¯¥ jsonObject å»è·å–ç›¸å…³ä¿¡æ¯æ—¶ï¼Œåº”è¯¥è¦å…ˆåšéç©ºåˆ¤æ–­ã€‚  
è¿˜æœ‰ä¸€ä¸ªå¾ˆå¸¸è§çš„åœ°æ–¹å°±æ˜¯ä»æ•°æ®åº“ä¸­æŸ¥è¯¢çš„æ•°æ®ï¼Œä¸ç®¡æ˜¯æŸ¥è¯¢ä¸€æ¡è®°å½•å°è£…åœ¨æŸä¸ªå¯¹è±¡ä¸­ï¼Œè¿˜æ˜¯æŸ¥è¯¢å¤šæ¡è®°å½•å°è£…åœ¨ä¸€ä¸ª List ä¸­ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥éƒ½è¦å»å¤„ç†æ•°æ®ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½å‡ºç°ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œå› ä¸ºè°ä¹Ÿä¸èƒ½ä¿è¯ä»æ•°æ®åº“ä¸­æŸ¥å‡ºæ¥çš„ä¸œè¥¿å°±ä¸€å®šä¸ä¸ºç©ºï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨æ•°æ®æ—¶ä¸€å®šè¦å…ˆåšéç©ºåˆ¤æ–­ã€‚  
å¯¹ç©ºæŒ‡é’ˆå¼‚å¸¸çš„å¤„ç†å¾ˆç®€å•ï¼Œå’Œä¸Šé¢çš„é€»è¾‘ä¸€æ ·ï¼Œå°†å¼‚å¸¸ä¿¡æ¯æ¢æ‰å³å¯ã€‚å¦‚ä¸‹ï¼š
```java
@ControllerAdvice
@ResponseBody
public class GlobalExceptionHandler {

    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);

    /**
     * ç©ºæŒ‡é’ˆå¼‚å¸¸
     * @param ex NullPointerException
     * @return
     */
    @ExceptionHandler(NullPointerException.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleTypeMismatchException(NullPointerException ex) {
        logger.error("ç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œ{}", ex.getMessage());
        return new JsonResult("500", "ç©ºæŒ‡é’ˆå¼‚å¸¸äº†");
    }
}
```
è¿™ä¸ªæˆ‘å°±ä¸æµ‹è¯•äº†ï¼Œä»£ç ä¸­ ExceptionController æœ‰ä¸ª `testNullPointException` æ–¹æ³•ï¼Œæ¨¡æ‹Ÿäº†ä¸€ä¸ªç©ºæŒ‡é’ˆå¼‚å¸¸ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¯·æ±‚ä¸€ä¸‹å¯¹åº”çš„ url å³å¯çœ‹åˆ°è¿”å›çš„ä¿¡æ¯ï¼š
```json
{"code":"500","msg":"ç©ºæŒ‡é’ˆå¼‚å¸¸äº†"}
```

### 2.3 ä¸€åŠ³æ°¸é€¸ï¼Ÿ

å½“ç„¶äº†ï¼Œå¼‚å¸¸å¾ˆå¤šï¼Œæ¯”å¦‚è¿˜æœ‰ RuntimeExceptionï¼Œæ•°æ®åº“è¿˜æœ‰ä¸€äº›æŸ¥è¯¢æˆ–è€…æ“ä½œå¼‚å¸¸ç­‰ç­‰ã€‚ç”±äº Exception å¼‚å¸¸æ˜¯çˆ¶ç±»ï¼Œæ‰€æœ‰å¼‚å¸¸éƒ½ä¼šç»§æ‰¿è¯¥å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥æ‹¦æˆª Exception å¼‚å¸¸ï¼Œä¸€åŠ³æ°¸é€¸ï¼š
```java
@ControllerAdvice
@ResponseBody
public class GlobalExceptionHandler {

    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    /**
     * ç³»ç»Ÿå¼‚å¸¸ é¢„æœŸä»¥å¤–å¼‚å¸¸
     * @param ex
     * @return
     */
    @ExceptionHandler(Exception.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleUnexpectedServer(Exception ex) {
        logger.error("ç³»ç»Ÿå¼‚å¸¸ï¼š", ex);
        return new JsonResult("500", "ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜");
    }
}
```
ä½†æ˜¯é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šæ¯”è¾ƒè¯¦ç»†çš„å»æ‹¦æˆªä¸€äº›å¸¸è§å¼‚å¸¸ï¼Œæ‹¦æˆª Exception è™½ç„¶å¯ä»¥ä¸€åŠ³æ°¸é€¸ï¼Œä½†æ˜¯ä¸åˆ©äºæˆ‘ä»¬å»æ’æŸ¥æˆ–è€…å®šä½é—®é¢˜ã€‚å®é™…é¡¹ç›®ä¸­ï¼Œå¯ä»¥æŠŠæ‹¦æˆª Exception å¼‚å¸¸å†™åœ¨ GlobalExceptionHandler æœ€ä¸‹é¢ï¼Œå¦‚æœéƒ½æ²¡æœ‰æ‰¾åˆ°ï¼Œæœ€åå†æ‹¦æˆªä¸€ä¸‹ Exception å¼‚å¸¸ï¼Œä¿è¯è¾“å‡ºä¿¡æ¯å‹å¥½ã€‚

## 3. æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸

åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œé™¤äº†æ‹¦æˆªä¸€äº›ç³»ç»Ÿå¼‚å¸¸å¤–ï¼Œåœ¨æŸäº›ä¸šåŠ¡ä¸Šï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€äº›ä¸šåŠ¡å¼‚å¸¸ï¼Œæ¯”å¦‚åœ¨å¾®æœåŠ¡ä¸­ï¼ŒæœåŠ¡ä¹‹é—´çš„ç›¸äº’è°ƒç”¨å¾ˆå¹³å‡¡ï¼Œå¾ˆå¸¸è§ã€‚è¦å¤„ç†ä¸€ä¸ªæœåŠ¡çš„è°ƒç”¨æ—¶ï¼Œé‚£ä¹ˆå¯èƒ½ä¼šè°ƒç”¨å¤±è´¥æˆ–è€…è°ƒç”¨è¶…æ—¶ç­‰ç­‰ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ï¼Œå½“è°ƒç”¨å¤±è´¥æ—¶æŠ›å‡ºè¯¥å¼‚å¸¸ï¼Œç»™ GlobalExceptionHandler å»æ•è·ã€‚

### 3.1 å®šä¹‰å¼‚å¸¸ä¿¡æ¯
ç”±äºåœ¨ä¸šåŠ¡ä¸­ï¼Œæœ‰å¾ˆå¤šå¼‚å¸¸ï¼Œé’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡ï¼Œå¯èƒ½ç»™å‡ºçš„æç¤ºä¿¡æ¯ä¸åŒï¼Œæ‰€ä»¥ä¸ºäº†æ–¹ä¾¿é¡¹ç›®å¼‚å¸¸ä¿¡æ¯ç®¡ç†ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šå®šä¹‰ä¸€ä¸ªå¼‚å¸¸ä¿¡æ¯æšä¸¾ç±»ã€‚æ¯”å¦‚ï¼š
```java
/**
 * ä¸šåŠ¡å¼‚å¸¸æç¤ºä¿¡æ¯æšä¸¾ç±»
 * @author shengwu ni
 */
public enum BusinessMsgEnum {
    /** å‚æ•°å¼‚å¸¸ */
    PARMETER_EXCEPTION("102", "å‚æ•°å¼‚å¸¸!"),
    /** ç­‰å¾…è¶…æ—¶ */
    SERVICE_TIME_OUT("103", "æœåŠ¡è°ƒç”¨è¶…æ—¶ï¼"),
    /** å‚æ•°è¿‡å¤§ */
    PARMETER_BIG_EXCEPTION("102", "è¾“å…¥çš„å›¾ç‰‡æ•°é‡ä¸èƒ½è¶…è¿‡50å¼ !"),
    /** 500 : ä¸€åŠ³æ°¸é€¸çš„æç¤ºä¹Ÿå¯ä»¥åœ¨è¿™å®šä¹‰ */
    UNEXPECTED_EXCEPTION("500", "ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼");
    // è¿˜å¯ä»¥å®šä¹‰æ›´å¤šçš„ä¸šåŠ¡å¼‚å¸¸

    /**
     * æ¶ˆæ¯ç 
     */
    private String code;
    /**
     * æ¶ˆæ¯å†…å®¹
     */
    private String msg;

    private BusinessMsgEnum(String code, String msg) {
        this.code = code;
        this.msg = msg;
    }
	// set getæ–¹æ³•
}
```

### 3.2 æ‹¦æˆªè‡ªå®šä¹‰å¼‚å¸¸

ç„¶åæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªä¸šåŠ¡å¼‚å¸¸ï¼Œå½“å‡ºç°ä¸šåŠ¡å¼‚å¸¸æ—¶ï¼Œæˆ‘ä»¬å°±æŠ›è¿™ä¸ªè‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸å³å¯ã€‚æ¯”å¦‚æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª BusinessErrorException å¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼š
```java
/**
 * è‡ªå®šä¹‰ä¸šåŠ¡å¼‚å¸¸
 * @author shengwu ni
 */
public class BusinessErrorException extends RuntimeException {
    
    private static final long serialVersionUID = -7480022450501760611L;

    /**
     * å¼‚å¸¸ç 
     */
    private String code;
    /**
     * å¼‚å¸¸æç¤ºä¿¡æ¯
     */
    private String message;

    public BusinessErrorException(BusinessMsgEnum businessMsgEnum) {
        this.code = businessMsgEnum.code();
        this.message = businessMsgEnum.msg();
    }
	// get setæ–¹æ³•
}
```
åœ¨æ„é€ æ–¹æ³•ä¸­ï¼Œä¼ å…¥æˆ‘ä»¬ä¸Šé¢è‡ªå®šä¹‰çš„å¼‚å¸¸æšä¸¾ç±»ï¼Œæ‰€ä»¥åœ¨é¡¹ç›®ä¸­ï¼Œå¦‚æœæœ‰æ–°çš„å¼‚å¸¸ä¿¡æ¯éœ€è¦æ·»åŠ ï¼Œæˆ‘ä»¬ç›´æ¥åœ¨æšä¸¾ç±»ä¸­æ·»åŠ å³å¯ï¼Œå¾ˆæ–¹ä¾¿ï¼Œåšåˆ°ç»Ÿä¸€ç»´æŠ¤ï¼Œç„¶åå†æ‹¦æˆªè¯¥å¼‚å¸¸æ—¶è·å–å³å¯ã€‚
```java
@ControllerAdvice
@ResponseBody
public class GlobalExceptionHandler {

    private static final Logger logger = LoggerFactory.getLogger(GlobalExceptionHandler.class);
    /**
     * æ‹¦æˆªä¸šåŠ¡å¼‚å¸¸ï¼Œè¿”å›ä¸šåŠ¡å¼‚å¸¸ä¿¡æ¯
     * @param ex
     * @return
     */
    @ExceptionHandler(BusinessErrorException.class)
    @ResponseStatus(value = HttpStatus.INTERNAL_SERVER_ERROR)
    public JsonResult handleBusinessError(BusinessErrorException ex) {
        String code = ex.getCode();
        String message = ex.getMessage();
        return new JsonResult(code, message);
    }
}
```
åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ¨¡æ‹Ÿä¸€ä¸‹æŠ›å‡ºä¸šåŠ¡å¼‚å¸¸ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼š
```java
@RestController
@RequestMapping("/exception")
public class ExceptionController {

    private static final Logger logger = LoggerFactory.getLogger(ExceptionController.class);

    @GetMapping("/business")
    public JsonResult testException() {
        try {
            int i = 1 / 0;
        } catch (Exception e) {
            throw new BusinessErrorException(BusinessMsgEnum.UNEXPECTED_EXCEPTION);
        }
        return new JsonResult();
    }
}
```
è¿è¡Œä¸€ä¸‹é¡¹ç›®ï¼Œæµ‹è¯•ä¸€ä¸‹ï¼Œè¿”å› json å¦‚ä¸‹ï¼Œè¯´æ˜æˆ‘ä»¬è‡ªå®šä¹‰çš„ä¸šåŠ¡å¼‚å¸¸æ•è·æˆåŠŸï¼š
```json
{"code":"500","msg":"ç³»ç»Ÿå‘ç”Ÿå¼‚å¸¸ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ï¼"}
```

## 4. æ€»ç»“

æœ¬èŠ‚è¯¾ç¨‹ä¸»è¦è®²è§£äº†Spring Boot çš„å…¨å±€å¼‚å¸¸å¤„ç†ï¼ŒåŒ…æ‹¬å¼‚å¸¸ä¿¡æ¯çš„å°è£…ã€å¼‚å¸¸ä¿¡æ¯çš„æ•è·å’Œå¤„ç†ï¼Œä»¥åŠåœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„è‡ªå®šä¹‰å¼‚å¸¸æšä¸¾ç±»å’Œä¸šåŠ¡å¼‚å¸¸çš„æ•è·ä¸å¤„ç†ï¼Œåœ¨é¡¹ç›®ä¸­è¿ç”¨çš„éå¸¸å¹¿æ³›ï¼ŒåŸºæœ¬ä¸Šæ¯ä¸ªé¡¹ç›®ä¸­éƒ½éœ€è¦åšå…¨å±€å¼‚å¸¸å¤„ç†ã€‚

è¯¾ç¨‹æºä»£ç ä¸‹è½½åœ°å€ï¼š[æˆ³æˆ‘ä¸‹è½½](https://gitee.com/eson15/springboot_study)

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œå…¬ä¼—å·ä¸èƒ½ä¸å…³æ³¨ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘ä»¬åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)