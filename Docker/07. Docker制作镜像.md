> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

## è‡ªå®šä¹‰åˆ¶ä½œé•œåƒ

æˆ‘ä»¬å­¦ä¹ äº†Dockerfileè¯­æ³•ï¼Œé‚£ä¹ˆå¦‚ä½•åº”ç”¨Dockerfileåˆ¶ä½œè‡ªå®šä¹‰çš„é•œåƒå‘¢ï¼Ÿé‚£ä»Šå¤©æˆ‘ä»¬å°±æ¥å®æˆ˜ä¸€ä¸‹ï¼Œä»¥ä¸»æµçš„å¾®æœåŠ¡`Jar` ä¸ºä¾‹å­ï¼Œå¼€å¯æˆ‘ä»¬è‡ªå®šä¹‰åˆ¶ä½œé•œåƒä¹‹æ—…ã€‚

> å»ºç«‹ç®€å•Springbooté¡¹ç›®,å¹¶æ‰“åŒ…æˆjar

1. ç®€å†demoé¡¹ç›®ï¼ˆè®¿é—®è·¯å¾„ /start/springbootï¼‰

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/D340639AA16948FFB12679E4B87E8E84/11731)

2. é…ç½®ç«¯å£ï¼Œä»¥åŠåˆ©ç”¨mavenæ‰“å‡ºjaråŒ…ï¼ˆ`tudou-0.0.1-SNAPSHOT.jar`ï¼‰

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/20E02721AD0043F092068DE5C624CEB3/11734)

3.è¿è¡Œé¡¹ç›®è®¿é—®ï¼ˆç«¯å£ä¸º `8081` ,è®¿é—®è·¯å¾„ http://127.0.0.1:8081/start/springbootï¼‰

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/B3EC0D5E805A482C80177F7E31D31A99/11870)


> åˆ¶ä½œé•œåƒ

1. åœ¨è£…æœ‰`docker`çš„æœºå™¨ä¸Šï¼Œæ–°å»ºä¸€ä¸ªç›®å½•ï¼ˆ`tudou`ï¼‰

```shell
# åˆ›å»ºä¸€ä¸ªç›®å½•ï¼ˆtudouï¼‰
[root@tudou tudou]# mkdir tudou
[root@tudou tudou]# cd tudou
[root@tudou tudou]# pwd
/home/tudou/tudou
```

2. ä¸Šä¼ `Jar`ï¼ˆ`tudou-0.0.1-SNAPSHOT.jar`ï¼‰åˆ°å½“å‰ç›®å½•ï¼ˆ`tudou`ï¼‰ä¸‹

```shell
# æŸ¥çœ‹Jarï¼ˆtudou-0.0.1-SNAPSHOT.jarï¼‰
[root@tudou tudou]# pwd
/home/tudou/tudou
[root@tudou tudou]# ls
tudou-0.0.1-SNAPSHOT.jar
[root@tudou tudou]#
```

3. åœ¨å½“å‰ç›®å½•ä¸‹å»ºç«‹dockerfileæ–‡ä»¶

```shell
# æŸ¥çœ‹dockerfileæ–‡ä»¶
[root@tudou tudou]# ll
total 15768
-rw-r--r-- 1 root root        0 Oct 18 10:03 dockerfile
-rw-r--r-- 1 root root 16143518 Oct 18 09:58 tudou-0.0.1-SNAPSHOT.jar
```

4. ç¼–å†™dockerfile

```shell
# æŸ¥çœ‹dockerfileå†…å®¹
[root@tudou tudou]# cat dockerfile
# ä½¿ç”¨ openjdk:8-jdk-alpineç¯å¢ƒ ä¸ºåŸºç¡€é•œåƒ
FROM openjdk:8-jdk-alpine
# é•œåƒä½œè€…
MAINTAINER tudou
# è®¾ç½®æ—¶åŒºä¸º Asia/Shanghai
RUN echo "Asia/Shanghai" > /etc/timezone
# å¢åŠ jar
ADD tudou-0.0.1-SNAPSHOT.jar /home/tudou/tudou.jar
# è¯´æ˜è¦æš´éœ²çš„ç«¯å£
EXPOSE 8081
# å®¹å™¨å¯åŠ¨æ‰§è¡Œçš„å‘½ä»¤ã€‚ä¹Ÿå¯ï¼ˆCMD java -jar /home/tudou/tudou.jarï¼‰
ENTRYPOINT ["java","-jar","/home/tudou/tudou.jar"]
```

* `FROM`: ä½¿ç”¨ openjdk:8-jdk-alpineç¯å¢ƒ ä¸ºåŸºç¡€é•œåƒï¼Œå¦‚æœé•œåƒä¸æ˜¯æœ¬åœ°çš„ä¼šä» DockerHub è¿›è¡Œä¸‹è½½ï¼Œopenjdk:8-jdk-alpine é•œåƒå°ï¼Œæ¨èä½¿ç”¨
* `MAINTAINER`: é•œåƒä½œè€…
* `RUN`: è®¾ç½®æ—¶åŒºä¸º Asia/Shanghai 
* `ADD`: æ‹·è´jarï¼ˆ`tudou-0.0.1-SNAPSHOT.jar`ï¼‰å¹¶ä¸”é‡å‘½å`tudou.jar`
* `EXPOSE`: å£°æ˜æä¾›æœåŠ¡ç«¯å£ã€‚å¸®åŠ©é•œåƒä½¿ç”¨è€…ç†è§£è¿™ä¸ªé•œåƒæœåŠ¡çš„å®ˆæŠ¤ç«¯å£ï¼Œä¸”åœ¨è¿è¡Œæ—¶ä½¿ç”¨éšæœºç«¯å£æ˜ å°„æ—¶ï¼Œä¹Ÿå°±æ˜¯ docker run -P æ—¶ï¼Œä¼šè‡ªåŠ¨éšæœºæ˜ å°„ EXPOSE çš„ç«¯å£ã€‚
* `ENTRYPOINT`: æŒ‡å®šå®¹å™¨å¯åŠ¨æ‰§è¡Œçš„å‘½ä»¤

5. åˆ¶ä½œé•œåƒ

```shell
# è¿™é‡Œä¸ºäº†ä¸‹ä¸€æ­¥æ¨é€æ‰€ä»¥åç§°å¸¦ä¸Šäº†é•œåƒä¸­å¿ƒåœ°å€ï¼šç«¯å£å·
# è‹¥æ— é¡»æ¨é€åˆ™å¯ docker build -t tudou:v1 .
[root@tudou tudou]# docker build -t x.x.x.x:8080/tudou/tudou:v1 .
Sending build context to Docker daemon  16.15MB
Step 1/6 : FROM openjdk:8-jdk-alpine
 ---> a3562aa0b991
Step 2/6 : MAINTAINER tudou
 ---> Running in 3136db0cd8e6
Removing intermediate container 3136db0cd8e6
 ---> edc19b0100db
Step 3/6 : RUN echo "Asia/Shanghai" > /etc/timezone
 ---> Running in 30d37bf618d7
Removing intermediate container 30d37bf618d7
 ---> 3be349b3bbae
Step 4/6 : ADD tudou-0.0.1-SNAPSHOT.jar /home/tudou/tudou.jar
 ---> 4053de23bdb5
Step 5/6 : EXPOSE 8081
 ---> Running in 25db3b7f5827
Removing intermediate container 25db3b7f5827
 ---> d2abf4dcf4b5
Step 6/6 : ENTRYPOINT ["java","-jar","/home/tudou/tudou.jar"]
 ---> Running in 9165e0850ea1
Removing intermediate container 9165e0850ea1
 ---> c33d1214c2aa
Successfully built c33d1214c2aa
Successfully tagged x.x.x.x:8080/tudou/tudou:v1
[root@tudou tudou]# docker images | grep tudou
x.x.x.x:8080/tudou/tudou     v1    c33d1214c2aa        12 seconds ago      121MB
x.x.x.x:8080/tudou/tomcat   tudou  ef6a7c98d192        2 years ago         356MB
[root@tudou tudou]#
```

6.æ¨é€åˆ°é•œåƒä¸­å¿ƒï¼ˆé¡ºå¸¦å¤ä¹ é•œåƒæ“ä½œï¼‰

```shell
[root@tudou tudou]# docker login x.x.x.x:8080 -u admin -p Harbor12345
WARNING! Using --password via the CLI is insecure. Use --password-stdin.
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
[root@tudou tudou]# docker push x.x.x.x:8080/tudou/tudou:v1
The push refers to repository [x.x.x.x:8080/tudou/tudou]
78f839ad322c: Pushed 
718b90d2941d: Pushed 
ceaf9e1ebef5: Pushed 
9b9b7f3d56a0: Pushed 
f1b5933fe4b5: Pushed 
v1: digest: sha256:548796ed0dc545539b5d854812badc40cda2072cca748b17fc7a4658ec1aad19 size: 1366
[root@tudou tudou]#
```
7. é•œåƒä¸­å¿ƒæŸ¥çœ‹

- æŸ¥çœ‹é¡¹ç›®

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/0F40922ECBE14AC0B0427ADA8DBD1425/11826)

- æŸ¥çœ‹é•œåƒ

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/8E79011B53584624AF9C7C52D368C3D3/11828)

**åˆ°æ­¤æˆ‘ä»¬JaråŒ…çš„é•œåƒåˆ¶ä½œå°±è®²è¿°å®Œæ¯•ï¼ï¼ï¼**

> ç”¨è‡ªå·±çš„é•œåƒï¼Œåˆ›å»ºå®¹å™¨

1. è¿è¡Œå®¹å™¨

```shell
# æ˜ å°„jarç«¯å£8081åˆ°å®¿ä¸»æœº8080
[root@tudou tudou]# docker run -it -d -p8080:8081/tcp --name tudou-jar x.x.x.x:8080/tudou/tudou:v1
330e3a8d85501d44c19c24e4d0f9dfd3cc88259ded522489057e6d72a454014d
# æŸ¥çœ‹å®¹å™¨æ˜¯å¦å­˜åœ¨
[root@tudou tudou]# docker ps -a | grep tudou-jar
330e3a8d8550    x.x.x.x:8080/tudou/tudou:v1      "java -jar /home/tudâ€¦"   2 minutes ago  Up 2 minutes   0.0.0.0:8080->8081/tcp   tudou-jar
# æŸ¥çœ‹ä¸»æœºç«¯å£8080æ˜¯å¦ç›‘å¬çŠ¶æ€
[root@tudou tudou]#  netstat -ano | grep 8080
tcp6       0      0 :::8080        :::*     LISTEN      off (0.00/0/0)
```

2.è¿›å…¥å®¹å™¨ï¼ŒæŸ¥çœ‹è¿è¡Œçš„è¿›ç¨‹

```shell
# è¿›å…¥å®¹å™¨
[root@tudou tudou]# docker exec -it tudou-jar sh
# æŸ¥çœ‹è¿›ç¨‹ 
/ # ps -ef | grep -v grep | grep jar
    1 root      0:09 java -jar /home/tudou/tudou.jar
/ # 
```

2.æ ¡éªŒæ­£ç¡®æ€§ï¼ˆè®¿é—®http://x.x.x.x:8080/start/springbootï¼‰

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/0595239972F94BD1B0DEF2660A875CE1/11856)

**ç»¼ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬è®²è¿°äº†é•œåƒçš„è¯ç”Ÿï¼Œä» `é¡¹ç›®æºä»£ç ` åˆ° `dockeré•œåƒ` å†åˆ° `å®¹å™¨` çš„ä¸€ç³»åˆ—æ“ä½œï¼ŒåŒæ—¶ä¹Ÿå›é¡¾äº† `dockeré•œåƒ` ä»¥åŠ `dockerå®¹å™¨` çš„ä¸€äº›æ“ä½œï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œä½ æ˜¯å¦å·²ç»è·ƒè·ƒæ¬²è¯•äº†ï¼Œé‚£å°±```å¼€å¯ä½ åˆ¶ä½œé•œåƒçš„æ—…ç¨‹å§ï¼ï¼ï¼```*

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)