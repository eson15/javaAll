> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

# Dockerå®¹å™¨åŸºç¡€æ“ä½œ

**å®¹å™¨ï¼ˆcontainerï¼‰æ˜¯Dockeré•œåƒçš„è¿è¡Œå®ä¾‹ï¼Œç±»ä¼¼äºå¯æ‰§è¡Œæ–‡ä»¶ä¸è¿›ç¨‹çš„å…³ç³»ï¼ŒDockeræ˜¯å®¹å™¨å¼•æ“ï¼Œç›¸å½“äºç³»ç»Ÿå¹³å°ã€‚**

> å®¹å™¨çš„ç”Ÿå‘½å‘¨æœŸ

![image](http://note.youdao.com/yws/public/resource/86feadd8e5ad608ae81a32c1ddc4fc0b/xmlnote/820BF7EA957F47E28D6101ADE6E08FC4/10371)

##  å®¹å™¨çš„åŸºç¡€æ“ä½œ

ä»¥ `tomcat8.0` ä¸ºä¾‹ï¼š

```shell
# æ‹‰å–tomcat8.0é•œåƒ
[root@tudou tudou]# docker pull tomcat:8.0
Using default tag: latest
latest: Pulling from library/tomcat
57df1a1f1ad8: Pull complete 
71e126169501: Pull complete 
1af28a55c3f3: Pull complete 
03f1c9932170: Pull complete 
881ad7aafb13: Pull complete 
9c0ffd4062f3: Pull complete 
bd62e479351a: Pull complete 
48ee8bc64dbc: Pull complete 
6daad3485ea7: Pull complete 
bc07a0199230: Pull complete 
Digest: sha256:c2b033c9cee06d6a3eb5a4d082935bbb8afee7478e97dcd6bc452bb6ab28da4b
Status: Downloaded newer image for tomcat:8.0
docker.io/library/tomcat:8.0

# æŸ¥çœ‹æœ¬åœ°é•œåƒ
[root@tudou tudou]# docker images | grep tomcat
tomcat      8.0      ef6a7c98d192    2 years ago      356MB
```

## è¿è¡Œå®¹å™¨ 

```shell
docker run -d --name tudou-tomcat tomcat:8.0
```

 - `-d` : åå°è¿è¡Œ 
 - `--name` : æŒ‡å®šå®¹å™¨çš„åç§°ï¼ˆtudou-tomcatï¼‰ã€‚
 - `tomcat:8.0` : æŒ‡å®šé•œåƒåç§°ä»¥åŠtagï¼ˆ`å¯ä»¥ç†è§£ä¸ºç‰ˆæœ¬`ï¼‰ã€‚
 - æ‰§è¡Œä¹‹åæ§åˆ¶å°ä¼šè¾“å‡ºä¸€ä¸²idï¼Œè¿™æ˜¯ `å®¹å™¨ID`ã€‚
 - æ‰§è¡Œ`docker ps -a | grep tomcat` å³å¯çœ‹åˆ°åä¸º`tudou-tomcat` çš„å®¹å™¨å­˜åœ¨ã€‚

```shell
# åå°è¿è¡Œä¸€ä¸ªåä¸ºtudou-tomcatçš„å®¹å™¨
[root@tudou tudou]# docker run -d --name tudou-tomcat tomcat:8.0
0fe0e4049abe892c4e80afa832eddd7d18b4c805ae2c4272ffdfab8b81df99f8

# æŸ¥çœ‹å®¹å™¨
[root@tudou tudou]# docker ps -a | grep tomcat
# å®¹å™¨ID        é•œåƒåç§°        è¿è¡Œå‘½ä»¤         åˆ›å»ºæ—¶é—´          å®æ—¶çŠ¶æ€         ç«¯å£        å®¹å™¨åç§°
0fe0e4049abe  tomcat:8.0  "catalina.sh run"  43 seconds ago   Up 42 seconds   8080/tcp    tudou-tomcat
```

##  åœæ­¢å®¹å™¨ 

```shell
docker stop idOrName
# æˆ–è€…
docker kill idOrName
```

 - `stop` : é’ˆå¯¹å®¹å™¨çš„åœæ­¢æ“ä½œ
 - `idOrName` : å®¹å™¨IDæˆ–è€…åç§°ï¼ˆåç§°å¯èƒ½é‡å¤ï¼Œé€šå¸¸é‡‡ç”¨ `å®¹å™¨ID`ï¼‰
 - `docker kill <idOrName>`: æ€æ‰ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨,ç»“æœå’Œåœæ­¢ç±»ä¼¼

```shell
# æ ¹æ®åç§°ï¼ˆtudou-tomcatï¼‰åœæ­¢å®¹å™¨
[root@tudou tudou]# docker stop tudou-tomcat
tudou-tomcat

# æ ¹æ®IDï¼ˆ0fe0e4049abeï¼‰åœæ­¢å®¹å™¨
[root@tudou tudou]# docker stop 0fe0e4049abe
0fe0e4049abe

# ä¸Šè¿°ä¸¤ç§å‡å¯åœæ­¢ï¼ŒæŸ¥çœ‹å®¹å™¨ï¼šçŠ¶æ€å˜ä¸º <Exited>
[root@tudou tudou]# docker ps -a | grep tomcat
# å®¹å™¨ID        é•œåƒåç§°        è¿è¡Œå‘½ä»¤         åˆ›å»ºæ—¶é—´          å®æ—¶çŠ¶æ€                   å®¹å™¨åç§°
0fe0e4049abe tomcat:8.0   "catalina.sh run"   9 hours ago   Exited (143) 49 seconds ago  tudou-tomcat
```

## å¯åŠ¨å®¹å™¨ 

```shell
docker start idOrName
```

 - `start` : é’ˆå¯¹å®¹å™¨çš„å¯åŠ¨æ“ä½œ
 - `idOrName` : å®¹å™¨IDæˆ–è€…åç§°ï¼ˆåç§°å¯èƒ½é‡å¤ï¼Œé€šå¸¸é‡‡ç”¨ `å®¹å™¨ID`ï¼‰

```shell
# æ ¹æ®åç§°ï¼ˆtudou-tomcatï¼‰å¯åŠ¨å®¹å™¨
[root@tudou tudou]# docker start tudou-tomcat
tudou-tomcat

# æ ¹æ®IDï¼ˆ0fe0e4049abeï¼‰å¯åŠ¨å®¹å™¨
[root@tudou tudou]# docker start 0fe0e4049abe
0fe0e4049abe

# ä¸Šè¿°ä¸¤ç§å‡å¯å¯åŠ¨ï¼ŒæŸ¥çœ‹å®¹å™¨ï¼šçŠ¶æ€å˜ä¸º <Up> ä¸”åˆšå¯åŠ¨3ç§’é’Ÿ
[root@tudou tudou]# docker ps -a | grep tomcat
# å®¹å™¨ID        é•œåƒåç§°        è¿è¡Œå‘½ä»¤          åˆ›å»ºæ—¶é—´         å®æ—¶çŠ¶æ€        ç«¯å£       å®¹å™¨åç§°
0fe0e4049abe  tomcat:8.0   "catalina.sh run"    9 hours ago    Up 3 seconds   8080/tcp   tudou-tomcat
```

## é‡å¯å®¹å™¨ 

```shell
docker restart idOrName
```

 - `restart` : é’ˆå¯¹å®¹å™¨çš„é‡å¯æ“ä½œ
 - `idOrName` : å®¹å™¨IDæˆ–è€…åç§°ï¼ˆåç§°å¯èƒ½é‡å¤ï¼Œé€šå¸¸é‡‡ç”¨ `å®¹å™¨ID`ï¼‰

```shell
# æ ¹æ®åç§°ï¼ˆtudou-tomcatï¼‰åœæ­¢å®¹å™¨
[root@tudou tudou]# docker restart tudou-tomcat
tudou-tomcat

# æ ¹æ®IDï¼ˆ0fe0e4049abeï¼‰åœæ­¢å®¹å™¨
[root@tudou tudou]# docker restart 0fe0e4049abe
0fe0e4049abe

# ä¸Šè¿°ä¸¤ç§å‡å¯å¯åŠ¨ï¼ŒæŸ¥çœ‹å®¹å™¨ï¼šçŠ¶æ€å˜ä¸º <Up> ä¸”åˆšå¯åŠ¨1ç§’é’Ÿ
[root@tudou tudou]# docker ps -a | grep tomcat
# å®¹å™¨ID        é•œåƒåç§°        è¿è¡Œå‘½ä»¤          åˆ›å»ºæ—¶é—´       å®æ—¶çŠ¶æ€     ç«¯å£        å®¹å™¨åç§°
0fe0e4049abe   tomcat:8.0   "catalina.sh run"  9 hours ago   Up 1 second  8080/tcp   tudou-tomcat
```

##  è¿›å…¥å®¹å™¨

```shell
docker exec -it idOrName bash
```

- `-i`: äº¤äº’å¼æ“ä½œã€‚
- `-t`: ç»ˆç«¯ã€‚
- `idOrName`: å®¹å™¨IDæˆ–è€…åç§°ã€‚
- `bash`ï¼šè¿™é‡Œæˆ‘ä»¬è¦è¿›å…¥å®¹å™¨é‡Œçš„shellæ§åˆ¶å°ï¼Œå› æ­¤æ˜¯bashã€‚
-  è¿›å…¥ä¹‹åè¦é€€å‡ºç»ˆç«¯ï¼Œç›´æ¥è¾“å…¥ `exit`ã€‚
-  `docker attach <idOrName>` :ä¹Ÿå¯è¿›å…¥å®¹å™¨ï¼Œä½† `é€€å‡ºä¹‹åå®¹å™¨ä¼šåœæ­¢`ï¼Œå› æ­¤å»ºè®®ä½¿ç”¨ `docker exec` æ–¹å¼ã€‚

```shell
# è¿›å…¥tudou-tomctå®¹å™¨
[root@tudou tudou]# docker exec -it tudou-tomcat bash
# æŸ¥çœ‹å®¹å™¨å†…å½“å‰ç›®å½•ä¸‹çš„æ–‡ä»¶
root@0fe0e4049abe:/usr/local/tomcat# ls
# tomcatä¸‹çš„æ–‡ä»¶  bin  webapps ...
LICENSE  NOTICE  RELEASE-NOTES	RUNNING.txt  bin  conf	include  lib  logs  native-jni-lib  temp  webapps  work
# ä½¿ç”¨ exit é€€å‡ºå®¹å™¨ï¼Œ å›åˆ°å®¿ä¸»æœºshellæ§åˆ¶å°
root@0fe0e4049abe:/usr/local/tomcat# exit
exit
[root@tudou tudou]# 
```

## å¯¼å‡ºå®¹å™¨

```shell
docker export idOrName > filename.tar
```

- `export` : å®¹å™¨å¯¼å‡ºæ“ä½œã€‚
- `idOrName` : å®¹å™¨IDæˆ–è€…åç§°ã€‚
- `filename.tar` : å¯¼å‡ºçš„æ–‡ä»¶åç§°

```shell
# å¯¼å‡ºæ“ä½œ
[root@tudou tudou]# docker export tudou-tomcat > tudou-tomcat.tar
[root@tudou tudou]# 
# æŸ¥çœ‹å¯¼å‡ºçš„æ–‡ä»¶ tudou-tomcat.tar
[root@tudou tudou]# ll
total 346392
drwxr-xr-x 4 root users      4096 Jun  9 22:21 es
drwxr-xr-x 2 root users      4096 Jun  6 23:10 server
drwxr-xr-x 3 root users      4096 Jun  7 20:50 tomcat-webapps
# ----- I am here --------
-rw-r--r-- 1 root root  354687488 Sep 15 23:09 tudou-tomcat.tar
[root@tudou tudou]# 
```

## å¯¼å…¥å®¹å™¨

```shell
docker import filename.tar REPOSITORY:TAG
```

- `import` : å®¹å™¨å¯¼å‡ºæ“ä½œã€‚
- `filename.tar` : å¯¼å‡ºçš„æ–‡ä»¶ã€‚
- `REPOSITORY` : é•œåƒåç§°
- `TAG` : é•œåƒtagï¼ˆ`å¯è®¤ä¸ºç‰ˆæœ¬`ï¼‰

```shell
# å¯¼å…¥æ“ä½œ
[root@tudou tudou]# docker import tudou-tomcat.tar test/tudou-tomcat:v1
# æŸ¥çœ‹é•œåƒ
[root@tudou tudou]# docker images
# é•œåƒåç§°           ç‰ˆæœ¬           é•œåƒID             åˆ›å»ºæ—¶é—´          é•œåƒå¤§å°
REPOSITORY           TAG          IMAGE ID            CREATED           SIZE
test/tudou-tomcat    v1         99692189792f        25 seconds ago      345MB
```

## åˆ é™¤å®¹å™¨

```shell
docker rm idOrName
```

- `rm` ï¼šå®¹å™¨åˆ é™¤æ“ä½œã€‚
- `idOrName` : å®¹å™¨IDæˆ–è€…åç§°ã€‚
- `rm -f` : å¼ºåˆ¶åˆ é™¤æ“ä½œ

```shell
# åˆ é™¤æ“ä½œ
[root@tudou tudou]# docker rm -f tudou-tomcat 
tudou-tomcat

# æŸ¥çœ‹å®¹å™¨ æ— æœ
[root@iZ2zed6z27o4rzpwn4kwpqZ liqiao]# docker ps -a | grep tomcat
[root@iZ2zed6z27o4rzpwn4kwpqZ liqiao]# 
```

**ç»¼ä¸Šæ‰€è¿°ï¼Œè®²è¿°äº†å®¹å™¨çš„æœ€åŸºæœ¬æ“ä½œï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼ï¼ï¼ï¼**

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)