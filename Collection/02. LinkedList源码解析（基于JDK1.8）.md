> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![å…¬ä¼—å·äºŒç»´ç ](https://img-blog.csdnimg.cn/20201121225359995.png)

----

![å›¾1-1 æ€ç»´å¯¼å›¾](https://img-blog.csdnimg.cn/20201118202614223.png?x-oss-process=image)

## æ¦‚è¿°

```LinkedList``` æ˜¯åŸºäºèŠ‚ç‚¹å®ç°çš„ **åŒå‘** é“¾è¡¨çš„ Listï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æŒ‡å‘å‰ä¸€ä¸ªå’Œåä¸€ä¸ªèŠ‚ç‚¹ä»å½¢æˆé“¾è¡¨ã€‚

## ç±»å›¾

![å›¾ 1-2 LinkedListç±»å›¾](https://img-blog.csdnimg.cn/20201116190904953.png?x-oss-process=image)

ä»å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ ```LinkedList``` å®ç°äº†4ä¸ªæ¥å£å’Œç»§æ‰¿äº†1ä¸ªæŠ½è±¡ç±»ï¼Œ4ä¸ªæ¥å£åˆ†åˆ«ä¸ºï¼š

- ```List``` æ¥å£ï¼Œä¸»è¦æä¾›æ·»åŠ ã€åˆ é™¤ã€ä¿®æ”¹ã€è¿­ä»£éå†ç­‰æ“ä½œã€‚

- ```Cloneable``` æ¥å£ï¼Œä»£è¡¨ ```LinkedList``` æ”¯æŒå…‹éš†ã€‚

- ```Serializable``` æ¥å£ï¼Œè¡¨ç¤ºArrayListæ”¯æŒåºåˆ—åŒ–çš„åŠŸèƒ½ã€‚

- ```Deque``` æ¥å£ï¼Œæä¾› **åŒç«¯** é˜Ÿåˆ—çš„åŠŸèƒ½ï¼Œ```LinkedList``` æ”¯æŒå¿«é€Ÿçš„åœ¨å¤´å°¾æ·»åŠ å’Œè¯»å–å…ƒç´ ã€‚

```LinedList``` æ‰€å®ç°çš„æ¥å£ç›¸æ¯”äº ```ArrayList``` æ¥è¯´ï¼Œå°‘äº†ä¸€ä¸ª ```RandomAccess``` æ¥å£ï¼Œè¯´æ˜ ```LinkedList``` å¹¶ä¸æ”¯æŒéšæœºè®¿é—®ï¼›åŒæ—¶å¤šäº†ä¸€ä¸ª ```Deque``` æ¥å£ï¼Œæ–°å¢äº†**åŒç«¯é˜Ÿåˆ—**çš„èƒ½åŠ›ã€‚

ç»§æ‰¿çš„æŠ½è±¡ç±»ä¸º ```AbstactSequentialList```ï¼Œå®ƒæ˜¯ ```AbstractList``` çš„å­ç±»ï¼Œå®ç°äº†æœ¬æ¥åªèƒ½ **é¡ºåº** è®¿é—®çš„æ•°æ®å­˜å‚¨ç»“æ„ï¼ˆä¾‹å¦‚ï¼šé“¾è¡¨ï¼‰çš„ ```get(int index)ã€ addï¼ˆint index, E element)``` ç­‰ **éšæœº** æ“ä½œçš„æ–¹æ³•ã€‚è¿™å¥è¯å¯èƒ½æœ‰ç‚¹ç»•ï¼Œç¨åŠ è§£é‡Šä¸€ç•ªï¼šé“¾è¡¨æ˜¯ä¸€ç§åªèƒ½**é¡ºåºè®¿é—®**çš„æ•°æ®å­˜å‚¨ç»“æ„ï¼Œè€Œ ```AbstractSequentialList``` æŠ½è±¡ç±»å¯¹è¿™ç±»åªèƒ½ **é¡ºåºè®¿é—®/æ“ä½œ** çš„æ•°æ®å­˜å‚¨ç»“æ„ï¼Œä¹Ÿæä¾›äº†ç±»æ•°ç»„èˆ¬çš„**éšæœºè®¿é—®/æ“ä½œ** çš„ ```API```ã€‚æ„Ÿå…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹ ```AbstractSequentialList``` çš„æºä»£ç ï¼Œå…¶æ˜¯åŸºäºè¿­ä»£å™¨é¡ºåºéå†ï¼ˆè¯´åˆ°åº•è¿˜æ˜¯éœ€è¦éå†ï¼Œåªä¸è¿‡æ˜¯å®ƒå¸®æˆ‘ä»¬åšäº†è¿™ä¸€æ­¥~ï¼‰å®ç°çš„ã€‚

ä¸è¿‡éœ€è¦ç•™æ„çš„æ˜¯ï¼Œ```LinkedList``` å’Œ ```LinkedList``` ä¸€èˆ¬ï¼Œéƒ½ç»“åˆäº†è‡ªèº«çš„ç‰¹æ€§å¤§é‡é‡å†™äº†æŠ½è±¡ç±»æä¾›çš„æ–¹æ³•å®ç°ï¼›```ArrayList``` é‡å†™äº† ```AbstractList``` æä¾›çš„æ–¹æ³•å®ç°ï¼Œ ```LinkedList``` é‡å†™äº† ```AbstactSequentialList``` æä¾›çš„æ–¹æ³•å®ç°ã€‚

ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå¯¹äºæ”¯æŒéšæœºè®¿é—®çš„æ•°æ®ç»“æ„ä¼šç»§æ‰¿ ```AbstractList``` æŠ½è±¡ç±»ï¼Œä¸æ”¯æŒéšæœºè®¿é—®çš„åˆ™ä¼šç»§æ‰¿ ```AbstactSequentialList``` æŠ½è±¡ç±»ã€‚

```java
public class LinkedList<E>
        extends AbstractSequentialList<E>
        implements List<E>, Deque<E>, Cloneable, java.io.Serializable {
            // .....
        }
```

## å±æ€§

```LinkedList``` åªæœ‰ 3 ä¸ªå±æ€§ï¼Œåˆ†åˆ«ä¸ºï¼š å¤´èŠ‚ç‚¹ ```first``` ã€ å°¾èŠ‚ç‚¹ ```last``` ä»¥åŠä»£è¡¨æ•°é‡çš„ ```size```ã€‚ä¸‰è€…çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

todoï¼šæ’å…¥ä¸‰è€…çš„å…³ç³»å›¾

ç›¸ä¿¡æœ‹å‹ä»¬éƒ½æ¥è§¦è¿‡åŒå‘é“¾è¡¨çš„æ¦‚å¿µï¼Œç†è§£èµ·æ¥åº”è¯¥ä¸éš¾ï¼ˆçµé­‚ç”»å®¶ï¼šå°å¥‡~~ï¼‰ï¼›è¿™é‡Œå°±ä¸åšè¿‡å¤šçš„å±•å¼€è§£é‡Šäº†ã€‚

å…·ä½“æºç å¦‚ä¸‹ï¼š

```java
/**
  * å¤´èŠ‚ç‚¹
  */
transient Node<E> first;

/**
  * å°¾èŠ‚ç‚¹
*/
transient Node<E> last;

/**
  * æ•°é‡
  */
transient int size = 0;

/**
  * åº•å±‚å®ç°æ˜¯ åŒå‘é“¾è¡¨
  */
private static class Node<E> {
    E item;
    Node<E> next;
    Node<E> prev;

    Node(Node<E> prev, E element, Node<E> next) {
        this.item = element;
        this.next = next;
        this.prev = prev;
    }
}

```

## æ„é€ æ–¹æ³•

```LinkedList``` çš„æ„é€ æ–¹æ³•åªæœ‰2ä¸ªï¼šæ— å‚æ„é€ æ–¹æ³• ```public ListedList()``` å’ŒæŒ‡å®šé›†åˆçš„ ```public LinkedList(Collection<? extends E> c)```ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```java

/**
  * æ— å‚æ„é€ æ–¹æ³•
  */
public LinkedList() {
}

/**
  * æŒ‡å®šæ·»åŠ é›†åˆcçš„æ„é€ æ–¹æ³•
  * @param c
  */
public LinkedList(Collection<? extends E> c) {
    this();
    // æ‰¹é‡æ·»åŠ å…ƒç´ ï¼Œåé¢åœ¨æ–°å¢å…ƒç´ æ¨¡å—ä¼šè¯¦ç»†ä»‹ç»
    addAll(c);
}
```

ç›¸æ¯”äº ```ArrayList``` æ¥è¯´ï¼Œ ```LinkedList``` æ²¡æœ‰ç±»ä¼¼æŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„æ„é€ æ–¹æ³•ï¼›é€ æˆè¿™ä¸ªåŒºåˆ«çš„åŸå› è¿˜æ˜¯å› ä¸ºä¸¤è€…çš„åº•å±‚å®ç°æ–¹å¼ä¸ä¸€æ ·ï¼Œ```LinkedList``` æ˜¯åŸºäºèŠ‚ç‚¹å®ç°çš„åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥æ¯æ¬¡æ·»åŠ å…ƒç´ çš„æ—¶å€™ç›´æ¥ ```new``` ä¸€ä¸ªèŠ‚ç‚¹å³å¯ã€‚

## æ–°å¢å…ƒç´ 

æ–°å¢å…ƒç´ çš„æ–¹æ³•ä¸»è¦æœ‰å¦‚ä¸‹4ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼š

- ```public boolean add(E e)``` åœ¨é“¾è¡¨èŠ‚ç‚¹å **é¡ºåº** æ·»åŠ ä¸€ä¸ªå…ƒç´ 

- ```public void add(int index, E element)``` åœ¨æŒ‡å®š ```index``` ä½ç½®æ·»åŠ å…ƒç´  ```element```

- ```public boolean addAll(Collection<? extends E> c)``` åœ¨é“¾è¡¨æœ«å°¾ **é¡ºåº** æ·»åŠ å¤šä¸ªå…ƒç´ 

- ```public boolean addAll(int index, Collection<? extends E> c)``` åœ¨æŒ‡å®š ```index``` ä½ç½®æ·»åŠ å¤šä¸ªå…ƒç´ 

ä¸¥æ ¼æ¥è¯´ï¼Œ```LinkedList``` çš„æ–°å¢å…ƒç´ çš„æ–¹æ³•è¿˜æœ‰å¦å¤– 2 ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼š ```addFirst(E e)``` å’Œ ```addLast(E e)```ï¼›è¿™ä¸¤ä¸ªæ–¹æ³•æ˜¯ ```LinkedList``` ä½œä¸ºå®ç°åŒç«¯é˜Ÿåˆ— ```Deque``` çš„äº§ç‰©ï¼Œåé¢ä¼šå¯¹ ```LinkedList``` ä½œä¸ºåŒç«¯é˜Ÿåˆ—çš„æ–¹æ³•åšä¸“é—¨çš„ä»‹ç»ã€‚

### public boolean add(E e)

ç»§æ‰¿äº ```AbstractList``` æŠ½è±¡ç±»ï¼Œåœ¨é“¾è¡¨èŠ‚ç‚¹å **é¡ºåº** æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œæºç å¦‚ä¸‹ï¼š

```java
/**
  * åœ¨é“¾è¡¨èŠ‚ç‚¹åé¡ºåºæ·»åŠ ä¸€ä¸ªå…ƒç´ e
  * @param e
  * @return boolean æ·»åŠ æˆåŠŸè¿”å›true
  */
@Override
public boolean add(E e) {
  // é¡ºåºæ·»åŠ å•ä¸ªå…ƒç´ åˆ°é“¾è¡¨çš„æœ«å°¾
  linkLast(e);
  return true;
}

/**
  * çœŸå®æ‰§è¡Œæ·»åŠ æ“ä½œï¼ˆå¾€é“¾è¡¨æœ€åæ·»åŠ æ–°çš„å…ƒç´ ï¼‰
  * @param e æ·»åŠ å…ƒç´  e
  */
void linkLast(E e) {
  // è®°å½•åŸ last èŠ‚ç‚¹
  final Node<E> l = last;
  // Nodeç±»æ„é€ æ–¹æ³•ä¸‰ä¸ªå‚æ•°: Node<E> prev, E element, Node<E> next
  // æ‰€ä»¥ä¹Ÿå¾ˆå¥½ç†è§£ï¼Œæ–°èŠ‚ç‚¹çš„å‰ç½®preèŠ‚ç‚¹æ˜¯åŸæ¥çš„lastèŠ‚ç‚¹ï¼Œ eä»£è¡¨å…ƒç´ æœ¬èº« æ–°èŠ‚ç‚¹çš„nextèŠ‚ç‚¹ä¸ºnullï¼ˆä¸å­˜åœ¨æ–°çš„èŠ‚ç‚¹ï¼‰
  final Node<E> newNode = new Node<>(l, e, null);
  // æ›´æ–°lastèŠ‚ç‚¹ä¸ºæœ€æ–°çš„newNode
  last = newNode;
  // åŒå‘é“¾è¡¨ï¼Œç›¸äº’å…³è”---æ–°èŠ‚ç‚¹å…³è”åŸlastèŠ‚ç‚¹ï¼ŒåŸlastèŠ‚ç‚¹ä¹Ÿè¦å…³è”æ–°çš„èŠ‚ç‚¹
  if (l == null) {
      // l == nullï¼Œè¯´æ˜æ˜¯ä¸€ä¸ªç©ºçš„æƒ…å†µï¼Œä¸Šé¢å·²ç»å°†lastæŒ‡å‘æ–°èŠ‚ç‚¹äº†ï¼Œéœ€è¦å°†firstä¹ŸæŒ‡å‘æ–°èŠ‚ç‚¹
      first = newNode;
  } else {
      // ä¸ä¸ºç©ºï¼Œåˆ™è¯´æ˜é“¾è¡¨ä¸­å·²æœ‰å…ƒç´ ï¼Œç›´æ¥å°†lastèŠ‚ç‚¹å’ŒnewèŠ‚ç‚¹åšä¸€ä¸ªåŒå‘çš„ç»‘å®šå…³ç³»å³å¯
      l.next = newNode;
  }
  size++;
  // æ“ä½œçš„æ¬¡æ•°++ï¼Œå…¨ç¨‹ä¼¼ä¹å°±åœ¨åºåˆ—åŒ–å’Œéåºåˆ—åŒ–æ¨¡å—æœ‰ç…åˆ°è¿™ä¸ªä¸œä¸œè¢«ä½¿ç”¨åˆ°
  modCount++;
}

```

ä»£ç ç†è§£èµ·æ¥ä¸éš¾ï¼Œå¾€é“¾è¡¨æœ«å°¾æ–°å¢ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ï¼Œå¯åˆ†3æ­¥èµ°ï¼š

1. åˆ›å»ºæ–°èŠ‚ç‚¹ ```new Node<>(last, e, null)```ï¼Œå‚æ•° 1 ä¸º ```last``` æ˜¯è¯´æ–°èŠ‚ç‚¹çš„å‰ç½®èŠ‚ç‚¹æ˜¯åŸlastèŠ‚ç‚¹ï¼Œå‚æ•°2 ä»£è¡¨å…ƒç´ æœ¬èº«eï¼›å‚æ•°3 ä¸º ```null``` è¯´æ˜æ–°èŠ‚ç‚¹åé¢æ— å…¶ä»–èŠ‚ç‚¹

2. åŸlastæŒ‡é’ˆæ›´æ–°ä¸ºæ–°èŠ‚ç‚¹ï¼Œè¿™é‡Œåˆ†2ç§æƒ…å†µï¼š
  
    1. åŸlastèŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜é“¾è¡¨è¿˜æœªå­˜å‚¨è¿‡å…ƒç´ ï¼Œè¿™æ—¶å€™éœ€è¦å°†firstèŠ‚ç‚¹ä¹ŸæŒ‡å‘æ–°èŠ‚ç‚¹

    2. åŸlastèŠ‚ç‚¹ä¸ä¸ºç©ºï¼Œè¯´æ˜é“¾è¡¨å·²å­˜å‚¨è¿‡å…ƒç´ ï¼Œç›´æ¥å°†åŸlastèŠ‚ç‚¹çš„åç½®æŒ‡é’ˆ ```next``` æŒ‡å‘æ–°èŠ‚ç‚¹ï¼ˆå› ä¸ºå…¶ä¸ºåŒå‘é“¾è¡¨ï¼‰

3. æ›´æ–° ```size``` å’Œ æ“ä½œæ¬¡æ•° ```modCount```

### public void add(int index, E element)

ç»§æ‰¿äº ```AbstractSequentialList``` æŠ½è±¡ç±»ï¼Œä¸ºä»¥åŒå‘é“¾è¡¨ä¸ºåº•å±‚å­˜å‚¨ç»“æ„çš„ ```LinkedList``` èµ‹äºˆäº†ç±»æ•°ç»„èˆ¬éšæœºè®¿é—®çš„èƒ½åŠ›ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š

```java
 /**
  * æ·»åŠ å•ä¸ªå…ƒç´ åˆ°æŒ‡å®šä½ç½®
  * @param index ä¸‹æ ‡
  * @param element å…ƒç´ æœ¬èº«
  */
@Override
public void add(int index, E element) {
    // å‚æ•°index æœ‰æ•ˆæ€§æ£€æŸ¥
    checkPositionIndex(index);

    // indexä»0å¼€å§‹ï¼Œæ‰€ä»¥å½“index == size è¯´æ˜æ˜¯æœ€åçš„ä½ç½®ï¼Œä¹Ÿå³æ˜¯å¦‚ä¸Šé¢çš„åœ¨é“¾è¡¨æœ€åæ–°å¢å…ƒç´ ä¸€æ ·
    if (index == size) {
        linkLast(element);
    } else {
        // node(index) è·å–indexä½ç½®çš„nodeèŠ‚ç‚¹
        linkBefore(element, node(index));
    }
}
/**
  * æ·»åŠ å…ƒç´ eåˆ° succèŠ‚ç‚¹çš„å‰é¢
  *
  * pred ---> succ     =====å˜æˆ===>        pred --->newNode ---> succ
  *
  * æ­¥éª¤ï¼š
  *  1.è·å–succèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ pred
  *  2.åˆ›å»ºæ–°çš„å¾…æ’å…¥èŠ‚ç‚¹newNodeï¼ŒæŒ‡å®šå…¶å‰ç½®èŠ‚ç‚¹ï¼ˆpredï¼‰å’Œåç½®èŠ‚ç‚¹(succ)
  *  3.æ›´æ–°succçš„å‰ç½®èŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹newNodeï¼ˆåŒå‘ç»‘å®šçš„ä½“ç°ï¼‰
  *  4.æ›´æ–°predçš„åç½®èŠ‚ç‚¹ä¸ºæ–°èŠ‚ç‚¹newNodeï¼ˆåŒå‘ç»‘å®šçš„ä½“ç°ï¼‰
  *      4.1å¦‚æœpredä¸ºç©ºï¼Œè¯´æ˜succæœ¬èº«ä¸ºå¤´èŠ‚ç‚¹ï¼Œæ¢å¥è¯è¯´ç›¸å½“äºæ˜¯åœ¨å¤´èŠ‚ç‚¹ä¹‹å‰æ’å…¥æ–°çš„èŠ‚ç‚¹ï¼Œå³æ›´æ–°first = newNodeå³å¯
  *      4.2å¦‚æœpredä¸ä¸ºç©ºï¼Œåˆ™æ­£å¸¸çš„pred.next= newNoeå³å¯
  * @param e
  * @param succ
  */
void linkBefore(E e, Node<E> succ) {
    // è·å–succèŠ‚ç‚¹çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆå› ä¸ºæ–¹æ³•çš„é€»è¾‘æ˜¯ï¼šæ·»åŠ å…ƒç´ eåˆ°succèŠ‚ç‚¹çš„å‰é¢ï¼‰
    final Node<E> pred = succ.prev;
    // åˆ›å»ºæ–°èŠ‚ç‚¹ï¼Œå¹¶ä¸”æœ¬èº«å…³è”å‰åèŠ‚ç‚¹ï¼ˆå‰èŠ‚ç‚¹ï¼š predã€ åèŠ‚ç‚¹ï¼šsuccï¼‰
    final Node<E> newNode = new Node<>(pred, e, succ);
    // åŒå‘ç»‘å®šä¹‹ç”»ä¸ªå›¾å®Œäº‹ succ.prevæŒ‡å‘æ–°çš„èŠ‚ç‚¹ï¼ˆåœ¨å…¶å‰é¢ï¼‰
    succ.prev = newNode;
    // å¦‚æœpredä¸ºç©ºï¼Œè¯´æ˜succæœ¬èº«å°±æ˜¯ä¸ºå¤´èŠ‚ç‚¹ï¼Œåˆ™æ›´æ–°firstæŒ‡å‘newNodeä½œä¸ºæ–°çš„é¦–èŠ‚ç‚¹
    if (pred == null) {
        first = newNode;
    } else {
        // ç›´æ¥åŒå‘ç»‘å®š
        pred.next = newNode;
    }
    size++;
    modCount++;
}

/**
  * æ‰¾åˆ°ä¸‹æ ‡ä¸ºindexçš„èŠ‚ç‚¹
  * éªšæ“ä½œï¼š é€šè¿‡åˆ¤æ–­indexæ˜¯å¦å¤§äºsizeçš„ä¸€åŠï¼Œæ¥åˆ¤æ–­æ˜¯ä»å¤´éå†è¿˜æ˜¯ä»å°¾éå†
  * @param index
  * @return Node<E>
  */
Node<E> node(int index) {
    // ä¸å¤ªæ˜ç™½ä¸ºå•¥æŠŠè¿™ä¸ªæ–­è¨€æ³¨é‡Šäº†ï¼ˆæºç æ³¨é‡Šçš„ï¼Œä¸æ˜¯æˆ‘æ³¨é‡Šçš„~~ï¼‰ï¼Œ è¿™ç›¸å½“äºæ˜¯å‚æ•°çš„åˆæ³•æ€§æ£€æŸ¥ï¼Œ
    // assert isElementIndex(index);

    Node<E> x;
    //  index å°äº sizeçš„ä¸€åŠï¼Œä»å¤´éå†æ›´åŠ çš„ä¾¿æ·
    if (index < (size >> 1)) {
        x = first;
        for (int i = 0; i < index; i++) {
            x = x.next;
        }
    } else {
        // index å¤§äºsizeçš„ä¸€åŠï¼Œä»å°¾éå†æ›´åŠ çš„ä¾¿æ·
        x = last;
        for (int i = size - 1; i > index; i--) {
            x = x.prev;
        }
    }
    return x;
}

```

ä»£ç çš„é€»è¾‘è¿˜æ˜¯æ¯”è¾ƒæ¸…æ™°çš„ï¼Œç›¸ä¿¡å°ä¼™ä¼´ä»ä»£ç çš„æ³¨é‡Šä¸­éƒ½èƒ½çœ‹æ‡‚å…¶é€»è¾‘ï¼Œè¿™é‡Œå°±ä¸è¿‡åº¦çš„å±•å¼€äº†ï¼›å€¼å¾—ä¸€æï¼ˆæ¯”è¾ƒå¥½ç©ï¼‰çš„æ˜¯ ```node(int index)``` æ‰¾åˆ°ä¸‹æ ‡ä¸º ```index``` çš„èŠ‚ç‚¹çš„æ–¹æ³•å®ç°ï¼›é€šè¿‡åˆ¤æ–­ ```index``` æ˜¯å¦å¤§äº ```size``` çš„ä¸€åŠï¼Œæ¥åˆ¤æ–­æ˜¯ä»å¤´éå†è¿˜æ˜¯ä»å°¾éå†ï¼Œå¾ˆç»†èŠ‚ã€‚

### public boolean addAll(Collection<? extends E> c)

```public boolean addAll(Collection<? extends E> c)``` æ–¹æ³•ç»§æ‰¿äº ```AbstractCollection``` æŠ½è±¡ç±»ï¼Œå¾€é›†åˆåé¢æ·»åŠ å¤šä¸ªå…ƒç´ ï¼Œæºç å¦‚ä¸‹ï¼š

```java
/**
    * é¡ºåºæ·»åŠ å¤šä¸ªå…ƒç´ 
    * @param c
    * @return boolean
    */
  @Override
  public boolean addAll(Collection<? extends E> c) {
      // addAll(int index, c) åœ¨æŒ‡å®šindexä½åæ·»åŠ å¤šä¸ªå…ƒç´ 
      return addAll(size, c);
  }
```

è¿™ä¸ªæ–¹æ³•è°ƒç”¨çš„æ˜¯ ```public boolean addAll(int index, Collection<? extends E> c)``` æ¥å®ç°è‡ªå·±çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥çœ‹çœŸæ­£å¹²æ´»çš„æ–¹æ³•å§~~

### public boolean addAll(int index, Collection<? extends E> c)

```public boolean addAll(int index, Collection<? extends E> c)``` æ–¹æ³•ç»§æ‰¿äº ```AbstractSequentialList``` æŠ½è±¡ç±»ï¼Œèµ‹äºˆäº† ```LinkedList``` ç±»ä¼¼ ```ArrayList``` ä¸€èˆ¬ **éšæœº** æ·»åŠ å…ƒç´ çš„èƒ½åŠ›ï¼Œå…·ä½“æºç å¦‚ä¸‹ï¼š

```java
/**
  * åœ¨æŒ‡å®šindexä½æ·»åŠ é›†åˆå…ƒç´ 
  * indexä»0å¼€å§‹ç®—èµ·ï¼Œå¹¶ä¸”indexä½å°±æ˜¯æ–°æ·»åŠ çš„å…ƒç´ äº†
  * å…·ä½“æ­¥éª¤ï¼š
  *  1.å‰ç½®æ“ä½œ----å‚æ•°æ£€æŸ¥ç­‰
  *  2.æ‰¾åˆ°indexä½çš„å‰ç½®èŠ‚ç‚¹prev å’Œ åç½®èŠ‚ç‚¹succ
  *  3.æ„å»ºå­Linké“¾è·¯
  *  4.è¿è´¯åŸæœ‰é“¾è·¯å’Œå­Linké“¾è·¯
  *
  * @param index
  * @param c
  * @return boolean
  */
@Override
public boolean addAll(int index, Collection<? extends E> c) {
    // æ­¥éª¤1ï¼šå„ç§å‚æ•°åˆæ³•æ€§æ£€æŸ¥
    checkPositionIndex(index);

    Object[] a = c.toArray();
    int numNew = a.length;
    // å¦‚æœæ— æ·»åŠ å…ƒç´ ï¼Œç›´æ¥è¿”å›false ä»£è¡¨æœªå˜æ›´
    if (numNew == 0) {
        return false;
    }
    // æ­¥éª¤2ï¼špred ä»£è¡¨index çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ succä»£è¡¨indexçš„åä¸€ä¸ªèŠ‚ç‚¹
    Node<E> pred, succ;
    // indexç­‰äºsizeï¼Œè¯´æ˜æ˜¯å¾€é“¾è¡¨çš„æœ€åæ·»åŠ å…ƒç´ ï¼Œåˆ™indexçš„åä¸€ä¸ªå…ƒç´ succä¸ºç©ºï¼Œindexçš„å‰ä¸€ä¸ªå…ƒç´ ä¸ºlast
    // æ³¨æ„ï¼šè¿™é‡Œçš„indexå…¶å®æ˜¯ä¸€ä¸ªç©ºçš„å€¼ï¼Œå¹¶æ— èŠ‚ç‚¹ï¼›æ‰€ä»¥indexçš„å‰ä¸€ä¸ªèŠ‚ç‚¹prevæ˜¯last
    // å…¶å®è¿™ç®—ä¸€ç§ç‰¹åˆ¤
    if (index == size) {
        succ = null;
        pred = last;
    } else {
        // pred---succ(indexä½)   =======å˜æˆ======>  pred------newNode(indexä½)----succ

        // succæ˜¯indexçš„åä¸€ä¸ªèŠ‚ç‚¹---å› ä¸ºindexä½ç½®å³å°†è¢«æ–°èŠ‚ç‚¹æ‰€å–ä»£ï¼Œæ‰€ä»¥åŸæ¥indexä½ç½®çš„Nodeï¼Œå˜æˆsucc
        succ = node(index);
        // predæ˜¯index çš„å‰ä¸€ä¸ªèŠ‚ç‚¹ï¼Œ
        pred = succ.prev;
    }
    // æ­¥éª¤3ï¼šæ„å»ºå­Linké“¾è·¯
    for (Object o : a) {
        @SuppressWarnings("unchecked") E e = (E) o;
        // predä¸€ç›´åœ¨æ›´æ–°ï¼Œåˆ¶ä½œä¸€ä¸ªå†…éƒ¨é“¾æ¥å¥½çš„å­é“¾è·¯ï¼ˆnewNodeçš„å‰ç½®èŠ‚ç‚¹ä¸ºpredï¼‰
        Node<E> newNode = new Node<>(pred, e, null);
        if (pred == null) {
            // predä¸ºç©ºï¼Œè¯´æ˜æ’å…¥çš„ä½ç½®é€‰æ‹©æ˜¯0ï¼Œé¦–èŠ‚ç‚¹
            first = newNode;
        } else {
            // åŒå‘ç»‘å®š
            pred.next = newNode;
        }
        // æ›´æ–°predæŒ‡é’ˆ
        pred = newNode;
    }

    // æ­¥éª¤4ï¼š è¿è´¯åŸæœ‰é“¾è·¯å’Œå­Linké“¾è·¯ï¼Œä½¿å…¶ä¸²åœ¨ä¸€èµ·
    // succä¸ºindexåçš„ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¦‚æœsuccä¸ºç©ºï¼Œè¯´æ˜æ’å…¥çš„ä½ç½®å°±æ˜¯åœ¨æœ€åé¢ï¼Œåˆ™ç›´æ¥è®¾ç½®lastä¸ºpredï¼ˆpredä¸€ç›´åœ¨æ›´æ–°ï¼‰
    if (succ == null) {
        last = pred;
    } else {
        // åŒå‘é“¾è¡¨ä¹‹åŒå‘ç»‘å®š
        pred.next = succ;
        succ.prev = pred;
    }
    // æ•°é‡æ·»åŠ 
    size += numNew;
    // æ“ä½œæ¬¡æ•°++
    modCount++;
    return true;
}

```

ä»£ç å¯èƒ½ä¼šæœ‰ç‚¹é•¿ï¼Œä½†æ˜¯å®é™…ä¸Šé€»è¾‘ååˆ†æ¸…æ™°ï¼›å¯åˆ†ä¸º4ä¸ªæ­¥éª¤ï¼š

1. å‰ç½®æ“ä½œ--å‚æ•°åˆæ³•æ€§æ£€æŸ¥

2. æ‰¾åˆ° ```index``` ä½çš„å‰ç½®èŠ‚ç‚¹ ```prev``` å’Œåç½®èŠ‚ç‚¹ ```succ```

3. æ„å»ºå­Linké“¾è·¯

4. è¿è´¯åŸæœ‰é“¾è·¯å’Œå­Linké“¾è·¯

è‡³æ­¤ï¼Œ```LinkedList``` çš„æ·»åŠ å…ƒç´ çš„æ–¹æ³•å°±ä»‹ç»å®Œæ¯•äº†ï¼Œ**æœ¬è´¨ä¸Šæ˜¯å¯¹é“¾è¡¨çš„æ–°å¢NodeèŠ‚ç‚¹æ“ä½œ**ã€‚å°ä¼™ä¼´åœ¨é˜…è¯»æºç çš„æ—¶å€™å¯ä»¥è¾¹é˜…è¯»è¾¹ç”»å‡ºç›¸å…³çš„é“¾è¡¨ï¼ŒåŠ æ·±ç†è§£ã€‚

## åˆ é™¤å…ƒç´ 

```LinkedList``` çš„åˆ é™¤å…ƒç´ æ–¹æ³•ä¸»è¦æœ‰2ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼š

- ```public boolean remove(Object o)``` åˆ é™¤**é¦–ä¸ª**æŒ‡å®šå…ƒç´ o

- ```public E remove(int index)``` åˆ é™¤æŒ‡å®š ```index``` ä½çš„å…ƒç´ 

ä¹ä¸€çœ‹ï¼Œ```LinkedList``` ä¼¼ä¹æ²¡æœ‰æ‰¹é‡åˆ é™¤å…ƒç´ çš„æ–¹æ³•ï¼Œæ‰¾é ```LinkedList.java``` ç±»çš„æ‰€æœ‰APIæ–¹æ³•ç¡®å®æ²¡æœ‰æ‰¾åˆ°ç›¸å…³æ‰¹é‡åˆ é™¤çš„æ–¹æ³•ï¼Œä½†å®é™…ä¸Š ```LinkedList``` æ˜¯æœ‰æ‰¹é‡åˆ é™¤çš„åŠŸèƒ½çš„ã€‚ ```LinkedList``` ç»§æ‰¿çš„ ```AbstractSequentialList``` çš„çˆ¶ç±» ```AbstractCollection``` ä¸­æœ‰æä¾›ç›¸å…³çš„APIï¼Œé€šè¿‡è¿­ä»£å™¨çš„æ–¹å¼å®ç°ã€‚

### public boolean remove(Object o)

```public boolean remove(Object o)``` æ–¹æ³•ç»§æ‰¿äº ```AbstractCollection``` æŠ½è±¡ç±»ï¼Œåˆ é™¤é“¾è¡¨ä¸­ **é¦–ä¸ª** æŒ‡å®šå…ƒç´ oï¼Œå…·ä½“æºç å¦‚ä¸‹ï¼š

```java
/**
  * åˆ é™¤é¦–ä¸ªæŒ‡å®šå…ƒç´ o
  * @param o
  * @return boolean
  */
@Override
public boolean remove(Object o) {
    // è¯´æ˜LinkedListæ”¯æŒå­˜æ”¾ null
    if (o == null) {
        // éå† æ‰¾åˆ°éœ€è¦çš„æ•°æ® ç„¶ååˆ é™¤
        for (Node<E> x = first; x != null; x = x.next) {
            if (x.item == null) {
                unlink(x);
                return true;
            }
        }
    } else {
        for (Node<E> x = first; x != null; x = x.next) {
            if (o.equals(x.item)) {
                unlink(x);
                return true;
            }
        }
    }
    return false;
}

/**
  * çœŸå®æ‰§è¡Œåˆ é™¤æ“ä½œï¼Œå¹¶è¿”å›è¢«åˆ é™¤å…ƒç´ å€¼
  * åšæ³•ï¼šå°†è¯¥èŠ‚ç‚¹ä»é“¾è·¯ä¸Šå‰”é™¤ï¼Œå¹¶ä¸”ä¹‹èŠ‚ç‚¹ç½®nullï¼ˆæ–¹ä¾¿GCï¼‰
  * @param x
  * @return E
  */
E unlink(Node<E> x) {
    // ä¸å¤ªçŸ¥é“ä¸ºå•¥å­æ³¨é‡Šæ‰äº† å‚æ•°ä¸åšéç©ºåˆ¤æ–­å—ï¼Ÿ
//         assert x != null;

    // element èŠ‚ç‚¹çš„å…ƒç´ 
    final E element = x.item;
    // åä¸€ä¸ªèŠ‚ç‚¹
    final Node<E> next = x.next;
    // å‰ä¸€ä¸ªèŠ‚ç‚¹
    final Node<E> prev = x.prev;

    // å¦‚æœå‰ç½®èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜åˆ é™¤çš„èŠ‚ç‚¹æ˜¯é¦–èŠ‚ç‚¹ï¼ŒfirstæŒ‡å‘next
    if (prev == null) {
        first = next;
    } else {
        // prev ---- x --- next  ====å˜æˆ====>  prev ----- next

        prev.next = next;
        // x.prev è®¾ç½®ä¸ºnullï¼Œæ–­å¼€ä¸åŸæœ‰é“¾è·¯çš„å…³è”ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ä¸ºäº†GC
        x.prev = null;
    }

    // å¦‚æœåç½®èŠ‚ç‚¹ä¸ºç©ºï¼Œè¯´æ˜åˆ é™¤çš„èŠ‚ç‚¹æ˜¯å°¾èŠ‚ç‚¹ï¼Œ lastç›´æ¥æŒ‡å‘prev
    if (next == null) {
        last = prev;
    } else {
        // æœ¬æ¥next.prevæŒ‡å‘äº† xï¼Œä½†æ˜¯xè¦è¢«åˆ é™¤ï¼Œæ‰€ä»¥next.prevéœ€è¦æŒ‡å‘ xçš„å‰ä¸€ä¸ªèŠ‚ç‚¹ ä¹Ÿå³æ˜¯prev
        next.prev = prev;
        // x.nextè®¾ç½®ä¸ºnullï¼Œæ–­å¼€ä¸åŸæœ‰é“¾è·¯çš„å…³è”ï¼ŒåŒæ—¶ä¸ºäº†GC
        x.next = null;
    }

    // for GC
    x.item = null;
    size--;
    modCount++;
    // è¿”å›element
    return element;
}
```

ä»ä»£ç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒçœŸå®åšåˆ é™¤æ“ä½œçš„æ–¹æ³•æ˜¯ ```unlink(Node<E> x)```ï¼Œå…¶ä»£ç ä¸éš¾ç†è§£ï¼Œå°ä¼™ä¼´ä»¬å¯ä»¥çœ‹çœ‹æ³¨é‡Šæ¥ç†è§£ã€‚

### public E remove(int index)

```public E remove(int index)``` æ–¹æ³•ç»§æ‰¿ ```AbstractSequentialList```ï¼Œç”¨ä»¥èµ‹èƒ½åƒæ•°ç»„èˆ¬çš„ **éšæœº** æ“ä½œçš„èƒ½åŠ›ï¼Œå…·ä½“æºç å¦‚ä¸‹ï¼š

```java
/**
  * åˆ é™¤æŒ‡å®šindexä½ç½®çš„å…ƒç´ 
  * @param index
  * @return E
  */
@Override
public E remove(int index) {
    // indexå‚æ•°åˆæ³•æ€§æ£€æŸ¥
    checkElementIndex(index);
    return unlink(node(index));
}
```

å¯ä»¥çœ‹å‡ºï¼Œå…¶å®ç°æ–¹å¼æ˜¯å…ˆæ‰¾åˆ° ```index``` ä½ç½®èŠ‚ç‚¹çš„å…ƒç´ ï¼Œç„¶åè°ƒç”¨ ```unlink(Node e)``` æ–¹æ³•ï¼›è¿™ä¸¤ä¸ªæ–¹æ³•åœ¨ä¸Šé¢éƒ½æœ‰è¿‡æ¯”è¾ƒè¯¦ç»†çš„ä»‹ç»ï¼Œè¿™é‡Œå°±ä¸åšè¿‡å¤šçš„èµ˜è¿°ã€‚

## æŸ¥æ‰¾å…ƒç´ 

```LinkedList``` ä¸­æŸ¥æ‰¾å…ƒç´ çš„æ–¹æ³•æœ‰2ä¸ªï¼Œåˆ†åˆ«ä¸ºï¼š

- ```public int indexOf(Object o)``` æ–¹æ³•ï¼ŒæŸ¥æ‰¾**é¦–ä¸ª**ä¸ºæŒ‡å®šå…ƒç´  o çš„ä½ç½®

- ```public int lastIndexOf(Obejct o )``` æ–¹æ³•ï¼ŒæŸ¥æ‰¾**æœ€åä¸€ä¸ª**ä¸ºæŒ‡å®šå…ƒç´  o çš„ä½ç½®

ä¸¤ä¸ªæ–¹æ³•çš„æºç éƒ½å¾ˆç®€å•ï¼Œä¸¤è€…çš„å·®åˆ«åœ¨äºä¸€ä¸ªæ˜¯ä»å¤´éå†ï¼Œä¸€ä¸ªæ˜¯ä»å°¾éå†ï¼ˆå› ä¸º```LinkedList``` åº•å±‚å®ç°æ˜¯åŒå‘é“¾è¡¨ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å®ç°è¿™ç‚¹ï¼‰ï¼›å…·ä½“æºä»£ç å¦‚ä¸‹ï¼š

```java
/**
  * æŸ¥æ‰¾é¦–ä¸ªä¸ºæŒ‡å®šå…ƒç´  o çš„ä½ç½®
  * @param o
  * @return int å¦‚æœä¸å­˜åœ¨åˆ™è¿”å›-1
  */
@Override
public int indexOf(Object o) {
    int index = 0;
    // å¯ä»¥çœ‹å‡ºï¼šLinkedListä¹Ÿæ˜¯æ”¯æŒå­˜å‚¨nullå€¼çš„
    if (o == null) {
        // éå†é“¾è¡¨
        for (Node<E> x = first; x != null; x = x.next) {
            if (x.item == null)
                return index;
            index++;
        }
    } else {
        for (Node<E> x = first; x != null; x = x.next) {
            if (o.equals(x.item))
                return index;
            index++;
        }
    }
    return -1;
}


/**
  * æŸ¥æ‰¾æœ€åä¸€ä¸ªä¸ºæŒ‡å®šå…ƒç´  o ä¸‹æ ‡
  * é€†åºéå†é“¾è¡¨å®ç°
  * @param o
  * @return int å­˜åœ¨åˆ™è¿”å›å¯¹åº”index ä¸å­˜åœ¨åˆ™è¿”å›-1
  */
@Override
public int lastIndexOf(Object o) {
    int index = size;
    if (o == null) {
        for (Node<E> x = last; x != null; x = x.prev) {
            index--;
            if (x.item == null)
                return index;
        }
    } else {
        for (Node<E> x = last; x != null; x = x.prev) {
            index--;
            if (o.equals(x.item))
                return index;
        }
    }
    return -1;
}
```

ä»æºç ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œ```LinkedList``` æ˜¯æ”¯æŒå­˜å‚¨ ```null``` å€¼ã€‚

## è½¬æ¢æˆæ•°ç»„

```LinkedList``` çš„è½¬æ¢æˆæ•°ç»„çš„æ–¹æ³•å’Œ ```ArrayList``` ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥è½¬æ¢æˆæ•°ç»„ï¼Œå…·ä½“çš„æ–¹æ³•å¦‚ä¸‹ï¼š

- ```public Object[] toArray()``` å°† ```LinkedList``` è½¬æ¢ä¸º ```Object[]``` æ•°ç»„

- ```public <T> T[] toArray(T[] a)``` å°† ```LinkedList``` è½¬æ¢ä¸ºæŒ‡å®š ```T``` æ³›å‹çš„æ•°ç»„

æºç å¦‚ä¸‹ï¼š

```java
/**
  * è½¬æ¢æˆæ•°ç»„
  * @return Object[]
  */
public Object[] toArray() {
    // éå†é“¾è¡¨ï¼Œè·å–å€¼ æ³¨æ„ï¼šè¿”å›å€¼ç±»å‹æ˜¯Object[]
    Object[] result = new Object[size];
    int i = 0;
    for (Node<E> x = first; x != null; x = x.next)
        result[i++] = x.item;
    return result;
}


/**
  * è½¬åŒ–æˆæ•°ç»„ï¼ˆå¯æŒ‡å®šè¿”å›æ³›å‹ï¼‰
  * @param a
  * @return T[]
  */
@SuppressWarnings("unchecked")
public <T> T[] toArray(T[] a) {
    // å¦‚æœä¼ å…¥çš„æ•°ç»„å°äºsizeçš„é•¿åº¦ï¼Œç›´æ¥å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„è¿”å›
    if (a.length < size)
        a = (T[])java.lang.reflect.Array.newInstance(
                a.getClass().getComponentType(), size);
    // é¡ºåºéå†é“¾è¡¨ï¼Œå¤åˆ¶åˆ°aä¸­
    int i = 0;
    Object[] result = a;
    for (Node<E> x = first; x != null; x = x.next) {
        result[i++] = x.item;
    }

    if (a.length > size) {
        a[size] = null;
    }

    return a;
}
```

éœ€è¦å…³æ³¨çš„ç‚¹å’Œ ```ArrayList``` ä¸€æ ·ï¼Œå¦‚æœå¸Œæœ›è¿”å›æŒ‡å®šç±»å‹çš„æ•°ç»„ï¼Œåˆ™åº”è¯¥ä½¿ç”¨ ```#toArray(T[] a)``` æ–¹æ³•ã€‚

## å…¶ä»–å¸¸è§æ–¹æ³•

å…¶ä»–æ¯”è¾ƒå¸¸è§çš„æ–¹æ³•ï¼Œæ¯”å¦‚åˆ¤æ–­é›†åˆä¸­æ˜¯å¦åŒ…å«æŸä¸ªå…ƒç´  ```contains(Object o)``` æ–¹æ³•ã€è·å–æŒ‡å®šä½ç½®çš„å…ƒç´  ```get(int index)``` ã€è®¾ç½®æŒ‡å®šä½ç½®çš„å…ƒç´  ```set(int index, E element)```ã€æ¸…ç©ºæ•°ç»„ ```clear()```ã€è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£ä½†æ˜¯ä¸å’‹å¸¸ç”¨çš„æ–¹æ³•â€”â€”åˆ›å»ºå­æ•°ç»„ ```subList(int fromIndex, int toIndex)```

ç”±äºæ¯”è¾ƒç®€å•ï¼Œä¸€æ¬¡æ€§ä¸Šï¼ˆå¶é—®é™„ä½“ï¼šæˆ‘è¦ä¸€ä¸ªæ‰“åä¸ªï¼ï¼ï¼ï¼‰

```java
/**
  * åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨
  * ä¾èµ–indexOfæ–¹æ³•
  */
@Override
public boolean contains(Object o) {
    return indexOf(o) != -1;
}


/**
  * è·å–æŒ‡å®šindexä½ç½®çš„å…ƒç´ 
  * @param index
  * @return E
  */
@Override
public E get(int index) {
    // indexå‚æ•°åˆæ³•æ€§æ£€æŸ¥
    checkElementIndex(index);
    // ç›´æ¥è¿”å›~
    return node(index).item;
}

/**
  * è®¾ç½®æŒ‡å®šä½ç½®indexä½ç½®å…ƒç´ elementï¼Œå¹¶è¿”å›æ—§å€¼
  * @param index
  * @param element
  * @return E
  */
public E set(int index, E element) {
    // indexå‚æ•°åˆæ³•æ€§æ£€æŸ¥
    checkElementIndex(index);
    // è·å–nodeèŠ‚ç‚¹
    Node<E> x = node(index);
    // æ›¿æ¢æ—§å€¼
    E oldVal = x.item;
    x.item = element;
    // è¿”å›æ—§å€¼
    return oldVal;
}


/**
  * æ¸…ç©ºé›†åˆ
  */
@Override
public void clear() {
    // é¡ºåºéå†é“¾è¡¨ï¼Œè®¾ç½®æ¯ä¸ªèŠ‚ç‚¹å‰åéƒ½æŒ‡å‘null é€šè¿‡è¿™ç§æ–¹å¼ å¸®åŠ©GC
    for (Node<E> x = first; x != null; ) {
        Node<E> next = x.next;
        x.item = null;
        x.next = null;
        x.prev = null;
        x = next;
    }
    first = last = null;
    size = 0;
    modCount++;
}

// AbstractList.java

/**
  * [fromIndex, toIndex)
  * æ ¹æ®åˆ¤æ–­ RandomAccess æ¥å£ï¼Œåˆ¤æ–­æ˜¯å¦æ”¯æŒéšæœºè®¿é—®ï¼Œä»è€Œåˆ›å»º RandomAccessSubList æˆ– SubList å¯¹è±¡
  * åˆ›å»ºå­Listï¼ˆæ³¨æ„ï¼šå’Œçˆ¶Listå…±äº«åŒä¸€ä»½æ•°æ®ï¼Œä¹Ÿå³æ˜¯å­Listçš„ä¿®æ”¹ä¼šå½±å“åˆ°çˆ¶Listï¼‰
  * @param fromIndex å¯è¾¾
  * @param toIndex ä¸å¯è¾¾
  */
public List<E> subList(int fromIndex, int toIndex) {
    subListRangeCheck(fromIndex, toIndex, size());
    // æ ¹æ®åˆ¤æ–­ RandomAccess æ¥å£ï¼Œåˆ¤æ–­æ˜¯å¦æ”¯æŒéšæœºè®¿é—®
    return (this instanceof RandomAccess ?
            new RandomAccessSubList<>(this, fromIndex, toIndex) :
            new SubList<>(this, fromIndex, toIndex));
}
```

## LinkedListå®ç°æ ˆã€é˜Ÿåˆ—ã€åŒç«¯é˜Ÿåˆ—åˆ†æ

ä» ```LinkedList``` çš„ç±»å›¾æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼Œ```LinkedList``` å®ç°äº† ```Deque``` åŒç«¯é˜Ÿåˆ—æ¥å£ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹```Deque``` çš„ç±»å›¾ï¼Œæ°æ‰¯æ°æ‰¯ã€‚

![å›¾1-4 Dequeç±»å›¾](https://img-blog.csdnimg.cn/2020111819124726.png#pic_center)

ä»ç±»å›¾æ¥çœ‹ï¼Œ```Deque``` æ¥å£ç»§æ‰¿äº ```Queue``` æ¥å£ï¼Œæ‰€ä»¥ ```LinkedList``` æ‹¥æœ‰é˜Ÿåˆ—ã€åŒç«¯é˜Ÿåˆ—çš„ç‰¹æ€§ï¼›å…¶æ¬¡JAVAä¸­æœ‰ä¸€ä¸ªè¿‡æ—¶ç±» ```Stack```ä»£è¡¨æ ˆï¼ŒJAVAä¸­å¹¶æ²¡æœ‰å•ç‹¬çš„æ ˆæ¥å£ï¼Œä½†æ˜¯æ ˆç›¸å…³çš„æ–¹æ³•åŒ…æ‹¬åœ¨äº† ```Deque``` æ¥å£ä¸­ï¼Œå› æ­¤ ```LinkedList``` åŒæ—¶ä¹Ÿæ‹¥æœ‰æ ˆçš„ç‰¹æ€§ã€‚

![å›¾ 1-5 LinkedListçš„ç‰¹æ®ŠåŠŸèƒ½](https://img-blog.csdnimg.cn/20201118194521462.png?x-oss-process=image)

### åŒç«¯é˜Ÿåˆ—æ–¹æ³•

```java
/**
  * =======================================åŒç«¯é˜Ÿåˆ—==============================
  */

/**
  * å¾€åŒç«¯é˜Ÿåˆ— å‰ç«¯æ·»åŠ å…ƒç´ 
  */
@Override
public void addFirst(E e) {
    linkFirst(e);
}

/**
  * åŒç«¯é˜Ÿåˆ— æœ«å°¾æ·»åŠ å…ƒç´ 
  */
@Override
public void addLast(E e) {
    linkLast(e);
}

/**
  * åŒç«¯é˜Ÿåˆ—å‰ç«¯æ·»åŠ å…ƒç´ 
  */
@Override
public boolean offerFirst(E e) {
    addFirst(e);
    return true;
}

/**
  * åŒç«¯é˜Ÿåˆ— æœ«å°¾ç«¯æ·»åŠ å…ƒç´ 
  */
@Override
public boolean offerLast(E e) {
    addLast(e);
    return true;
}

/**
  * åŒç«¯é˜Ÿåˆ— å‰ç«¯ç§»é™¤é¦–ä¸ªå…ƒç´ 
  */
@Override
public E removeFirst() {
    final Node<E> f = first;
    if (f == null)
        throw new NoSuchElementException();
    return unlinkFirst(f);
}

/**
  * åŒç«¯é˜Ÿåˆ— æœ«å°¾ç«¯ ç§»é™¤é¦–ä¸ªå…ƒç´ 
  */
@Override
public E removeLast() {
    final Node<E> l = last;
    if (l == null)
        throw new NoSuchElementException();
    return unlinkLast(l);
}

/**
  * åŒç«¯é˜Ÿåˆ—  å‰ç«¯ å¼¹å‡ºé¦–ä¸ªå…ƒç´ 
  */
@Override
public E pollFirst() {
    final Node<E> f = first;
    return (f == null) ? null : unlinkFirst(f);
}

/**
  * åŒç«¯é˜Ÿåˆ—  æœ«å°¾ç«¯ å¼¹å‡ºé¦–ä¸ªå…ƒç´ 
  */
@Override
public E pollLast() {
    final Node<E> l = last;
    return (l == null) ? null : unlinkLast(l);
}

/**
  * åŒç«¯é˜Ÿåˆ— è·å–é¦–ç«¯ é¦–ä¸ªå…ƒç´ 
  */
@Override
public E getFirst() {
    final Node<E> f = first;
    if (f == null)
        throw new NoSuchElementException();
    return f.item;
}

/**
  * åŒç«¯é˜Ÿåˆ— è·å–æœ«å°¾ç«¯ é¦–ä¸ªå…ƒç´ 
  */
@Override
public E getLast() {
    final Node<E> l = last;
    if (l == null)
        throw new NoSuchElementException();
    return l.item;
}

@Override
public E peekFirst() {
    final Node<E> f = first;
    return (f == null) ? null : f.item;
}

@Override
public E peekLast() {
    final Node<E> l = last;
    return (l == null) ? null : l.item;
}


@Override
public boolean removeFirstOccurrence(Object o) {
    return remove(o);
}

@Override
public boolean removeLastOccurrence(Object o) {
    if (o == null) {
        for (Node<E> x = last; x != null; x = x.prev) {
            if (x.item == null) {
                unlink(x);
                return true;
            }
        }
    } else {
        for (Node<E> x = last; x != null; x = x.prev) {
            if (o.equals(x.item)) {
                unlink(x);
                return true;
            }
        }
    }
    return false;
}
```

ä»£ç éƒ½æ¯”è¾ƒçš„ç®€å•ï¼Œä¸éœ€è¦è¿‡å¤šçš„è¯´æ˜ï¼Œå°ä¼™ä¼´çœ‹çœ‹å°±è¡Œã€‚

### é˜Ÿåˆ—æ–¹æ³•

```java
/**
  * ==================================é˜Ÿåˆ—æ–¹æ³•========================================
  */

@Override
public boolean add(E e) {
    // é¡ºåºæ·»åŠ å•ä¸ªå…ƒç´ åˆ°é“¾è¡¨çš„æœ«å°¾
    linkLast(e);
    return true;
}

@Override
public boolean offer(E e) {
    return add(e);
}

@Override
public E remove() {
    // ç§»é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼ŒDequeæ¥å£çš„æ–¹æ³•
    return removeFirst();
}

@Override
public E poll() {
    final Node<E> f = first;
    return (f == null) ? null : unlinkFirst(f);
}

@Override
public E element() {
    return getFirst();
}

@Override
public E peek() {
    final Node<E> f = first;
    return (f == null) ? null : f.item;
}
```

### æ ˆæ–¹æ³•

```java
/**
  * ==================================æ ˆæ–¹æ³•========================================
  */
@Override
public E peek() {
    final Node<E> f = first;
    return (f == null) ? null : f.item;
}


@Override
public void push(E e) {
    addFirst(e);
}

@Override
public E pop() {
    return removeFirst();
}
```

## éå†æ–¹å¼æ¢è®¨

```LinkedList``` æ”¯æŒå¦‚ä¸‹å‡ ç§éå†æ–¹å¼ï¼Œä¸‹é¢é€ä¸ªè®¨è®ºï¼š

- é€šè¿‡ ```Iterator``` è¿­ä»£å™¨éå†

```java
Integer value = null;
Iterator it = list.iterator();
while (it.hasNext()) {
    value = (Integer)it.next();
}
```

- é€šè¿‡ **å¿«é€Ÿéšæœºè®¿é—®** éå† **ï¼ˆæ³¨æ„ï¼šå¹¶ä¸å»ºè®®é‡‡ç”¨è¿™ç§æ–¹å¼éå†ï¼‰**

```java
Integer value = null;
int size = list.size();
for (int i = 0; i < size; i++) {
    value = (Integer)list.get(i);
}
```

- é€šè¿‡ **forå¾ªç¯** éå†

```java

Integer value = null;
for (Integer integ : list) {
    value = integ;
}
```

å…¶å®ç»è¿‡æˆ‘ä»¬ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬éƒ½åº”è¯¥æ˜ç™½ï¼š**ä¸åº”è¯¥ä½¿ç”¨éšæœºè®¿é—®çš„æ–¹å¼å»éå† LinkedList**ï¼Œå› ä¸ºå…¶åº•å±‚å®ç°ä¸Šé‡‡ç”¨çš„æ˜¯ **åŒå‘é“¾è¡¨**ï¼Œå³ä½¿æä¾›äº†ç±»ä¼¼æ•°ç»„èˆ¬éšæœºè®¿é—®çš„APIï¼Œå®é™…ä¸Šè¿˜æ˜¯é€šè¿‡æŒ¨ä¸ªèŠ‚ç‚¹æŒ¨ä¸ªèŠ‚ç‚¹éå†æ¥è¾¾åˆ°éšæœºè®¿é—®çš„æ•ˆæœçš„ï¼ˆå…·ä½“å¯çœ‹çœ‹ä¸Šé¢çš„```get(int index)``` æ–¹æ³•æºç è§£æï¼‰ï¼›å®˜æ–¹æ›´æ¨èä½¿ç”¨é¡ºåºè®¿é—®ï¼Œä¹Ÿå³æ˜¯é€šè¿‡è¿­ä»£å™¨æˆ–è€… **forå¾ªç¯** çš„æ–¹å¼æ¥éå†ã€‚

## æ€»ç»“

æœ¬æ–‡ä¸»è¦ä»æºç å±‚é¢è®²è§£äº† ```LinkedList``` çš„å®ç°æ–¹å¼ï¼Œ```LinkedList``` åº•å±‚æ˜¯åŸºäºèŠ‚ç‚¹å®ç°çš„åŒå‘é“¾è¡¨ï¼›æ˜¯ä¸€ä¸ªç›´çº¿å‹çš„é“¾è¡¨ç»“æ„ã€‚

```LinkedList``` åªæœ‰ 3 ä¸ªå±æ€§ï¼Œåˆ†åˆ«æ˜¯ä»£è¡¨å¤´èŠ‚ç‚¹çš„ ```first``` ã€ä»£è¡¨å°¾èŠ‚ç‚¹çš„ ```last``` ä»¥åŠè¡¨ç¤ºæ•°é‡çš„ ```size```ã€‚

```LinkedList``` æœ‰ 2 ä¸ªæ„é€ æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯æ— å‚çš„æ„é€ æ–¹æ³• ```LinkedList()``` å’ŒæŒ‡å®šå…ƒç´ é›†çš„æ„é€ æ–¹æ³• ```LinkedList(Collection<? extends E> c)```ï¼Œå› ä¸ºå…¶åº•å±‚å®ç°ä¸Šé‡‡ç”¨çš„æ˜¯åŒå‘é“¾è¡¨ï¼Œå› æ­¤å®ƒå¹¶æ²¡æœ‰åƒ ```ArrayList``` æŒ‡å®šåˆå§‹åŒ–å®¹é‡çš„æ„é€ æ–¹æ³•ï¼Œä¹Ÿæ²¡æœ‰éœ€è¦æ‰©å®¹çš„æ“ä½œï¼›æ¯æ¬¡æ–°å¢å…ƒç´ ç›´æ¥ ```new``` ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹æ’å…¥åˆ°åŒå‘é“¾è¡¨ä¸­å³å¯ã€‚

- ```LinkedList``` çš„æ–°å¢å…ƒç´ å’Œåˆ é™¤å…ƒç´ æ“ä½œéƒ½æ˜¯ä¸€äº›é“¾è¡¨æ“ä½œï¼Œç†è§£èµ·æ¥ç›¸å¯¹æ¯”è¾ƒçš„ç®€å•ï¼›å¦å¤–ç”±äº ```LinkedList``` ç»§æ‰¿äº† ```AbstactSequentialList```æŠ½è±¡ç±»ï¼Œå› æ­¤è¢«èµ‹äºˆäº†ç±»ä¼¼æ•°ç»„èˆ¬çš„**éšæœºè®¿é—®/æ“ä½œ**çš„èƒ½åŠ›ï¼ˆå®é™…ä¸Šè¿˜æ˜¯é€šè¿‡é€ä¸ªéå†çš„æ–¹å¼å®ç°çš„ï¼‰ã€‚

- å› ä¸º ```LinkedList``` æ˜¯åŸºäºèŠ‚ç‚¹å®ç°çš„ï¼Œæ•…è€Œæœ‰ä¸€å®šçš„èµ„æºæ¶ˆè€—ï¼ˆå‰åæŒ‡é’ˆï¼‰ï¼Œä½†æ˜¯å¦‚æœå­˜å‚¨çš„å…ƒç´ ï¼ˆå¯¹è±¡ï¼‰```element```è¶³å¤Ÿå¤§çš„è¯ï¼Œé‚£ä¹ˆè¿™ç‚¹å¼€é”€å¯å¿½ç•¥ä¸è®°çš„ã€‚

- æœ€åéœ€è¦ç•™æ„çš„æ˜¯ï¼Œæˆ‘ä»¬åœ¨åˆ†ææºç çš„æ—¶å€™ï¼Œæ˜¯å‘ç° ```LinkedList``` æ˜¯æ”¯æŒå­˜å‚¨ ```null``` çš„ã€‚

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![å…¬ä¼—å·äºŒç»´ç ](https://img-blog.csdnimg.cn/20201121225359995.png)


