> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

-----

## 1. çœ‹çœ‹æºç 

å¤§å®¶éƒ½çŸ¥é“ï¼Œ String è¢«å£°æ˜ä¸º finalï¼Œå› æ­¤å®ƒä¸å¯è¢«ç»§æ‰¿ã€‚(Integer ç­‰åŒ…è£…ç±»ä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ï¼‰ã€‚æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ String çš„æºç ã€‚

åœ¨ Java 8 ä¸­ï¼ŒString å†…éƒ¨ä½¿ç”¨ char æ•°ç»„å­˜å‚¨æ•°æ®ã€‚
```java
public final class String
    implements java.io.Serializable, Comparable<String>, CharSequence {
    /** The value is used for character storage. */
    private final char value[];
}
```

åœ¨ Java 9 ä¹‹åï¼ŒString ç±»çš„å®ç°æ”¹ç”¨ byte æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä½¿ç”¨ coder æ¥æ ‡è¯†ä½¿ç”¨äº†å“ªç§ç¼–ç ã€‚

```java
public final class String
    implements java.io.Serializable, Comparable<String>, CharSequence {
    /** The value is used for character storage. */
    private final byte[] value;

    /** The identifier of the encoding used to encode the bytes in {@code value}. */
    private final byte coder;
}
```
value æ•°ç»„è¢«å£°æ˜ä¸º finalï¼Œè¿™æ„å‘³ç€ value æ•°ç»„åˆå§‹åŒ–ä¹‹åå°±ä¸èƒ½å†å¼•ç”¨å…¶å®ƒæ•°ç»„ã€‚å¹¶ä¸” String å†…éƒ¨æ²¡æœ‰æ”¹å˜ value æ•°ç»„çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ä¿è¯ String ä¸å¯å˜ã€‚

## 2.  ä¸å¯å˜æœ‰ä»€ä¹ˆå¥½å¤„å‘¢

### 2.1 å¯ä»¥ç¼“å­˜ hash å€¼

å› ä¸º String çš„ hash å€¼ç»å¸¸è¢«ä½¿ç”¨ï¼Œä¾‹å¦‚ String ç”¨åš HashMap çš„ keyã€‚ä¸å¯å˜çš„ç‰¹æ€§å¯ä»¥ä½¿å¾— hash å€¼ä¹Ÿä¸å¯å˜ï¼Œå› æ­¤åªéœ€è¦è¿›è¡Œä¸€æ¬¡è®¡ç®—ã€‚

### 2.2 String Pool çš„ä½¿ç”¨

å¦‚æœä¸€ä¸ª String å¯¹è±¡å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¼šä» String Pool ä¸­å–å¾—å¼•ç”¨ã€‚åªæœ‰ String æ˜¯ä¸å¯å˜çš„ï¼Œæ‰å¯èƒ½ä½¿ç”¨ String Poolã€‚

### 2.3 å®‰å…¨æ€§

String ç»å¸¸ä½œä¸ºå‚æ•°ï¼ŒString ä¸å¯å˜æ€§å¯ä»¥ä¿è¯å‚æ•°ä¸å¯å˜ã€‚ä¾‹å¦‚åœ¨ä½œä¸ºç½‘ç»œè¿æ¥å‚æ•°çš„æƒ…å†µä¸‹å¦‚æœ String æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œè¿æ¥è¿‡ç¨‹ä¸­ï¼ŒString è¢«æ”¹å˜ï¼Œæ”¹å˜ String çš„é‚£ä¸€æ–¹ä»¥ä¸ºç°åœ¨è¿æ¥çš„æ˜¯å…¶å®ƒä¸»æœºï¼Œè€Œå®é™…æƒ…å†µå´ä¸ä¸€å®šæ˜¯ã€‚

### 2.4 çº¿ç¨‹å®‰å…¨

String ä¸å¯å˜æ€§å¤©ç”Ÿå…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å®‰å…¨åœ°ä½¿ç”¨ã€‚

## 3. å†æ¥æ·±å…¥äº†è§£ä¸€ä¸‹ String

### 3.1 "+" è¿æ¥ç¬¦

å­—ç¬¦ä¸²å¯¹è±¡å¯ä»¥ä½¿ç”¨â€œ+â€è¿æ¥å…¶ä»–å¯¹è±¡ï¼Œå…¶ä¸­å­—ç¬¦ä¸²è¿æ¥æ˜¯é€šè¿‡ StringBuilderï¼ˆæˆ– StringBufferï¼‰ç±»åŠå…¶ append æ–¹æ³•å®ç°çš„ï¼Œå¯¹è±¡è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ˜¯é€šè¿‡ toString æ–¹æ³•å®ç°çš„ã€‚å¯ä»¥é€šè¿‡åç¼–è¯‘éªŒè¯ä¸€ä¸‹ï¼š
```java
/**
 * æµ‹è¯•ä»£ç 
 */
public class Test {
    public static void main(String[] args) {
        int i = 10;
        String s = "abc";
        System.out.println(s + i);
    }
}

/**
 * åç¼–è¯‘å
 */
public class Test {
    public static void main(String args[]) {    //åˆ é™¤äº†é»˜è®¤æ„é€ å‡½æ•°å’Œå­—èŠ‚ç 
        byte byte0 = 10;      
        String s = "abc";      
        System.out.println((new StringBuilder()).append(s).append(byte0).toString());
    }
}

```
ç”±ä¸Šå¯ä»¥çœ‹å‡ºï¼ŒJavaä¸­ä½¿ç”¨"+"è¿æ¥å­—ç¬¦ä¸²å¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªStringBuilder()å¯¹è±¡ï¼Œå¹¶è°ƒç”¨append()æ–¹æ³•å°†æ•°æ®æ‹¼æ¥ï¼Œæœ€åè°ƒç”¨toString()æ–¹æ³•è¿”å›æ‹¼æ¥å¥½çš„å­—ç¬¦ä¸²ã€‚é‚£è¿™ä¸ª "+" çš„æ•ˆç‡æ€ä¹ˆæ ·å‘¢ï¼Ÿ

### 3.2 â€œ+â€è¿æ¥ç¬¦çš„æ•ˆç‡

ä½¿ç”¨â€œ+â€è¿æ¥ç¬¦æ—¶ï¼ŒJVMä¼šéšå¼åˆ›å»ºStringBuilderå¯¹è±¡ï¼Œè¿™ç§æ–¹å¼åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹å¹¶ä¸ä¼šé€ æˆæ•ˆç‡çš„æŸå¤±ï¼Œä¸è¿‡åœ¨è¿›è¡Œå¤§é‡å¾ªç¯æ‹¼æ¥å­—ç¬¦ä¸²æ—¶åˆ™éœ€è¦æ³¨æ„ã€‚æ¯”å¦‚ï¼š

```java
String s = "abc";
for (int i=0; i<10000; i++) {
    s += "abc";
}
```
è¿™æ ·ç”±äºå¤§é‡StringBuilderåˆ›å»ºåœ¨å †å†…å­˜ä¸­ï¼Œè‚¯å®šä¼šé€ æˆæ•ˆç‡çš„æŸå¤±ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹å»ºè®®åœ¨å¾ªç¯ä½“å¤–åˆ›å»ºä¸€ä¸ªStringBuilderå¯¹è±¡è°ƒç”¨append()æ–¹æ³•æ‰‹åŠ¨æ‹¼æ¥ï¼ˆå¦‚ä¸Šé¢ä¾‹å­å¦‚æœä½¿ç”¨æ‰‹åŠ¨æ‹¼æ¥è¿è¡Œæ—¶é—´å°†ç¼©å°åˆ°1/200å·¦å³ï¼‰ã€‚

ä¸æ­¤ä¹‹å¤–è¿˜æœ‰ä¸€ç§ç‰¹æ®Šæƒ…å†µï¼Œä¹Ÿå°±æ˜¯å½“"+"ä¸¤ç«¯å‡ä¸ºç¼–è¯‘æœŸç¡®å®šçš„å­—ç¬¦ä¸²å¸¸é‡æ—¶ï¼Œç¼–è¯‘å™¨ä¼šè¿›è¡Œç›¸åº”çš„ä¼˜åŒ–ï¼Œç›´æ¥å°†ä¸¤ä¸ªå­—ç¬¦ä¸²å¸¸é‡æ‹¼æ¥å¥½ï¼Œä¾‹å¦‚ï¼š
```java
System.out.println("Hello" + "World");

/**
 * åç¼–è¯‘å
 */
System.out.println("HelloWorld");
```

## 4. å­—ç¬¦ä¸²å¸¸é‡

JVMä¸ºäº†æé«˜æ€§èƒ½å’Œå‡å°‘å†…å­˜çš„å¼€é”€ï¼Œåœ¨å®ä¾‹åŒ–å­—ç¬¦ä¸²çš„æ—¶å€™è¿›è¡Œäº†ä¸€äº›ä¼˜åŒ–ï¼šä½¿ç”¨å­—ç¬¦ä¸²å¸¸é‡æ± ã€‚æ¯å½“åˆ›å»ºå­—ç¬¦ä¸²å¸¸é‡æ—¶ï¼ŒJVMä¼šé¦–å…ˆæ£€æŸ¥å­—ç¬¦ä¸²å¸¸é‡æ± ï¼Œå¦‚æœè¯¥å­—ç¬¦ä¸²å·²ç»å­˜åœ¨å¸¸é‡æ± ä¸­ï¼Œé‚£ä¹ˆå°±ç›´æ¥è¿”å›å¸¸é‡æ± ä¸­çš„å®ä¾‹å¼•ç”¨ã€‚å¦‚æœå­—ç¬¦ä¸²ä¸å­˜åœ¨å¸¸é‡æ± ä¸­ï¼Œå°±ä¼šå®ä¾‹åŒ–è¯¥å­—ç¬¦ä¸²å¹¶ä¸”å°†å…¶æ”¾åˆ°å¸¸é‡æ± ä¸­ã€‚ç”±äºStringå­—ç¬¦ä¸²çš„ä¸å¯å˜æ€§ï¼Œ**å¸¸é‡æ± ä¸­ä¸€å®šä¸å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„å­—ç¬¦ä¸²**ã€‚

![](https://img-blog.csdnimg.cn/20200609003544858.png)

æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­ï¼š

```java
/**
 * è¿è¡Œç»“æœä¸ºtrue false
 */
String s1 = "abc";
String s2 = "abc";
String s3 = new String("abc");
System.out.println(s1 == s2);
System.out.println(s1 == s3);
```
ç”±äºå¸¸é‡æ± ä¸­ä¸å­˜åœ¨ä¸¤ä¸ªç›¸åŒçš„å¯¹è±¡ï¼Œæ‰€ä»¥s1å’Œs2éƒ½æ˜¯æŒ‡å‘JVMå­—ç¬¦ä¸²å¸¸é‡æ± ä¸­çš„"AB"å¯¹è±¡ã€‚newå…³é”®å­—ä¸€å®šä¼šäº§ç”Ÿä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”è¿™ä¸ªå¯¹è±¡å­˜å‚¨åœ¨å †ä¸­ã€‚æ‰€ä»¥`String s3 = new String(â€œABâ€);`äº§ç”Ÿäº†ä¸¤ä¸ªå¯¹è±¡ï¼šä¿å­˜åœ¨æ ˆä¸­çš„s3å’Œä¿å­˜å †ä¸­çš„Stringå¯¹è±¡ã€‚

String å°±æ€»ç»“è¿™ä¹ˆå¤šï¼Œå¦‚æœæœ‰é—®é¢˜ï¼Œæ¬¢è¿è®¨è®ºã€‚

----
> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

-----
