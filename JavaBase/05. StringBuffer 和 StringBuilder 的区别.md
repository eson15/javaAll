> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

-----

StringBuilder å’Œ StringBuffer çš„é—®é¢˜å·²ç»æ˜¯è€ç”Ÿå¸¸è°ˆäº†ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿˜æœ‰é‚£ä¹ˆå¤šé¢è¯•å®˜å–œæ¬¢é—®è¿™ä¸ªé—®é¢˜å‘¢ï¼Ÿä¸çŸ¥é“ï¼Œæˆ‘è§‰å¾—æ˜¯é¢è¯•å®˜å¤ªlowäº†â€¦â€¦ğŸ¤£ğŸ¤£

ä¸è¿‡æˆ‘ä¹Ÿæ¥æŠŠè¿™ä¸ªçŸ¥è¯†ç‚¹ç»™å¤§å®¶æ€»ç»“ä¸€ä¸‹ï¼Œå…ˆè¯´è¯´ä»–ä»¬çš„ç›¸åŒç‚¹ã€‚

## 1. ç›¸åŒç‚¹

è¯´åˆ°è¿™å•ï¼Œæˆ‘åˆå¿ä¸ä½è¦è·Ÿå¤§å®¶å” å¨å” å¨ String äº†ï¼Œæˆ‘ä»¬å…ˆçœ‹ä¸‹ String çš„ä¸€ä¸ªä¾‹å­ï¼š
```java
String a = "123";
a = "456";
// æ‰“å°å‡ºæ¥çš„aä¸º456
System.out.println(a)
```
ä¸æ˜¯è¯´ String æ˜¯ä¸å¯æ”¹å˜çš„å—ï¼Ÿè¿™æ€ä¹ˆå°±å˜äº†å‘¢ï¼Ÿé€—æˆ‘å—ï¼Ÿå…¶å®æ˜¯æ²¡å˜çš„ï¼ŒåŸæ¥é‚£ä¸ª 123 æ²¡å˜ï¼Œç›¸å½“äºé‡æ–°åˆ›å»ºäº†ä¸€ä¸ª 456ï¼Œç„¶åæŠŠ a æŒ‡å‘äº†è¿™ä¸ª 456ï¼Œé‚£ä¸ª 123 ä¼šè¢«å›æ”¶æ‰ã€‚çœ‹çœ‹æˆ‘ç»™å¤§å®¶ç”»çš„å›¾ï¼š

![](https://img-blog.csdnimg.cn/20200612220539886.png)

è€Œ StringBuffer å’Œ StringBuilder å°±ä¸ä¸€æ ·äº†ï¼Œä»–ä»¬æ˜¯å¯å˜çš„ï¼Œå½“ä¸€ä¸ªå¯¹è±¡è¢«åˆ›å»ºä»¥åï¼Œé€šè¿‡`append()`ã€`insert()`ã€`reverse()`ã€`setCharAt()`ã€`setLength()`ç­‰æ–¹æ³•å¯ä»¥æ”¹å˜è¿™ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„å­—ç¬¦åºåˆ—ã€‚ä¹Ÿæ¥çœ‹ä¸ªä¾‹å­ï¼š

```java
StringBuffer b = new StringBuffer("123");
b.append("456");
// bæ‰“å°ç»“æœä¸ºï¼š123456
System.out.println(b);
```
![](https://img-blog.csdnimg.cn/20200612221256392.png)

OKï¼Œé‚£ç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ï¼ŒStringBuffer å’Œ StringBuilder æœ‰ä¸ªå…±åŒç‚¹ï¼Œé‚£å°±æ˜¯å®ƒä»¬ä»£è¡¨ä¸€ä¸ªå­—ç¬¦å¯å˜çš„å­—ç¬¦ä¸²ã€‚é‚£é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰æ²¡æœ‰å…¶ä»–ç›¸åŒç‚¹å‘¢ï¼Ÿ

è‚¯å®šæ˜¯æœ‰çš„ï¼Œæ¯”å¦‚ï¼š
1. StringBuilder ä¸ StringBuffer æœ‰å…¬å…±çˆ¶ç±» AbstractStringBuilder (æŠ½è±¡ç±»);
2. StringBuilderã€StringBuffer çš„æ–¹æ³•éƒ½ä¼šè°ƒç”¨ AbstractStringBuilder ä¸­çš„å…¬å…±æ–¹æ³•ï¼Œå¦‚`super.append(...)`ã€‚

## 2. ä¸åŒç‚¹

StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼ŒStringBuilder æ˜¯éçº¿ç¨‹å®‰å…¨çš„ã€‚æˆ‘ä»¬çœ‹æºç éƒ½çŸ¥é“ï¼ŒStringBuffer çš„æ–¹æ³•ä¸Šé¢éƒ½åŠ äº† synchronized å…³é”®å­—ï¼Œæ‰€ä»¥æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä½†æ˜¯æ€§èƒ½ä¼šå—å½±å“ï¼Œæ‰€ä»¥ StringBuilder ä¼šæ¯” StringBuffer å¿«ï¼Œåœ¨å•çº¿ç¨‹ç¯å¢ƒä¸‹ï¼Œå»ºè®®ä½¿ç”¨ StringBuilderã€‚

å¦å¤–è¿˜æœ‰ä¸ªä¸åŒç‚¹æ˜¯ç¼“å†²åŒºã€‚

å…ˆçœ‹ä¸‹ StringBuilder çš„`toString()`æ–¹æ³•ï¼š
```java
@Override
public String toString() {
	// Create a copy, don't share the array
	return new String(value, 0, count);
}
```

å†çœ‹ä¸‹ StringBuffer çš„`toString()`æ–¹æ³•ï¼š

```java
@Override
public synchronized String toString() {
    if (toStringCache == null) {
    	toStringCache = Arrays.copyOfRange(value, 0, count);
    }
    return new String(toStringCache, true);
}

```
å¯ä»¥çœ‹å‡ºï¼šStringBuffer æ¯æ¬¡è·å– toString éƒ½ä¼šç›´æ¥ä½¿ç”¨ç¼“å­˜åŒºçš„ toStringCache å€¼æ¥æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚è€Œ StringBuilder åˆ™æ¯æ¬¡éƒ½éœ€è¦å¤åˆ¶ä¸€æ¬¡å­—ç¬¦æ•°ç»„ï¼Œå†æ„é€ ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚

æ‰€ä»¥ï¼Œ StringBuffer å¯¹ç¼“å­˜åŒºä¼˜åŒ–ï¼Œä¸è¿‡ StringBuffer çš„è¿™ä¸ªtoString æ–¹æ³•ä»ç„¶æ˜¯åŒæ­¥çš„ã€‚

OKï¼ŒStringBuffer å’Œ StringBuilder å°±æ€»ç»“è¿™ä¹ˆå¤šå§ï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿æŒ‡æ­£ã€‚

-----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

-----
