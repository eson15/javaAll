> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

-----

## ä¸€.Java 8ç®€ä»‹
Java 8æ˜¯Javaè‡ªJava 5ï¼ˆå‘å¸ƒäº2004å¹´ï¼‰ä¹‹åçš„æœ€é‡è¦çš„ç‰ˆæœ¬ã€‚è¿™ä¸ªç‰ˆæœ¬åŒ…å«è¯­è¨€ã€ç¼–è¯‘å™¨ã€åº“ã€å·¥å…·å’ŒJVMç­‰æ–¹é¢çš„åå¤šä¸ªæ–°ç‰¹æ€§ã€‚åœ¨æœ¬æ–‡ä¸­æˆ‘ä»¬å°†å­¦ä¹ è¿™äº›æ–°ç‰¹æ€§ï¼Œå¹¶ç”¨å®é™…çš„ä¾‹å­è¯´æ˜åœ¨ä»€ä¹ˆåœºæ™¯ä¸‹é€‚åˆä½¿ç”¨ã€‚
æœ¬æ–‡ä¸­æˆ‘ä»¬å‡è®¾Javaå¼€å‘è€…ç»å¸¸é¢å¯¹çš„å‡ ç±»é—®é¢˜ï¼š
- è¯­è¨€
- ç¼–è¯‘å™¨
- åº“
- å·¥å…·
- è¿è¡Œæ—¶ï¼ˆJVMï¼‰

## äºŒ.Java 8ç‰¹æ€§è¯¦è§£
### 1. Lambdaè¡¨è¾¾å¼å’Œå‡½æ•°å¼æ¥å£

Lambdaè¡¨è¾¾å¼ï¼ˆä¹Ÿç§°ä¸ºé—­åŒ…ï¼‰æ˜¯Java 8ä¸­æœ€å¤§å’Œæœ€ä»¤äººæœŸå¾…çš„è¯­è¨€æ”¹å˜ã€‚å®ƒå…è®¸æˆ‘ä»¬å°†å‡½æ•°å½“æˆå‚æ•°ä¼ é€’ç»™æŸä¸ªæ–¹æ³•ï¼Œæˆ–è€…æŠŠä»£ç æœ¬èº«å½“ä½œæ•°æ®å¤„ç†ï¼šå‡½æ•°å¼å¼€å‘è€…éå¸¸ç†Ÿæ‚‰è¿™äº›æ¦‚å¿µã€‚å¦‚æœæ²¡æœ‰lambdaï¼ŒStreamç”¨èµ·æ¥ç›¸å½“åˆ«æ‰­ï¼Œä»–ä¼šäº§ç”Ÿå¤§é‡çš„åŒ¿åå†…éƒ¨ç±»ï¼Œæ‰€ä»¥lambda+default methodä½¿å¾—jdkåº“æ›´åŠ å¼ºå¤§ï¼Œä»¥åŠçµæ´»ï¼ŒStreamä»¥åŠé›†åˆæ¡†æ¶çš„æ”¹è¿›ä¾¿æ˜¯æœ€å¥½çš„è¯æ˜ã€‚

(1). Lambdaçš„è®¾è®¡è€—è´¹äº†å¾ˆå¤šæ—¶é—´å’Œå¾ˆå¤§çš„ç¤¾åŒºåŠ›é‡ï¼Œæœ€ç»ˆæ‰¾åˆ°ä¸€ç§æŠ˜ä¸­çš„å®ç°æ–¹æ¡ˆï¼Œå¯ä»¥å®ç°ç®€æ´è€Œç´§å‡‘çš„è¯­è¨€ç»“æ„ã€‚æœ€ç®€å•çš„Lambdaè¡¨è¾¾å¼å¯ç”±é€—å·åˆ†éš”çš„å‚æ•°åˆ—è¡¨ã€->ç¬¦å·å’Œè¯­å¥å—ç»„æˆï¼Œä¾‹å¦‚ï¼š
```
Arrays.asList( "a", "b", "d" ).forEach( e -> System.out.println( e ) );
```
ä¸Šé¢è¿™ä¸ªä»£ç ä¸­çš„å‚æ•°eçš„ç±»å‹æ˜¯ç”±ç¼–è¯‘å™¨æ¨ç†å¾—å‡ºçš„ï¼Œä½ ä¹Ÿå¯ä»¥æ˜¾å¼æŒ‡å®šè¯¥å‚æ•°çš„ç±»å‹ï¼Œä¾‹å¦‚ï¼š
```
Arrays.asList( "a", "b", "d" ).forEach( ( String e ) -> System.out.println( e ) );
```
(2). å½“Lambdaè¡¨è¾¾å¼éœ€è¦æ›´å¤æ‚çš„è¯­å¥å—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·å°†è¯¥è¯­å¥å—æ‹¬èµ·æ¥ï¼Œç±»ä¼¼äºJavaä¸­çš„å‡½æ•°ä½“ï¼Œä¾‹å¦‚ï¼š
```
Arrays.asList( "a", "b", "d" ).forEach( e -> {
    System.out.print( e );
    System.out.print( e );
} );
```
(3). Lambdaè¡¨è¾¾å¼å¯ä»¥å¼•ç”¨ç±»æˆå‘˜å’Œå±€éƒ¨å˜é‡ï¼ˆä¼šå°†è¿™äº›å˜é‡éšå¼å¾—è½¬æ¢æˆfinalçš„ï¼‰ï¼Œä¸‹åˆ—ä¸¤ä¸ªä»£ç å—çš„æ•ˆæœä¸€è‡´ï¼š
```
String separator = ",";
Arrays.asList( "a", "b", "d" ).forEach( 
    ( String e ) -> System.out.print( e + separator ) );


final String separator = ",";
Arrays.asList( "a", "b", "d" ).forEach( 
    ( String e ) -> System.out.print( e + separator ) );
```
(4). Lambdaè¡¨è¾¾å¼æ˜¯å¯ä»¥æœ‰è¿”å›å€¼çš„ï¼Œè¿”å›å€¼çš„ç±»å‹ä¹Ÿç”±ç¼–è¯‘å™¨æ¨ç†å¾—å‡ºã€‚å¦‚æœLambdaè¡¨è¾¾å¼ä¸­çš„è¯­å¥å—åªæœ‰ä¸€è¡Œï¼Œåˆ™å¯ä»¥ä¸ç”¨ä½¿ç”¨returnè¯­å¥ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
```
Arrays.asList( "a", "b", "d" ).sort( ( e1, e2 ) -> e1.compareTo( e2 ) );

Arrays.asList( "a", "b", "d" ).sort( ( e1, e2 ) -> {
    int result = e1.compareTo( e2 );
    return result;
} );
```

ä¸ºäº†è®©ç°æœ‰çš„åŠŸèƒ½ä¸Lambdaè¡¨è¾¾å¼è‰¯å¥½å…¼å®¹ï¼Œå‡½æ•°æ¥å£åº”è¿è€Œç”Ÿã€‚å‡½æ•°æ¥å£æŒ‡çš„æ˜¯åªæœ‰ä¸€ä¸ªå‡½æ•°çš„æ¥å£ï¼Œè¿™æ ·çš„æ¥å£å¯ä»¥éšå¼è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼ã€‚java.lang.Runnableå’Œjava.util.concurrent.Callableæ˜¯å‡½æ•°å¼æ¥å£çš„æœ€ä½³ä¾‹å­ã€‚åœ¨å®è·µä¸­ï¼Œå‡½æ•°å¼æ¥å£éå¸¸è„†å¼±ï¼šåªè¦æŸä¸ªå¼€å‘è€…åœ¨è¯¥æ¥å£ä¸­æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™è¯¥æ¥å£å°±ä¸å†æ˜¯å‡½æ•°å¼æ¥å£è¿›è€Œå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ä¸ºäº†å…‹æœè¿™ç§ä»£ç å±‚é¢çš„è„†å¼±æ€§ï¼Œå¹¶æ˜¾å¼è¯´æ˜æŸä¸ªæ¥å£æ˜¯å‡½æ•°å¼æ¥å£ï¼ŒJava 8 æä¾›äº†ä¸€ä¸ªç‰¹æ®Šçš„æ³¨è§£@FunctionalInterfaceï¼Œä¸¾ä¸ªç®€å•çš„å‡½æ•°å¼æ¥å£çš„å®šä¹‰ï¼š
```
@FunctionalInterface
public interface Functional {
    void method();
}
```
å¦‚æœä½ éœ€è¦äº†è§£æ›´å¤šLambdaè¡¨è¾¾å¼çš„ç»†èŠ‚ï¼Œä¸€å®šè¦å»çœ‹çœ‹å®˜æ–¹æ–‡æ¡£å“¦ã€‚

### 2. æ–¹æ³•å¼•ç”¨

æ–¹æ³•å¼•ç”¨ä½¿å¾—å¼€å‘è€…å¯ä»¥ç›´æ¥å¼•ç”¨ç°å­˜çš„æ–¹æ³•ã€Javaç±»çš„æ„é€ æ–¹æ³•æˆ–è€…å®ä¾‹å¯¹è±¡ã€‚æ–¹æ³•å¼•ç”¨å’ŒLambdaè¡¨è¾¾å¼é…åˆä½¿ç”¨ï¼Œä½¿å¾—javaç±»çš„æ„é€ æ–¹æ³•çœ‹èµ·æ¥ç´§å‡‘è€Œç®€æ´ï¼Œæ²¡æœ‰å¾ˆå¤šå¤æ‚çš„æ¨¡æ¿ä»£ç ã€‚

ä¸¾ä¸ªä¾‹å­ï¼š
```
public static class Car {
    public static Car create( final Supplier< Car > supplier ) {
        return supplier.get();
    }              
 
    public static void collide( final Car car ) {
        System.out.println( "Collided " + car.toString() );
    }
 
    public void follow( final Car another ) {
        System.out.println( "Following the " + another.toString() );
    }
 
    public void repair() {   
        System.out.println( "Repaired " + this.toString() );
    }
}

```

æ–¹æ³•ä¸€å¼•ç”¨çš„ç±»å‹æ˜¯æ„é€ å™¨å¼•ç”¨ï¼Œè¯­æ³•æ˜¯Class::newï¼Œæˆ–è€…æ›´ä¸€èˆ¬çš„å½¢å¼ï¼šClass<T>::newã€‚æ³¨æ„ï¼šè¿™ä¸ªæ„é€ å™¨æ²¡æœ‰å‚æ•°ã€‚

```
final Car car = Car.create( Car::new );
final List< Car > cars = Arrays.asList( car );
```
æ–¹æ³•äºŒå¼•ç”¨çš„ç±»å‹æ˜¯é™æ€æ–¹æ³•å¼•ç”¨ï¼Œè¯­æ³•æ˜¯Class::static_methodã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•°ã€‚
```
cars.forEach( Car::collide );
```
æ–¹æ³•ä¸‰å¼•ç”¨çš„ç±»å‹æ˜¯æŸä¸ªå®ä¾‹å¯¹è±¡çš„æˆå‘˜æ–¹æ³•çš„å¼•ç”¨ï¼Œè¯­æ³•æ˜¯instance::methodã€‚æ³¨æ„ï¼šè¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ªCarç±»å‹çš„å‚æ•°ï¼š
```
final Car police = Car.create( Car::new );
cars.forEach( police::follow );
```
æ–¹æ³•å››å¼•ç”¨çš„ç±»å‹æ˜¯æŸä¸ªç±»çš„æˆå‘˜æ–¹æ³•çš„å¼•ç”¨ï¼Œè¯­æ³•æ˜¯Class::methodï¼Œæ³¨æ„ï¼Œè¿™ä¸ªæ–¹æ³•æ²¡æœ‰å®šä¹‰å…¥å‚ï¼š
```
cars.forEach( Car::repair );
```

è¿è¡Œä¸Šè¿°ä¾‹å­ï¼Œå¯ä»¥åœ¨æ§åˆ¶å°çœ‹åˆ°å¦‚ä¸‹è¾“å‡ºï¼ˆCarå®ä¾‹å¯èƒ½ä¸åŒï¼‰ï¼š
```
Collided com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197d
Repaired com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197d
Following the com.javacodegeeks.java8.method.references.MethodReferences$Car@7a81197d
```

### 3. æ¥å£çš„é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•
Java 8ä½¿ç”¨ä¸¤ä¸ªæ–°æ¦‚å¿µæ‰©å±•äº†æ¥å£çš„å«ä¹‰ï¼šé»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•ã€‚é»˜è®¤æ–¹æ³•ä½¿å¾—æ¥å£æœ‰ç‚¹ç±»ä¼¼traitsï¼Œä¸è¿‡è¦å®ç°çš„ç›®æ ‡ä¸ä¸€æ ·ã€‚é»˜è®¤æ–¹æ³•ä½¿å¾—å¼€å‘è€…å¯ä»¥åœ¨ ä¸ç ´åäºŒè¿›åˆ¶å…¼å®¹æ€§çš„å‰æä¸‹ï¼Œå¾€ç°å­˜æ¥å£ä¸­æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œå³ä¸å¼ºåˆ¶é‚£äº›å®ç°äº†è¯¥æ¥å£çš„ç±»ä¹ŸåŒæ—¶å®ç°è¿™ä¸ªæ–°åŠ çš„æ–¹æ³•ã€‚
é»˜è®¤æ–¹æ³•å’ŒæŠ½è±¡æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«åœ¨äºæŠ½è±¡æ–¹æ³•éœ€è¦å®ç°ï¼Œè€Œé»˜è®¤æ–¹æ³•ä¸éœ€è¦ã€‚æ¥å£æä¾›çš„é»˜è®¤æ–¹æ³•ä¼šè¢«æ¥å£çš„å®ç°ç±»ç»§æ‰¿æˆ–è€…è¦†å†™ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š
```
private interface Defaulable {
    // Interfaces now allow default methods, the implementer may or 
    // may not implement (override) them.
    default String notRequired() { 
        return "Default implementation"; 
    }        
}
 
private static class DefaultableImpl implements Defaulable {
}
 
private static class OverridableImpl implements Defaulable {
    @Override
    public String notRequired() {
        return "Overridden implementation";
    }
}
```
Defaulableæ¥å£ä½¿ç”¨å…³é”®å­—defaultå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤æ–¹æ³•notRequired()ã€‚DefaultableImplç±»å®ç°äº†è¿™ä¸ªæ¥å£ï¼ŒåŒæ—¶é»˜è®¤ç»§æ‰¿äº†è¿™ä¸ªæ¥å£ä¸­çš„é»˜è®¤æ–¹æ³•ï¼›OverridableImplç±»ä¹Ÿå®ç°äº†è¿™ä¸ªæ¥å£ï¼Œä½†è¦†å†™äº†è¯¥æ¥å£çš„é»˜è®¤æ–¹æ³•ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªä¸åŒçš„å®ç°ã€‚
Java 8çš„å¦ä¸€ä¸ªæœ‰è¶£çš„ç‰¹æ€§æ˜¯åœ¨æ¥å£ä¸­å®šä¹‰é™æ€æ–¹æ³•ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š
```
private interface DefaulableFactory {
    // Interfaces now allow static methods
    static Defaulable create( Supplier< Defaulable > supplier ) {
        return supplier.get();
    }
}
```
ä¸‹é¢çš„ä»£ç ç‰‡æ®µæ•´åˆäº†é»˜è®¤æ–¹æ³•å’Œé™æ€æ–¹æ³•çš„ä½¿ç”¨åœºæ™¯ï¼š
```
public static void main( String[] args ) {
    Defaulable defaulable = DefaulableFactory.create( DefaultableImpl::new );
    System.out.println( defaulable.notRequired() );
 
    defaulable = DefaulableFactory.create( OverridableImpl::new );
    System.out.println( defaulable.notRequired() );
}
```
è¿™æ®µä»£ç çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
```
Default implementation
Overridden implementation
```
ç”±äºJVMä¸Šçš„é»˜è®¤æ–¹æ³•çš„å®ç°åœ¨å­—èŠ‚ç å±‚é¢æä¾›äº†æ”¯æŒï¼Œå› æ­¤æ•ˆç‡éå¸¸é«˜ã€‚é»˜è®¤æ–¹æ³•å…è®¸åœ¨ä¸æ‰“ç ´ç°æœ‰ç»§æ‰¿ä½“ç³»çš„åŸºç¡€ä¸Šæ”¹è¿›æ¥å£ã€‚è¯¥ç‰¹æ€§åœ¨å®˜æ–¹åº“ä¸­çš„åº”ç”¨æ˜¯ï¼šç»™java.util.Collectionæ¥å£æ·»åŠ æ–°æ–¹æ³•ï¼Œå¦‚stream()ã€parallelStream()ã€forEach()å’ŒremoveIf()ç­‰ç­‰ã€‚

### 4. æ›´å¥½çš„ç±»å‹æ¨æ–­

Java 8ç¼–è¯‘å™¨åœ¨ç±»å‹æ¨æ–­æ–¹é¢æœ‰å¾ˆå¤§çš„æå‡ï¼Œåœ¨å¾ˆå¤šåœºæ™¯ä¸‹ç¼–è¯‘å™¨å¯ä»¥æ¨å¯¼å‡ºæŸä¸ªå‚æ•°çš„æ•°æ®ç±»å‹ï¼Œä»è€Œä½¿å¾—ä»£ç æ›´ä¸ºç®€æ´ã€‚ä¾‹å­ä»£ç å¦‚ä¸‹:
```
package com.javacodegeeks.java8.type.inference;
 
public class Value< T > {
    public static< T > T defaultValue() { 
        return null; 
    }
 
    public T getOrDefault( T value, T defaultValue ) {
        return ( value != null ) ? value : defaultValue;
    }
}
```

ä¸‹åˆ—ä»£ç æ˜¯Value<String>ç±»å‹çš„åº”ç”¨ï¼š
```
package com.javacodegeeks.java8.type.inference;
 
public class TypeInference {
    public static void main(String[] args) {
        final Value< String > value = new Value<>();
        value.getOrDefault( "22", Value.defaultValue() );
    }
}
```
å‚æ•°Value.defaultValue()çš„ç±»å‹ç”±ç¼–è¯‘å™¨æ¨å¯¼å¾—å‡ºï¼Œä¸éœ€è¦æ˜¾å¼æŒ‡æ˜ã€‚åœ¨Java 7ä¸­è¿™æ®µä»£ç ä¼šæœ‰ç¼–è¯‘é”™è¯¯ï¼Œé™¤éä½¿ç”¨Value.<String>defaultValue()ã€‚

### 5. é‡å¤æ³¨è§£

è‡ªä»Java 5ä¸­å¼•å…¥æ³¨è§£ä»¥æ¥ï¼Œè¿™ä¸ªç‰¹æ€§å¼€å§‹å˜å¾—éå¸¸æµè¡Œï¼Œå¹¶åœ¨å„ä¸ªæ¡†æ¶å’Œé¡¹ç›®ä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚ä¸è¿‡ï¼Œæ³¨è§£æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶æ˜¯ï¼šåœ¨åŒä¸€ä¸ªåœ°æ–¹ä¸èƒ½å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£ã€‚Java 8æ‰“ç ´äº†è¿™ä¸ªé™åˆ¶ï¼Œå¼•å…¥äº†é‡å¤æ³¨è§£çš„æ¦‚å¿µï¼Œå…è®¸åœ¨åŒä¸€ä¸ªåœ°æ–¹å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ³¨è§£ã€‚

åœ¨Java 8ä¸­ä½¿ç”¨@Repeatableæ³¨è§£å®šä¹‰é‡å¤æ³¨è§£ï¼Œå®é™…ä¸Šï¼Œè¿™å¹¶ä¸æ˜¯è¯­è¨€å±‚é¢çš„æ”¹è¿›ï¼Œè€Œæ˜¯ç¼–è¯‘å™¨åšçš„ä¸€ä¸ªtrickï¼Œåº•å±‚çš„æŠ€æœ¯ä»ç„¶ç›¸åŒã€‚å¯ä»¥åˆ©ç”¨ä¸‹é¢çš„ä»£ç è¯´æ˜ï¼š
```
package com.javacodegeeks.java8.repeatable.annotations;
 
import java.lang.annotation.ElementType;
import java.lang.annotation.Repeatable;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
 
public class RepeatingAnnotations {
    @Target( ElementType.TYPE )
    @Retention( RetentionPolicy.RUNTIME )
    public @interface Filters {
        Filter[] value();
    }
 
    @Target( ElementType.TYPE )
    @Retention( RetentionPolicy.RUNTIME )
    @Repeatable( Filters.class )
    public @interface Filter {
        String value();
    };
 
    @Filter( "filter1" )
    @Filter( "filter2" )
    public interface Filterable {        
    }
 
    public static void main(String[] args) {
        for( Filter filter: Filterable.class.getAnnotationsByType( Filter.class ) ) {
            System.out.println( filter.value() );
        }
    }
}
```
å¦‚ä¸Šæ‰€è§ï¼Œè¿™çš„Filterç±»ä½¿ç”¨@Repeatable(Filters.class)æ³¨è§£ä¿®é¥°ï¼Œè€ŒFiltersæ˜¯å­˜æ”¾Filteræ³¨è§£çš„å®¹å™¨ï¼Œç¼–è¯‘å™¨å°½é‡å¯¹å¼€å‘è€…å±è”½è¿™äº›ç»†èŠ‚ã€‚è¿™æ ·å°±ä¼šå¯¼è‡´ï¼ŒFilterableæ¥å£å¯ä»¥ç”¨ä¸¤ä¸ªFilteræ³¨è§£æ³¨é‡Šï¼ˆè¿™é‡Œå¹¶æ²¡æœ‰æåˆ°ä»»ä½•å…³äºFiltersçš„ä¿¡æ¯ï¼‰ã€‚

å¦å¤–ï¼Œåå°„APIæä¾›äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ï¼šgetAnnotationsByType()ï¼Œå¯ä»¥è¿”å›æŸä¸ªç±»å‹çš„é‡å¤æ³¨è§£ï¼Œä¾‹å¦‚Filterable.class.getAnnoation(Filters.class)å°†è¿”å›ä¸¤ä¸ªFilterå®ä¾‹ï¼Œè¾“å‡ºåˆ°æ§åˆ¶å°çš„å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š
```
filter1
filter2
```
### 6. æ‹“å±•æ³¨è§£
Java 8æ‹“å®½äº†æ³¨è§£çš„åº”ç”¨åœºæ™¯ã€‚ç°åœ¨ï¼Œæ³¨è§£å‡ ä¹å¯ä»¥ä½¿ç”¨åœ¨ä»»ä½•å…ƒç´ ä¸Šï¼šå±€éƒ¨å˜é‡ã€æ¥å£ç±»å‹ã€è¶…ç±»å’Œæ¥å£å®ç°ç±»ï¼Œç”šè‡³å¯ä»¥ç”¨åœ¨å‡½æ•°çš„å¼‚å¸¸å®šä¹‰ä¸Šã€‚ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š
```
package com.javacodegeeks.java8.annotations;
 
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;
import java.lang.annotation.Target;
import java.util.ArrayList;
import java.util.Collection;
 
public class Annotations {
    @Retention( RetentionPolicy.RUNTIME )
    @Target( { ElementType.TYPE_USE, ElementType.TYPE_PARAMETER } )
    public @interface NonEmpty {        
    }
 
    public static class Holder< @NonEmpty T > extends @NonEmpty Object {
        public void method() throws @NonEmpty Exception {            
        }
    }
 
    @SuppressWarnings( "unused" )
    public static void main(String[] args) {
        final Holder< String > holder = new @NonEmpty Holder< String >();        
        @NonEmpty Collection< @NonEmpty String > strings = new ArrayList<>();        
    }
}
```
ElementType.TYPE_USERå’ŒElementType.TYPE_PARAMETERæ˜¯Java 8æ–°å¢çš„ä¸¤ä¸ªæ³¨è§£ï¼Œç”¨äºæè¿°æ³¨è§£çš„ä½¿ç”¨åœºæ™¯ã€‚Java è¯­è¨€ä¹Ÿåšäº†å¯¹åº”çš„æ”¹å˜ï¼Œä»¥è¯†åˆ«è¿™äº›æ–°å¢çš„æ³¨è§£ã€‚

### 7.Javaç¼–è¯‘å™¨çš„æ–°ç‰¹æ€§
ä¸ºäº†åœ¨è¿è¡Œæ—¶è·å¾—Javaç¨‹åºä¸­æ–¹æ³•çš„å‚æ•°åç§°ï¼Œè€ä¸€è¾ˆçš„Javaç¨‹åºå‘˜å¿…é¡»ä½¿ç”¨ä¸åŒæ–¹æ³•ï¼Œä¾‹å¦‚Paranamer liberaryã€‚Java 8ç»ˆäºå°†è¿™ä¸ªç‰¹æ€§è§„èŒƒåŒ–ï¼Œåœ¨è¯­è¨€å±‚é¢ï¼ˆä½¿ç”¨åå°„APIå’ŒParameter.getName()æ–¹æ³•ï¼‰å’Œå­—èŠ‚ç å±‚é¢ï¼ˆä½¿ç”¨æ–°çš„javacç¼–è¯‘å™¨ä»¥åŠ-parameterså‚æ•°ï¼‰æä¾›æ”¯æŒã€‚
```
package com.javacodegeeks.java8.parameter.names;
 
import java.lang.reflect.Method;
import java.lang.reflect.Parameter;
 
public class ParameterNames {
    public static void main(String[] args) throws Exception {
        Method method = ParameterNames.class.getMethod( "main", String[].class );
        for( final Parameter parameter: method.getParameters() ) {
            System.out.println( "Parameter: " + parameter.getName() );
        }
    }
}
```

åœ¨Java 8ä¸­è¿™ä¸ªç‰¹æ€§æ˜¯é»˜è®¤å…³é—­çš„ï¼Œå› æ­¤å¦‚æœä¸å¸¦-parameterså‚æ•°ç¼–è¯‘ä¸Šè¿°ä»£ç å¹¶è¿è¡Œï¼Œåˆ™ä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼š
```
Parameter: arg0
```
å¦‚æœå¸¦-parameterså‚æ•°ï¼Œåˆ™ä¼šè¾“å‡ºå¦‚ä¸‹ç»“æœï¼ˆæ­£ç¡®çš„ç»“æœï¼‰ï¼š
```
Parameter: args
```
å¦‚æœä½ ä½¿ç”¨Mavenè¿›è¡Œé¡¹ç›®ç®¡ç†ï¼Œåˆ™å¯ä»¥åœ¨maven-compiler-pluginç¼–è¯‘å™¨çš„é…ç½®é¡¹ä¸­é…ç½®-parameterså‚æ•°ï¼š
```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.1</version>
    <configuration>
        <compilerArgument>-parameters</compilerArgument>
        <source>1.8</source>
        <target>1.8</target>
    </configuration>
</plugin>
```

### 8.Optional
Javaåº”ç”¨ä¸­æœ€å¸¸è§çš„bugå°±æ˜¯ç©ºå€¼å¼‚å¸¸ã€‚åœ¨Java 8ä¹‹å‰ï¼ŒGoogle Guavaå¼•å…¥äº†Optionalsç±»æ¥è§£å†³NullPointerExceptionï¼Œä»è€Œé¿å…æºç è¢«å„ç§nullæ£€æŸ¥æ±¡æŸ“ï¼Œä»¥ä¾¿å¼€å‘è€…å†™å‡ºæ›´åŠ æ•´æ´çš„ä»£ç ã€‚Java 8ä¹Ÿå°†OptionalåŠ å…¥äº†å®˜æ–¹åº“ã€‚

Optionalä»…ä»…æ˜¯ä¸€ä¸ªå®¹æ˜“ï¼šå­˜æ”¾Tç±»å‹çš„å€¼æˆ–è€…nullã€‚å®ƒæä¾›äº†ä¸€äº›æœ‰ç”¨çš„æ¥å£æ¥é¿å…æ˜¾å¼çš„nullæ£€æŸ¥ï¼Œå¯ä»¥å‚è€ƒJava 8å®˜æ–¹æ–‡æ¡£äº†è§£æ›´å¤šç»†èŠ‚ã€‚

æ¥ä¸‹æ¥çœ‹ä¸€ç‚¹ä½¿ç”¨Optionalçš„ä¾‹å­ï¼šå¯èƒ½ä¸ºç©ºçš„å€¼æˆ–è€…æŸä¸ªç±»å‹çš„å€¼ï¼š
```
Optional< String > fullName = Optional.ofNullable( null );
System.out.println( "Full Name is set? " + fullName.isPresent() );        
System.out.println( "Full Name: " + fullName.orElseGet( () -> "[none]" ) ); 
System.out.println( fullName.map( s -> "Hey " + s + "!" ).orElse( "Hey Stranger!" ) );
```
å¦‚æœOptionalå®ä¾‹æŒæœ‰ä¸€ä¸ªéç©ºå€¼ï¼Œåˆ™isPresent()æ–¹æ³•è¿”å›trueï¼Œå¦åˆ™è¿”å›falseï¼›orElseGet()æ–¹æ³•ï¼ŒOptionalå®ä¾‹æŒæœ‰nullï¼Œåˆ™å¯ä»¥æ¥å—ä¸€ä¸ªlambdaè¡¨è¾¾å¼ç”Ÿæˆçš„é»˜è®¤å€¼ï¼›map()æ–¹æ³•å¯ä»¥å°†ç°æœ‰çš„Opetionalå®ä¾‹çš„å€¼è½¬æ¢æˆæ–°çš„å€¼ï¼›orElse()æ–¹æ³•ä¸orElseGet()æ–¹æ³•ç±»ä¼¼ï¼Œä½†æ˜¯åœ¨æŒæœ‰nullçš„æ—¶å€™è¿”å›ä¼ å…¥çš„é»˜è®¤å€¼ã€‚

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
```
Full Name is set? false
Full Name: [none]
Hey Stranger!
```

### 9. Streams
æ–°å¢çš„Stream APIï¼ˆjava.util.streamï¼‰å°†ç”Ÿæˆç¯å¢ƒçš„å‡½æ•°å¼ç¼–ç¨‹å¼•å…¥äº†Javaåº“ä¸­ã€‚è¿™æ˜¯ç›®å‰ä¸ºæ­¢æœ€å¤§çš„ä¸€æ¬¡å¯¹Javaåº“çš„å®Œå–„ï¼Œä»¥ä¾¿å¼€å‘è€…èƒ½å¤Ÿå†™å‡ºæ›´åŠ æœ‰æ•ˆã€æ›´åŠ ç®€æ´å’Œç´§å‡‘çš„ä»£ç ã€‚

Steam APIæå¤§å¾—ç®€åŒ–äº†é›†åˆæ“ä½œï¼ˆåé¢æˆ‘ä»¬ä¼šçœ‹åˆ°ä¸æ­¢æ˜¯é›†åˆï¼‰ï¼Œé¦–å…ˆçœ‹ä¸‹è¿™ä¸ªå«Taskçš„ç±»ï¼š
```
public class Streams  {
    private enum Status {
        OPEN, CLOSED
    };
 
    private static final class Task {
        private final Status status;
        private final Integer points;
 
        Task( final Status status, final Integer points ) {
            this.status = status;
            this.points = points;
        }
 
        public Integer getPoints() {
            return points;
        }
 
        public Status getStatus() {
            return status;
        }
 
        @Override
        public String toString() {
            return String.format( "[%s, %d]", status, points );
        }
    }
}
```
Taskç±»æœ‰ä¸€ä¸ªåˆ†æ•°ï¼ˆæˆ–ä¼ªå¤æ‚åº¦ï¼‰çš„æ¦‚å¿µï¼Œå¦å¤–è¿˜æœ‰ä¸¤ç§çŠ¶æ€ï¼šOPENæˆ–è€…CLOSEDã€‚ç°åœ¨å‡è®¾æœ‰ä¸€ä¸ªtaské›†åˆï¼š
```
final Collection< Task > tasks = Arrays.asList(
    new Task( Status.OPEN, 5 ),
    new Task( Status.OPEN, 13 ),
    new Task( Status.CLOSED, 8 ) 
);
```
è¯•æƒ³ä¸€ä¸‹ï¼šåœ¨è¿™ä¸ªtaské›†åˆä¸­ä¸€å…±æœ‰å¤šå°‘ä¸ªå¤„äºOPENçŠ¶æ€çš„ç‚¹ï¼Ÿåœ¨Java 8ä¹‹å‰ï¼Œè¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨foreachå¾ªç¯éå†taské›†åˆï¼›ä½†æ˜¯åœ¨Java 8ä¸­å¯ä»¥åˆ©ç”¨steamsè§£å†³ï¼šåŒ…æ‹¬ä¸€ç³»åˆ—å…ƒç´ çš„åˆ—è¡¨ï¼Œå¹¶ä¸”æ”¯æŒé¡ºåºå’Œå¹¶è¡Œå¤„ç†ã€‚
```
// Calculate total points of all active tasks using sum()
final long totalPointsOfOpenTasks = tasks
    .stream()
    .filter( task -> task.getStatus() == Status.OPEN )
    .mapToInt( Task::getPoints )
    .sum();
 
System.out.println( "Total points: " + totalPointsOfOpenTasks );
```
è¿è¡Œè¿™ä¸ªæ–¹æ³•çš„æ§åˆ¶å°è¾“å‡ºæ˜¯ï¼š
```
Total points: 18
```
- tasksé›†åˆè¢«è½¬æ¢æˆsteamè¡¨ç¤º;
- åœ¨steamä¸Šçš„filteræ“ä½œä¼šè¿‡æ»¤æ‰æ‰€æœ‰CLOSEDçš„task;
- mapToIntæ“ä½œåŸºäºæ¯ä¸ªtaskå®ä¾‹çš„Task::getPointsæ–¹æ³•å°†taskæµè½¬æ¢æˆIntegeré›†åˆ;
- é€šè¿‡sumæ–¹æ³•è®¡ç®—æ€»å’Œï¼Œå¾—å‡ºæœ€åçš„ç»“æœã€‚

### 10. Date/Time API(JSR 310)
Java 8å¼•å…¥äº†æ–°çš„Date-Time API(JSR 310)æ¥æ”¹è¿›æ—¶é—´ã€æ—¥æœŸçš„å¤„ç†ã€‚æ—¶é—´å’Œæ—¥æœŸçš„ç®¡ç†ä¸€ç›´æ˜¯æœ€ä»¤Javaå¼€å‘è€…ç—›è‹¦çš„é—®é¢˜ã€‚java.util.Dateå’Œåæ¥çš„java.util.Calendarä¸€ç›´æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ï¼ˆç”šè‡³ä»¤å¼€å‘è€…æ›´åŠ è¿·èŒ«ï¼‰ã€‚

ç”±ä¸Šè¿°åŸå› ï¼Œè¯ç”Ÿäº†ç¬¬ä¸‰æ–¹åº“Joda-Timeï¼Œå¯ä»¥æ›¿ä»£Javaçš„æ—¶é—´ç®¡ç†APIã€‚Java 8ä¸­æ–°çš„æ—¶é—´å’Œæ—¥æœŸç®¡ç†APIæ·±å—Joda-Timeå½±å“ï¼Œå¹¶å¸æ”¶äº†å¾ˆå¤šJoda-Timeçš„ç²¾åã€‚æ–°çš„java.timeåŒ…åŒ…å«äº†æ‰€æœ‰å…³äºæ—¥æœŸã€æ—¶é—´ã€æ—¶åŒºã€Instantï¼ˆè·Ÿæ—¥æœŸç±»ä¼¼ä½†æ˜¯ç²¾ç¡®åˆ°çº³ç§’ï¼‰ã€durationï¼ˆæŒç»­æ—¶é—´ï¼‰å’Œæ—¶é’Ÿæ“ä½œçš„ç±»ã€‚æ–°è®¾è®¡çš„APIè®¤çœŸè€ƒè™‘äº†è¿™äº›ç±»çš„ä¸å˜æ€§ï¼ˆä»java.util.Calendarå¸å–çš„æ•™è®­ï¼‰ï¼Œå¦‚æœæŸä¸ªå®ä¾‹éœ€è¦ä¿®æ”¹ï¼Œåˆ™è¿”å›ä¸€ä¸ªæ–°çš„å¯¹è±¡ã€‚
æ–¹æ³•	|æè¿°	
---|---
now()	|é™æ€æ–¹æ³•ï¼Œæ ¹æ®å½“å‰æ—¶é—´åˆ›å»ºå¯¹è±¡|	
of()	|é™æ€æ–¹æ³•ï¼Œæ ¹æ®æŒ‡å®šæ—¥æœŸ/æ—¶é—´åˆ›å»º å¯¹è±¡	
plusDays, plusWeeks, plusMonths, plusYears	|å‘å½“å‰ LocalDate å¯¹è±¡æ·»åŠ å‡ å¤©ã€ å‡ å‘¨ã€å‡ ä¸ªæœˆã€å‡ å¹´	|
minusDays, minusWeeks, minusMonths, minusYears|	ä»å½“å‰ LocalDate å¯¹è±¡å‡å»å‡ å¤©ã€ å‡ å‘¨ã€å‡ ä¸ªæœˆã€å‡ å¹´	
plus, minus|	æ·»åŠ æˆ–å‡å°‘ä¸€ä¸ª Durationæˆ– Period	
withDayOfMonth, withDayOfYear, withMonth, withYear	|å°†æœˆä»½å¤©æ•°ã€å¹´ä»½å¤©æ•°ã€æœˆä»½ã€å¹´ ä»½ä¿®æ”¹ä¸ºæŒ‡å®šçš„å€¼å¹¶è¿”å›æ–°çš„ LocalDateå¯¹è±¡	
getDayOfMonth	|è·å¾—æœˆä»½å¤©æ•°(1-31)	
getDayOfYear	|è·å¾—å¹´ä»½å¤©æ•°(1-366)	
getDayOfWeek	|è·å¾—æ˜ŸæœŸå‡ (è¿”å›ä¸€ä¸ª DayOfWeek æšä¸¾å€¼)	
getMonth	|è·å¾—æœˆä»½, è¿”å›ä¸€ä¸ª Monthæšä¸¾å€¼	
getMonthValue	|è·å¾—æœˆä»½(1-12)	
getYear	|è·å¾—å¹´ä»½	
until	|è·å¾—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„ Period å¯¹è±¡ï¼Œ æˆ–è€…æŒ‡å®š ChronoUnitsçš„æ•°å­—	
isBefore, isAfter	|æ¯”è¾ƒä¸¤ä¸ª LocalDate	
isLeapYear	|åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´	


æˆ‘ä»¬æ¥ä¸‹æ¥çœ‹çœ‹java.timeåŒ…ä¸­çš„å…³é”®ç±»å’Œå„è‡ªçš„ä½¿ç”¨ä¾‹å­ã€‚

é¦–å…ˆï¼ŒClockç±»ä½¿ç”¨æ—¶åŒºæ¥è¿”å›å½“å‰çš„çº³ç§’æ—¶é—´å’Œæ—¥æœŸã€‚Clockå¯ä»¥æ›¿ä»£System.currentTimeMillis()å’ŒTimeZone.getDefault()ã€‚
```
// Get the system clock as UTC offset 
final Clock clock = Clock.systemUTC();
System.out.println( clock.instant() );
System.out.println( clock.millis() );
```
è¾“å‡ºçš„ç»“æœæ˜¯ï¼š
```
2014-04-12T15:19:29.282Z
1397315969360
```

LocalDateTimeç±»åŒ…å«äº†LocalDateå’ŒLocalTimeçš„ä¿¡æ¯ï¼Œä½†æ˜¯ä¸åŒ…å«ISO-8601æ—¥å†ç³»ç»Ÿä¸­çš„æ—¶åŒºä¿¡æ¯ã€‚è¿™é‡Œæœ‰ä¸€äº›å…³äºLocalDateå’ŒLocalTimeçš„ä¾‹å­ï¼š

```
// Get the local date/time
final LocalDateTime datetime = LocalDateTime.now();
final LocalDateTime datetimeFromClock = LocalDateTime.now( clock );
 
System.out.println( datetime );
System.out.println( datetimeFromClock );
```
è¾“å‡ºçš„ç»“æœæ˜¯ï¼š
```
2014-04-12T11:37:52.309
2014-04-12T15:37:52.309
```

æœ€åçœ‹ä¸‹Durationç±»ï¼Œå®ƒæŒæœ‰çš„æ—¶é—´ç²¾ç¡®åˆ°ç§’å’Œçº³ç§’ã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“å¾—è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„ä¸åŒï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š
```
// Get duration between two dates
final LocalDateTime from = LocalDateTime.of( 2014, Month.APRIL, 16, 0, 0, 0 );
final LocalDateTime to = LocalDateTime.of( 2015, Month.APRIL, 16, 23, 59, 59 );
final Duration duration = Duration.between( from, to );
System.out.println( "Duration in days: " + duration.toDays() );
System.out.println( "Duration in hours: " + duration.toHours() );
```
è¿™ä¸ªä¾‹å­ç”¨äºè®¡ç®—2014å¹´4æœˆ16æ—¥å’Œ2015å¹´4æœˆ16æ—¥ä¹‹é—´çš„å¤©æ•°å’Œå°æ—¶æ•°ï¼Œè¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
```
Duration in days: 365
Duration in hours: 8783
```
å¯¹äºJava 8çš„æ–°æ—¥æœŸæ—¶é—´çš„æ€»ä½“å°è±¡è¿˜æ˜¯æ¯”è¾ƒç§¯æçš„ï¼Œä¸€éƒ¨åˆ†æ˜¯å› ä¸ºJoda-Timeçš„ç§¯æå½±å“ï¼Œå¦ä¸€éƒ¨åˆ†æ˜¯å› ä¸ºå®˜æ–¹ç»ˆäºå¬å–äº†å¼€å‘äººå‘˜çš„éœ€æ±‚ã€‚

### 11.Base64
å¯¹Base64ç¼–ç çš„æ”¯æŒå·²ç»è¢«åŠ å…¥åˆ°Java 8å®˜æ–¹åº“ä¸­ï¼Œè¿™æ ·ä¸éœ€è¦ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å°±å¯ä»¥è¿›è¡ŒBase64ç¼–ç ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š
```
package com.javacodegeeks.java8.base64;
 
import java.nio.charset.StandardCharsets;
import java.util.Base64;
 
public class Base64s {
    public static void main(String[] args) {
        final String text = "Base64 finally in Java 8!";
 
        final String encoded = Base64
            .getEncoder()
            .encodeToString( text.getBytes( StandardCharsets.UTF_8 ) );
        System.out.println( encoded );
 
        final String decoded = new String( 
            Base64.getDecoder().decode( encoded ),
            StandardCharsets.UTF_8 );
        System.out.println( decoded );
    }
}
```
è¿™ä¸ªä¾‹å­çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
```
QmFzZTY0IGZpbmFsbHkgaW4gSmF2YSA4IQ==
Base64 finally in Java 8!
```
æ–°çš„Base64APIä¹Ÿæ”¯æŒURLå’ŒMINEçš„ç¼–ç è§£ç ã€‚
**(Base64.getUrlEncoder() / Base64.getUrlDecoder(), Base64.getMimeEncoder() / Base64.getMimeDecoder())ã€‚**

### 12.Nashorn JavaScriptå¼•æ“
Java 8æä¾›äº†æ–°çš„Nashorn JavaScriptå¼•æ“ï¼Œä½¿å¾—æˆ‘ä»¬å¯ä»¥åœ¨JVMä¸Šå¼€å‘å’Œè¿è¡ŒJSåº”ç”¨ã€‚Nashorn JavaScriptå¼•æ“æ˜¯javax.script.ScriptEngineçš„å¦ä¸€ä¸ªå®ç°ç‰ˆæœ¬ï¼Œè¿™ç±»Scriptå¼•æ“éµå¾ªç›¸åŒçš„è§„åˆ™ï¼Œå…è®¸Javaå’ŒJavaScriptäº¤äº’ä½¿ç”¨ï¼Œä¾‹å­ä»£ç å¦‚ä¸‹ï¼š
```
ScriptEngineManager manager = new ScriptEngineManager();
ScriptEngine engine = manager.getEngineByName( "JavaScript" );
 
System.out.println( engine.getClass().getName() );
System.out.println( "Result:" + engine.eval( "function f() { return 1; }; f() + 1;" ) );
```
è¿™ä¸ªä»£ç çš„è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š
```
jdk.nashorn.api.scripting.NashornScriptEngine
Result: 2
```

### 13.å¹¶è¡Œæ•°ç»„
Java8ç‰ˆæœ¬æ–°å¢äº†å¾ˆå¤šæ–°çš„æ–¹æ³•ï¼Œç”¨äºæ”¯æŒå¹¶è¡Œæ•°ç»„å¤„ç†ã€‚æœ€é‡è¦çš„æ–¹æ³•æ˜¯parallelSort()ï¼Œå¯ä»¥æ˜¾è‘—åŠ å¿«å¤šæ ¸æœºå™¨ä¸Šçš„æ•°ç»„æ’åºã€‚ä¸‹é¢çš„ä¾‹å­è®ºè¯äº†parallexXxxç³»åˆ—çš„æ–¹æ³•ï¼š
```
package com.javacodegeeks.java8.parallel.arrays;
 
import java.util.Arrays;
import java.util.concurrent.ThreadLocalRandom;
 
public class ParallelArrays {
    public static void main( String[] args ) {
        long[] arrayOfLong = new long [ 20000 ];        
 
        Arrays.parallelSetAll( arrayOfLong, 
            index -> ThreadLocalRandom.current().nextInt( 1000000 ) );
        Arrays.stream( arrayOfLong ).limit( 10 ).forEach( 
            i -> System.out.print( i + " " ) );
        System.out.println();
 
        Arrays.parallelSort( arrayOfLong );        
        Arrays.stream( arrayOfLong ).limit( 10 ).forEach( 
            i -> System.out.print( i + " " ) );
        System.out.println();
    }
}
```
ä¸Šè¿°è¿™äº›ä»£ç ä½¿ç”¨parallelSetAll()æ–¹æ³•ç”Ÿæˆ20000ä¸ªéšæœºæ•°ï¼Œç„¶åä½¿ç”¨parallelSort()æ–¹æ³•è¿›è¡Œæ’åºã€‚è¿™ä¸ªç¨‹åºä¼šè¾“å‡ºä¹±åºæ•°ç»„å’Œæ’åºæ•°ç»„çš„å‰10ä¸ªå…ƒç´ ã€‚ä¸Šè¿°ä¾‹å­çš„ä»£ç è¾“å‡ºçš„ç»“æœæ˜¯ï¼š
```
Unsorted: 591217 891976 443951 424479 766825 351964 242997 642839 119108 552378 
Sorted: 39 220 263 268 325 607 655 678 723 793
```
### 14. å¹¶å‘æ€§
åŸºäºæ–°å¢çš„lambdaè¡¨è¾¾å¼å’Œsteamç‰¹æ€§ï¼Œä¸ºJava 8ä¸­ä¸ºjava.util.concurrent.ConcurrentHashMapç±»æ·»åŠ äº†æ–°çš„æ–¹æ³•æ¥æ”¯æŒèšç„¦æ“ä½œï¼›å¦å¤–ï¼Œä¹Ÿä¸ºjava.util.concurrentForkJoinPoolç±»æ·»åŠ äº†æ–°çš„æ–¹æ³•æ¥æ”¯æŒé€šç”¨çº¿ç¨‹æ± æ“ä½œï¼ˆæ›´å¤šå†…å®¹å¯ä»¥å‚è€ƒæˆ‘ä»¬çš„å¹¶å‘ç¼–ç¨‹è¯¾ç¨‹ï¼‰ã€‚

Java 8è¿˜æ·»åŠ äº†æ–°çš„java.util.concurrent.locks.StampedLockç±»ï¼Œç”¨äºæ”¯æŒåŸºäºå®¹é‡çš„é”â€”â€”è¯¥é”æœ‰ä¸‰ä¸ªæ¨¡å‹ç”¨äºæ”¯æŒè¯»å†™æ“ä½œï¼ˆå¯ä»¥æŠŠè¿™ä¸ªé”å½“åšæ˜¯java.util.concurrent.locks.ReadWriteLockçš„æ›¿ä»£è€…ï¼‰ã€‚

åœ¨java.util.concurrent.atomicåŒ…ä¸­ä¹Ÿæ–°å¢äº†ä¸å°‘å·¥å…·ç±»ï¼Œåˆ—ä¸¾å¦‚ä¸‹ï¼š
```
DoubleAccumulator
DoubleAdder
LongAccumulator
LongAdder
```
### 15.  JVMçš„æ–°ç‰¹æ€§
ä½¿ç”¨Metaspaceï¼ˆJEP 122ï¼‰ä»£æ›¿æŒä¹…ä»£ï¼ˆPermGen spaceï¼‰ã€‚åœ¨JVMå‚æ•°æ–¹é¢ï¼Œä½¿ç”¨-XX:MetaSpaceSizeå’Œ-XX:MaxMetaspaceSizeä»£æ›¿åŸæ¥çš„-XX:PermSizeå’Œ-XX:MaxPermSizeã€‚

**è·JAVA 8æ›´è¡Œå·²æœ‰æ•°å¹´ä¹‹ä¹…ï¼Œç°åœ¨çš„å­¦ä¹ è€…å¤§å¤šåœ¨ä¸€å¼€å§‹å°±å·²ç»é€‚åº”äº†JAVA 8 çš„æ–°ç‰¹æ€§ï¼Œå¦‚æœæƒ³è¦äº†è§£æ›´å¤šå…³äºJAVA 8æ–°ç‰¹æ€§çš„ç»†èŠ‚ä¸€å®šè¦æµè§ˆå®˜ç½‘æ–‡æ¡£å“¦~ï¼ï¼!**

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)
