> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

æœ¬ç¯‡æ–‡ç« ä¸º ```Spring Security``` ç³»åˆ—æ–‡ç« çš„æ¦‚è¿°ç¯‡ï¼Œä¸»è¦ä»‹ç»äº†```Spring Security```çš„å‰ä¸–ä»Šç”Ÿã€æä¾›çš„ä¸»è¦åŠŸèƒ½ã€ä»¥åŠå…¶å®ç°åŸç†çš„ç²—ç•¥æ¢è®¨ã€‚

![è¿‡æ»¤å™¨é“¾](https://img-blog.csdnimg.cn/20200913225028240.png)

## å‰ä¸–ä»Šç”Ÿ

Spring Securityçš„å‰èº«å¹¶éç§°å‘¼ä¸ºSpring Securityï¼Œè€Œæ˜¯å«Acegi Securityï¼›ä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒä¸Springæ¯«æ— å…³ç³»ï¼Œå®ƒä»ç„¶æ˜¯ä¸ºSpringæä¾›å®‰å…¨æ”¯æŒçš„ã€‚

Acegi Securityæ­ä¸Šäº†Springçš„ä¾¿è½¦ï¼Œæ‘‡èº«ä¸€å˜æˆä¸ºSpring Securityï¼Œä½†å³ä¾¿å¦‚æ­¤å…¶è¿˜æ˜¯ç»§æ‰¿äº†Acegi Securityçš„è‡ƒè‚¿ç¹ççš„é…ç½®ï¼Œå­¦ä¹ æˆæœ¬ç›¸å¯¹è¿˜æ˜¯ååˆ†çš„é«˜ã€‚

ç›´åˆ°æœ‰ä¸€å¤©ï¼ŒSpring Bootæ¨ªç©ºå‡ºä¸–ï¼Œæå‡ºçº¦å®šä¼˜äºé…ç½®ç­‰ç†å¿µï¼Œæå¤§çš„ç®€åŒ–äº†ç¹ççš„é…ç½®ï¼›Spring Securityä¹Ÿæ”¶ç›Šäºæ­¤ï¼Œä¸€é£å†²å¤©ã€‚

## åŠŸèƒ½ä»‹ç»

å®‰å…¨è¿™ä¸ªè¯é¢˜ç»•ä¸å¼€ ```è®¤è¯``` å’Œ ```æˆæƒ``` è¿™ä¸¤ä¸ªæ–¹é¢ï¼ŒSpring Securityä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå…¶ä½œä¸ºä¸€ä¸ªæƒé™ç®¡ç†æ¡†æ¶ï¼Œæœ€æ ¸å¿ƒçš„åŠŸèƒ½æœ‰ï¼š

- è®¤è¯ï¼ˆä½ æ˜¯è°ï¼Ÿï¼‰

- æˆæƒï¼ˆä½ èƒ½åšä»€ä¹ˆï¼Ÿï¼‰

- æ”»å‡»é˜²æŠ¤ï¼ˆé˜²æ­¢ä¼ªé€ èº«ä»½)

Spring Securityæä¾›äº†å¾ˆå¤šçš„è®¤è¯å’Œæˆæƒæ–¹æ¡ˆï¼Œä½†ä½œä¸ºä¸€ä¸ªä¼˜ç§€çš„å¼€æ”¾æ¡†æ¶ï¼Œå®ƒçš„ä¼˜ç‚¹æ›´åœ¨äºâ€œæ‰©å±•æ€§â€ï¼Œå½“å…¶æä¾›çš„è®¤è¯æˆ–æˆæƒæ–¹æ¡ˆæ— æ³•æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰è®¤è¯æˆ–æˆæƒé€»è¾‘ã€‚ä¾‹å¦‚åç»­ä¼šè®²è§£åˆ°çš„ã€Šè®¤è¯ï¼ˆä¸‰ï¼‰ï¼šéªŒè¯ç è®¤è¯ç™»å½•æ¨¡å¼ã€‹ã€‚

## å®ç°åŸç†

Spring Securityåº•å±‚æ˜¯é€šè¿‡ä¸€ç»„è¿‡æ»¤å™¨é“¾æ¥å®ç°çš„ï¼Œè¿‡æ»¤å™¨é“¾ä¸Šçš„æ¯ä¸ª ```Filter``` å„å¸å…¶èŒï¼Œä½†åŒæ—¶åˆç›¸äº’å…³è”ï¼›å› æ­¤äº†è§£ ```Filter``` çš„é¡ºåºå°±æ˜¾å¾—ååˆ†çš„é‡è¦ï¼Œä¸‹é¢ä¼šä»‹ç»å‡ ä¸ªæ¯”è¾ƒæ ¸å¿ƒçš„```Filter```ã€‚

![è¿‡æ»¤å™¨é“¾](https://note.youdao.com/yws/api/personal/file/7831A84E495D411DB71F97709042E35D?method=download&shareKey=85256209e68294593a6376aa52d2429a)

å¦‚å›¾æ‰€ç¤ºï¼Œä¸€ä¸ªè¯·æ±‚åœ¨åˆ°è¾¾APIä¹‹å‰ä¼šç»è¿‡Spring Securityçš„è¿‡æ»¤å™¨é“¾è¿›è¡Œæ ¡éªŒï¼Œåªæœ‰"åˆæ³•è§„èŒƒ"çš„è¯·æ±‚æ‰èƒ½è¢«APIæ‰€æ¥æ”¶ã€‚

è§å…‰ç»¿çš„éƒ½å±è®¤è¯è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½®å…¶æ˜¯å¦ç”Ÿæ•ˆï¼Œä¹Ÿå¯ä»¥è‡ªå®šä¹‰è®¤è¯è¿‡æ»¤å™¨æ·»åŠ åˆ°è¿‡æ»¤å™¨é“¾ä¸Šï¼Œå¯æ§æ€§ç›¸å¯¹æ¯”è¾ƒé«˜ï¼›å…¶ä»–çš„æ·±è“è‰²```ExceptionTranslationFilter```å’Œæ©˜è‰²```FilterSecurityinterecptor```åˆ™æ²¡æ³•éšæ„çš„æ§åˆ¶ã€‚

å¤‡æ³¨ï¼šä¸ºé¿å…å¼•å…¥è¿‡å¤šçš„æ¦‚å¿µï¼Œè¯¥è¿‡æ»¤å™¨é“¾å¹¶éå®Œæ•´çš„é“¾è·¯å›¾ï¼Œåªæ˜¯æˆªå›¾äº†éƒ¨åˆ†è¿‡æ»¤å™¨ã€‚

### è¡¨å•ç™»å½•è¿‡æ»¤å™¨

```UsernamePasswordAuthenticationFilter``` æ˜¯è¡¨å•ç™»å½•è¿‡æ»¤å™¨ï¼Œè¡¨å•ç™»å½•ä¹Ÿæ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„ç™»å½•æ–¹å¼ï¼›å¯¹äºè¡¨å•ç™»å½•è¿‡æ»¤å™¨æ¥è¯´ï¼Œå®ƒçš„ä¸»è¦èŒè´£ä¸ºï¼š

- æ£€æŸ¥è¯·æ±‚æ˜¯å¦ä¸ºç™»å½•è¯·æ±‚&æ£€æŸ¥è¯·æ±‚ä¸­æ˜¯å¦å«æœ‰è‡ªèº«éœ€è¦çš„è®¤è¯ä¿¡æ¯ï¼ˆusernameã€passwordï¼‰ã€‚

- å¦‚æœä¸æ»¡è¶³åˆ™æ”¾è¡Œè®©ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨è¿›è¡Œæ ¡éªŒï¼Œå¦‚ç¬¦åˆè‡ªèº«è®¤è¯è¦æ±‚åˆ™è¿›è¡Œè®¤è¯ã€‚

### Basicè®¤è¯è¿‡æ»¤å™¨

```BasicAuthenticationFilter``` è¿‡æ»¤å™¨æ˜¯ç”¨æ¥å¤„ç†```Http```è¯·æ±‚ä¸­çš„```Basic Authorization```å¤´éƒ¨ï¼›å½“ä¸€ä¸ª ```Http```è¯·æ±‚å¤´(```Reqeust Header```)ä¸­åŒ…å«```Authorization```ï¼Œå¹¶ä¸”å…¶å€¼ä¸º ```Basic xxx```çš„æ—¶å€™ï¼Œ```BasicAuthenticationFilter```å°±ä¼šç”Ÿæ•ˆã€‚

ä¸»è¦èŒè´£ï¼š

- å°è¯•è§£æ ```Http basic authorization```è·å–ç›¸åº”çš„è®¤è¯ä¿¡æ¯ï¼ˆusernameã€passwordï¼‰ã€‚

- å¦‚æœä¸æ»¡è¶³åˆ™æ”¾è¡Œè®©ä¸‹ä¸€ä¸ªè¿‡æ»¤å™¨è¿›è¡Œæ ¡éªŒï¼Œå¦‚ç¬¦åˆåˆ™è‡ªèº«è¿›è¡Œè®¤è¯ã€‚

### å¼‚å¸¸è½¬æ¢è¿‡æ»¤å™¨

```ExceptionTranslationFilter``` æ˜¯ä¸€ä¸ªå¼‚å¸¸è¿‡æ»¤å™¨ï¼Œç”¨æ¥å¤„ç† ```è®¤è¯``` æˆ– ```æˆæƒ```è¿‡ç¨‹ä¸­æŠ›å‡ºçš„å¼‚å¸¸ï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£ï¼›æ­£å¦‚æˆ‘ä»¬è‡ªèº«é¡¹ç›®ä¼šæœ‰å¼‚å¸¸å¤„ç†ä¸€èˆ¬ï¼Œ```Spring Security```ä¹Ÿæœ‰å¯¹åº”çš„å¼‚å¸¸å¤„ç†æœºåˆ¶ã€‚

è¯¥è¿‡æ»¤å™¨çš„ä¸»è¦èŒè´£æ˜¯å¯¹åœ¨ ```FilterChain``` èŒƒå›´å†…æŠ›å‡ºçš„```AccessDeniedException(æˆæƒå¼‚å¸¸åŸºç±»)``` å’Œ ```AuthenticationException(è®¤è¯å¼‚å¸¸åŸºç±»)```ï¼Œè½¬æ¢ä¸ºå¯¹åº”çš„```HTTP```é”™è¯¯ç è¿”å›æˆ–è€…è¿”å›å¯¹åº”çš„é¡µé¢ã€‚

### FilterSecurityInterceptorè¿‡æ»¤å™¨

```FilterSecurityInterceptor```è¿‡æ»¤å™¨ä½äºè¿‡æ»¤å™¨é“¾ä¸Šçš„æœ€åä¸€ç¯ï¼Œå…¶ä¸»è¦è´Ÿè´£çš„æ˜¯ï¼šæƒé™çš„æ ¡éªŒï¼›åˆ¤æ–­è¯·æ±‚çš„ç”¨æˆ·æ˜¯å¦æœ‰æƒé™è®¿é—®è¯¥APIã€‚ä¿æŠ¤web Uri å¹¶ä¸”åœ¨è®¿é—®è¢«æ‹’ç»æ—¶æŠ›å‡ºå¼‚å¸¸ã€‚

## æ€»ç»“

æœ¬ç¯‡æ–‡ç« ä¸º ```Spring Security``` ç³»åˆ—æ–‡ç« çš„æ¦‚è¿°ç¯‡ï¼Œä¸»è¦ä»‹ç»äº†```Spring Security```çš„å‰ä¸–ä»Šç”Ÿã€æä¾›çš„ä¸»è¦åŠŸèƒ½ã€ä»¥åŠå…¶å®ç°åŸç†çš„ç²—ç•¥æ¢è®¨ã€‚åé¢æˆ‘ç»§ç»­è·Ÿå¤§å®¶æ·±å…¥è®²è§£ã€‚

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----