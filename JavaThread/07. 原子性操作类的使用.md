> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

åœ¨ java5 ä»¥åï¼Œæˆ‘ä»¬æ¥è§¦åˆ°äº†çº¿ç¨‹åŸå­æ€§æ“ä½œï¼Œä¹Ÿå°±æ˜¯åœ¨ä¿®æ”¹æ—¶æˆ‘ä»¬åªéœ€è¦ä¿è¯å®ƒçš„é‚£ä¸ªç¬é—´æ˜¯å®‰å…¨çš„å³å¯ï¼Œç»è¿‡ç›¸åº”çš„åŒ…è£…åå¯ä»¥å†å¤„ç†å¯¹è±¡çš„å¹¶å‘ä¿®æ”¹ï¼Œæœ¬æ–‡æ€»ç»“ä¸€ä¸‹Atomicç³»åˆ—çš„ç±»çš„ä½¿ç”¨æ–¹æ³•ï¼Œå…¶ä¸­åŒ…å«ï¼š

| ç±»å‹ | Integer | Long |  |
| :--------: | :--------:| :--: | :--: |
|åŸºæœ¬ç±»å‹|AtomicInteger|AtomicLong|AtomicBoolean|
|æ•°ç»„ç±»å‹|AtomicIntegerArray|AtomicLongArray|AtomicReferenceArray|
|å±æ€§åŸå­ä¿®æ”¹å™¨|AtomicIntegerFieldUpdater|AtomicLongFieldUpdater|AtomicReferenceFieldUpdater|

### 1. åŸºæœ¬ç±»å‹çš„ä½¿ç”¨

é¦–å…ˆçœ‹ä¸€ä¸‹AtomicIntegerçš„ä½¿ç”¨ï¼ŒAtomicIntegerä¸»è¦æ˜¯é’ˆå¯¹æ•´æ•°çš„ä¿®æ”¹çš„ï¼Œçœ‹ä¸€ä¸‹ç¤ºä¾‹ä»£ç ï¼š
```java
public class AtomicIntegerDemo {

	/**
	 * å¸¸è§çš„æ–¹æ³•åˆ—è¡¨
	 * @see AtomicInteger#get()             ç›´æ¥è¿”å›å€¼
	 * @see AtomicInteger#getAndAdd(int)    å¢åŠ æŒ‡å®šçš„æ•°æ®ï¼Œè¿”å›å˜åŒ–å‰çš„æ•°æ®
	 * @see AtomicInteger#getAndDecrement() å‡å°‘1ï¼Œè¿”å›å‡å°‘å‰çš„æ•°æ®
	 * @see AtomicInteger#getAndIncrement() å¢åŠ 1ï¼Œè¿”å›å¢åŠ å‰çš„æ•°æ®
	 * @see AtomicInteger#getAndSet(int)    è®¾ç½®æŒ‡å®šçš„æ•°æ®ï¼Œè¿”å›è®¾ç½®å‰çš„æ•°æ®
	 * 
	 * @see AtomicInteger#addAndGet(int)    å¢åŠ æŒ‡å®šçš„æ•°æ®åè¿”å›å¢åŠ åçš„æ•°æ®
	 * @see AtomicInteger#decrementAndGet() å‡å°‘1ï¼Œè¿”å›å‡å°‘åçš„å€¼
	 * @see AtomicInteger#incrementAndGet() å¢åŠ 1ï¼Œè¿”å›å¢åŠ åçš„å€¼
	 * @see AtomicInteger#lazySet(int)      ä»…ä»…å½“getæ—¶æ‰ä¼šset
	 * 
	 * @see AtomicInteger#compareAndSet(int, int) å°è¯•æ–°å¢åå¯¹æ¯”ï¼Œè‹¥å¢åŠ æˆåŠŸåˆ™è¿”å›trueå¦åˆ™è¿”å›false
	 */
	public final static AtomicInteger TEST_INTEGER = new AtomicInteger(1);
	
	public static void main(String []args) {

		 for(int i = 0 ; i < 10 ; i++) { //å¼€å¯10ä¸ªçº¿ç¨‹

			 new Thread() {
				 public void run() {
					 try {
						Thread.sleep(1000);
					} catch (InterruptedException e) {
						e.printStackTrace();
					}
					int now = TEST_INTEGER.incrementAndGet(); //è‡ªå¢
					System.out.println(Thread.currentThread().getName() + " get value : " + now);
				 }
			 }.start();
		 }
	}
}
```
çœ‹ä¸€ä¸‹ç»“æœï¼š
>Thread-3 get value : 4<br>
Thread-7 get value : 5<br>
Thread-9 get value : 9<br>
Thread-4 get value : 6<br>
Thread-0 get value : 3<br>
Thread-1 get value : 8<br>
Thread-5 get value : 11<br>
Thread-8 get value : 7<br>
Thread-2 get value : 10<br>
Thread-6 get value : 2<br>

å¯ä»¥çœ‹å‡ºï¼Œ10ä¸ªçº¿ç¨‹ä¹‹é—´æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå¹¶æ²¡æœ‰å†²çªã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨åŸå­æ€§æ“ä½œç±»å»æ“ä½œåŸºæœ¬ç±»å‹intå°±å¯ä»¥è§£å†³çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œä¸€ä¸ªçº¿ç¨‹åœ¨æ“ä½œçš„æ—¶å€™ï¼Œä¼šå¯¹å…¶å®ƒçº¿ç¨‹è¿›è¡Œæ’æ–¥ï¼Œä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨å»ä½¿ç”¨synchronizedå®ç°äº’æ–¥æ“ä½œäº†ã€‚AtomicLongå’ŒAtomicBooleanç±»ä¼¼ï¼Œå°±ä¸ä¸¾ä¾‹å­äº†ã€‚

### 2. æ•°ç»„ç±»å‹çš„ä½¿ç”¨

ä¸‹é¢è¦å¼€å§‹è¯´Atomicçš„æ•°ç»„ç”¨æ³•ï¼ŒAtomicçš„æ•°ç»„è¦æ±‚ä¸å…è®¸ä¿®æ”¹é•¿åº¦ç­‰ï¼Œä¸åƒé›†åˆç±»é‚£ä¹ˆä¸°å¯Œçš„æ“ä½œï¼Œä¸è¿‡å®ƒå¯ä»¥è®©æ•°ç»„ä¸Šæ¯ä¸ªå…ƒç´ çš„æ“ä½œç»å¯¹å®‰å…¨çš„ï¼Œä¹Ÿå°±æ˜¯å®ƒç»†åŒ–çš„åŠ›åº¦è¿˜æ˜¯åˆ°æ•°ç»„ä¸Šçš„å…ƒç´ ï¼Œåšäº†äºŒæ¬¡åŒ…è£…ï¼Œè™½ç„¶æ˜¯æ•°ç»„ç±»å‹çš„ï¼Œä½†æ˜¯æœ€åè¿˜æ˜¯æ“ä½œæ•°ç»„ä¸­å­˜çš„æ•°ï¼Œæ‰€ä»¥ä¼šäº†ä¸Šé¢çš„åŸºæœ¬ç±»å‹çš„è¯ï¼Œæ•°ç»„ç±»å‹ä¹Ÿå¾ˆå¥½ç†è§£ã€‚è¿™é‡Œä¸»è¦çœ‹ä¸€ä¸‹AtomicIntegerArrayçš„ä½¿ç”¨ï¼Œå…¶å®ƒçš„ç±»ä¼¼ã€‚
```java
public class AtomicIntegerArrayTest {

	/**
	 * å¸¸è§çš„æ–¹æ³•åˆ—è¡¨
	 * @see AtomicIntegerArray#addAndGet(int, int) æ‰§è¡ŒåŠ æ³•ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ•°ç»„çš„ä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºå¢åŠ çš„æ•°é‡ï¼Œè¿”å›å¢åŠ åçš„ç»“æœ
	 * @see AtomicIntegerArray#compareAndSet(int, int, int) å¯¹æ¯”ä¿®æ”¹ï¼Œå‚æ•°1ï¼šæ•°ç»„ä¸‹æ ‡ï¼Œå‚æ•°2ï¼šåŸå§‹å€¼ï¼Œå‚æ•°3ï¼Œä¿®æ”¹ç›®æ ‡å€¼ï¼Œä¿®æ”¹æˆåŠŸè¿”å›trueå¦åˆ™false
	 * @see AtomicIntegerArray#decrementAndGet(int) å‚æ•°ä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œå°†æ•°ç»„å¯¹åº”æ•°å­—å‡å°‘1ï¼Œè¿”å›å‡å°‘åçš„æ•°æ®
	 * @see AtomicIntegerArray#incrementAndGet(int) å‚æ•°ä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œå°†æ•°ç»„å¯¹åº”æ•°å­—å¢åŠ 1ï¼Œè¿”å›å¢åŠ åçš„æ•°æ®
	 * 
	 * @see AtomicIntegerArray#getAndAdd(int, int) å’ŒaddAndGetç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è¿”å›å€¼æ˜¯å˜åŒ–å‰çš„æ•°æ®
	 * @see AtomicIntegerArray#getAndDecrement(int) å’ŒdecrementAndGetç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è¿”å›å˜åŒ–å‰çš„æ•°æ®
	 * @see AtomicIntegerArray#getAndIncrement(int) å’ŒincrementAndGetç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯è¿”å›å˜åŒ–å‰çš„æ•°æ®
	 * @see AtomicIntegerArray#getAndSet(int, int) å°†å¯¹åº”ä¸‹æ ‡çš„æ•°å­—è®¾ç½®ä¸ºæŒ‡å®šå€¼ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºè®¾ç½®çš„å€¼ï¼Œè¿”å›æ˜¯å˜åŒ–å‰çš„æ•°æ®
	 */
	private final static AtomicIntegerArray ATOMIC_INTEGER_ARRAY = new AtomicIntegerArray(new int[]{1,2,3,4,5,6,7,8,9,10});
	
	public static void main(String []args) throws InterruptedException {
		Thread []threads = new Thread[10];
		for(int i = 0 ; i < 10 ; i++) {
			final int index = i;
			final int threadNum = i;
			threads[i] = new Thread() {
				public void run() {
					int result = ATOMIC_INTEGER_ARRAY.addAndGet(index, index + 1);
					System.out.println("çº¿ç¨‹ç¼–å·ä¸ºï¼š" + threadNum + " , å¯¹åº”çš„åŸå§‹å€¼ä¸ºï¼š" + (index + 1) + "ï¼Œå¢åŠ åçš„ç»“æœä¸ºï¼š" + result);
				}
			};
			threads[i].start();
		}
		for(Thread thread : threads) {
			thread.join();
		}
		System.out.println("=========================>\næ‰§è¡Œå·²ç»å®Œæˆï¼Œç»“æœåˆ—è¡¨ï¼š");
		for(int i = 0 ; i < ATOMIC_INTEGER_ARRAY.length() ; i++) {
			System.out.println(ATOMIC_INTEGER_ARRAY.get(i));
		}
	}
}
```
è¿è¡Œç»“æœæ˜¯ç»™æ¯ä¸ªæ•°ç»„å…ƒç´ åŠ ä¸Šç›¸åŒçš„å€¼ï¼Œå®ƒä»¬ä¹‹é—´äº’ä¸å½±å“ã€‚

### 3. ä½œä¸ºç±»å±æ€§çš„ä½¿ç”¨

å½“æŸä¸ªæ•°æ®ç±»å‹æ˜¯æŸä¸ªç±»ä¸­çš„ä¸€ä¸ªå±æ€§çš„æ—¶å€™ï¼Œç„¶åæˆ‘ä»¬è¦æ“ä½œè¯¥æ•°æ®ï¼Œå°±éœ€è¦ä½¿ç”¨å±æ€§åŸå­ä¿®æ”¹å™¨äº†ï¼Œè¿™é‡Œè¿˜æ˜¯ä»¥Integerä¸ºä¾‹ï¼Œå³ï¼šAtomicIntegerFieldUpdaterã€‚ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š
```java
public class AtomicIntegerFieldUpdaterTest {  
	  
    static class A {  
        volatile int intValue = 100;  
    }  
      
    /** 
     * å¯ä»¥ç›´æ¥è®¿é—®å¯¹åº”çš„å˜é‡ï¼Œè¿›è¡Œä¿®æ”¹å’Œå¤„ç† 
     * æ¡ä»¶ï¼šè¦åœ¨å¯è®¿é—®çš„åŒºåŸŸå†…ï¼Œå¦‚æœæ˜¯privateæˆ–æŒåŒ…è®¿é—®defaultç±»å‹ä»¥åŠéçˆ¶äº²ç±»çš„protectedå‡æ— æ³•è®¿é—®åˆ° 
     * å…¶æ¬¡è®¿é—®å¯¹è±¡ä¸èƒ½æ˜¯staticç±»å‹çš„å˜é‡ï¼ˆå› ä¸ºåœ¨è®¡ç®—å±æ€§çš„åç§»é‡çš„æ—¶å€™æ— æ³•è®¡ç®—ï¼‰ï¼Œä¹Ÿä¸èƒ½æ˜¯finalç±»å‹çš„å˜é‡ï¼ˆå› ä¸ºæ ¹æœ¬æ— æ³•ä¿®æ”¹ï¼‰ï¼Œå¿…é¡»æ˜¯æ™®é€šçš„æˆå‘˜å˜é‡ 
     *  
     * æ–¹æ³•ï¼ˆè¯´æ˜ä¸Šå’ŒAtomicIntegerå‡ ä¹ä¸€è‡´ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ç¬¬ä¸€ä¸ªå‚æ•°éœ€è¦ä¼ å…¥å¯¹è±¡çš„å¼•ç”¨ï¼‰ 
     * @see AtomicIntegerFieldUpdater#addAndGet(Object, int) 
     * @see AtomicIntegerFieldUpdater#compareAndSet(Object, int, int) 
     * @see AtomicIntegerFieldUpdater#decrementAndGet(Object) 
     * @see AtomicIntegerFieldUpdater#incrementAndGet(Object) 
     *  
     * @see AtomicIntegerFieldUpdater#getAndAdd(Object, int) 
     * @see AtomicIntegerFieldUpdater#getAndDecrement(Object) 
     * @see AtomicIntegerFieldUpdater#getAndIncrement(Object) 
     * @see AtomicIntegerFieldUpdater#getAndSet(Object, int) 
     */  
    public final static AtomicIntegerFieldUpdater<A> ATOMIC_INTEGER_UPDATER = AtomicIntegerFieldUpdater.newUpdater(A.class, "intValue");  
      
    public static void main(String []args) {  
        final A a = new A();  
        for(int i = 0 ; i < 10 ; i++) {  

            new Thread() {  
                public void run() {  
                    if(ATOMIC_INTEGER_UPDATER.compareAndSet(a, 100, 120)) {  
                        System.out.println(Thread.currentThread().getName() + " å¯¹å¯¹åº”çš„å€¼åšäº†ä¿®æ”¹ï¼");  
                    }  
                }  
            }.start();  
        }  
    }  
}  
```
å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œéœ€è¦å°†ç±»å’Œç±»å±æ€§ä¼ è¿›å»æ‰è¡Œï¼Œä¼ è¿›å»åå…¶å®è·Ÿå‰é¢æ“ä½œIntegeræ²¡ä»€ä¹ˆä¸åŒäº†ï¼Œæœ¬è´¨éƒ½ä¸€æ ·çš„ï¼Œè¿è¡Œä¸€ä¸‹ï¼Œç»“æœåªæœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚

çº¿ç¨‹çš„åŸå­æ€§æ“ä½œç±»çš„ä½¿ç”¨å°±ç®€å•æ€»ç»“åˆ°è¿™ï¼Œå…¶ä»–çš„æ“ä½œç±»åŸç†éƒ½ç›¸ä¼¼ï¼Œå¯ä»¥å‚è€ƒ JDK çš„æ–‡æ¡£ï¼Œå¯ä»¥å¾ˆå®¹æ˜“å†™å‡ºç›¸åº”çš„æµ‹è¯•ä»£ç ã€‚

åŸå­æ€§æ“ä½œç±»çš„ä½¿ç”¨å°±åˆ†äº«è¿™ä¹ˆå¤šï¼Œå¦‚æœ‰é”™è¯¯ä¹‹å¤„ï¼Œæ¬¢è¿æŒ‡æ­£ï¼Œæˆ‘ä»¬ä¸€åŒè¿›æ­¥~

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----