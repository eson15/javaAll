> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨synchronizedå…³é”®å­—å¯ä»¥æœ‰æ•ˆçš„è§£å†³çº¿ç¨‹åŒæ­¥é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœä¸æ°å½“çš„ä½¿ç”¨synchronizedå…³é”®å­—çš„è¯ä¹Ÿä¼šå‡ºé—®é¢˜ï¼Œå³æˆ‘ä»¬æ‰€è¯´çš„æ­»é”ã€‚æ­»é”æ˜¯è¿™æ ·ä¸€ç§æƒ…å½¢ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è¢«é˜»å¡ï¼Œå®ƒä»¬ä¸­çš„ä¸€ä¸ªæˆ–è€…å…¨éƒ¨éƒ½åœ¨ç­‰å¾…æŸä¸ªèµ„æºè¢«é‡Šæ”¾ã€‚ç”±äºçº¿ç¨‹è¢«æ— é™æœŸåœ°é˜»å¡ï¼Œå› æ­¤ç¨‹åºä¸å¯èƒ½æ­£å¸¸ç»ˆæ­¢ã€‚ 

ä¸‹é¢å†™ä¸€ä¸ªæ­»é”çš„ä¾‹å­åŠ æ·±ç†è§£ã€‚å…ˆçœ‹ç¨‹åºï¼Œå†æ¥åˆ†æä¸€ä¸‹æ­»é”äº§ç”Ÿçš„åŸå› ï¼š

```java
public class DeadLock {

	public static void main(String[] args) {
		Business business = new Business1();
		//å¼€å¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒBusinessç±»ä¸­çš„functionAæ–¹æ³•
		new Thread(new Runnable() {
			
			@Override
			public void run() {
				while(true) {
					business.functionA();
				}
			}
		}).start();
		
		//å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡ŒBusinessç±»ä¸­çš„functionBæ–¹æ³•
		new Thread(new Runnable() {
			
			@Override
			public void run() {
				while(true) {
					business.functionB();
				}
			}
		}).start();
	}

}

class Business { //å®šä¹‰ä¸¤ä¸ªé”ï¼Œä¸¤ä¸ªæ–¹æ³•
	//å®šä¹‰ä¸¤ä¸ªé”
	public static final Object lock_a = new Object();
	public static final Object lock_b = new Object();	
	
	public void functionA() {
		synchronized(lock_a) {
			System.out.println("---ThreadA---lock_a---");
			synchronized(lock_b) {
				System.out.println("---ThreadA---lock_b---");
			}
		}
	}
	
	public void functionB() {
		synchronized(lock_b) {
			System.out.println("---ThreadB---lock_b---");
			synchronized(lock_a) {
				System.out.println("---ThreadB---lock_a---");
			}
		}
	}
}
```
ç¨‹åºç»“æ„å¾ˆæ¸…æ™°ï¼Œæ²¡ä»€ä¹ˆéš¾åº¦ï¼Œå…ˆçœ‹ä¸€ä¸‹ç¨‹åºçš„æ‰§è¡Œç»“æœï¼š
>---ThreadA---lock_a---<br>
>---ThreadA---lock_b---<br>
>---ThreadA---lock_a---<br>
>---ThreadA---lock_b---<br>
>---ThreadA---lock_a---<br>
>---ThreadA---lock_b---<br>
>---ThreadA---lock_a---<br>
>---ThreadB---lock_b---<br>

ä»æ‰§è¡Œç»“æœæ¥çœ‹ï¼Œçº¿ç¨‹Aè·‘ç€è·‘ç€ï¼Œå½“çº¿ç¨‹Bä¸€è·‘ï¼Œå•ªå½ä¸€ä¸‹å°±æŒ‚äº†ï¼

æˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹åŸå› ï¼šä»ä¸Šé¢çš„ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå®šä¹‰äº†ä¸€ä¸ªç±»Businessï¼Œè¯¥ç±»ä¸­ç»´æŠ¤äº†ä¸¤ä¸ªé”å’Œä¸¤ä¸ªæ–¹æ³•ï¼Œæ¯ä¸ªæ–¹æ³•éƒ½æ˜¯synchronizedè¿ç¯å¥—ï¼Œå¹¶ä¸”ä½¿ç”¨çš„æ˜¯ä¸åŒçš„é”ã€‚å¥½äº†ï¼Œç°åœ¨mainæ–¹æ³•ä¸­å¼€å¯ä¸¤ä¸ªçº¿ç¨‹Aå’ŒBï¼Œåˆ†åˆ«æ‰§è¡ŒBusinessç±»ä¸­çš„ä¸¤ä¸ªæ–¹æ³•ã€‚Aä¼˜å…ˆæ‰§è¡Œï¼Œè·‘çš„å¾ˆçˆ½ï¼Œå½“Bçº¿ç¨‹ä¹Ÿå¼€å§‹æ‰§è¡Œçš„æ—¶å€™ï¼Œé—®é¢˜æ¥äº†ï¼Œä»æ‰§è¡Œç»“æœçš„æœ€åä¸¤è¡Œæ¥çœ‹ï¼ŒAçº¿ç¨‹è¿›å…¥äº†functionAæ–¹æ³•ä¸­çš„ç¬¬ä¸€ä¸ªsynchronizedï¼Œæ‹¿åˆ°äº†lock_aé”ï¼ŒBçº¿ç¨‹è¿›å…¥äº†functionBä¸­çš„ç¬¬ä¸€ä¸ªsynchronizedï¼Œæ‹¿åˆ°äº†lock_bé”ï¼Œå¹¶ä¸”ä¸¤è€…çš„é”éƒ½è¿˜æ²¡é‡Šæ”¾ã€‚æ¥ä¸‹æ¥å°±æ˜¯å…³é”®äº†ï¼šAçº¿ç¨‹è¿›å…¥ç¬¬äºŒä¸ªsynchronizedçš„æ—¶å€™ï¼Œå‘ç°lock_bæ­£åœ¨è¢«Bå ç”¨ï¼Œé‚£æ²¡åŠæ³•ï¼Œå®ƒåªå¥½è¢«é˜»å¡ï¼Œç­‰å‘—~åŒæ ·åœ°ï¼ŒBçº¿ç¨‹è¿›å…¥ç¬¬äºŒä¸ªsynchronizedçš„æ—¶å€™ï¼Œå‘ç°lock_aæ­£åœ¨è¢«Aå ç”¨ï¼Œé‚£æ²¡åŠæ³•ï¼Œå®ƒä¹Ÿåªå¥½è¢«é˜»å¡ï¼Œç­‰å‘—ï¼å¥½äº†ï¼Œä¸¤ä¸ªå°±è¿™æ ·äº’ç›¸ç­‰ç€ï¼Œä½ ä¸æ”¾ï¼Œæˆ‘ä¹Ÿä¸æ”¾â€¦â€¦æ­»äº†â€¦â€¦

ä¸Šé¢è¿™ä¸ªç¨‹åºå¯¹äºç†è§£æ­»é”å¾ˆæœ‰å¸®åŠ©ï¼Œå› ä¸ºç»“æ„å¾ˆå¥½ï¼Œä¸è¿‡ä¸ªäººæ„Ÿè§‰è¿™ä¸ªæ­»çš„è¿˜ä¸è¿‡ç˜¾ï¼Œå› ä¸ºä¸¤ä¸ªçº¿ç¨‹æ˜¯å®ç°äº†ä¸¤ä¸ªä¸åŒçš„Runnableæ¥å£ï¼Œåªä¸è¿‡è°ƒç”¨äº†åŒä¸€ä¸ªç±»çš„ä¸¤ä¸ªæ–¹æ³•è€Œå·²ï¼Œå› ä¸ºæˆ‘æŠŠè¦åŒæ­¥çš„æ–¹æ³•æ”¾åˆ°ä¸€ä¸ªç±»ä¸­äº†ã€‚ä¸‹é¢æˆ‘æŠŠç¨‹åºæ”¹ä¸€ä¸‹ï¼ŒæŠŠè¦åŒæ­¥çš„ä»£ç æ”¾åˆ°ä¸€ä¸ªRunnableä¸­ï¼Œè®©å®ƒä¸€è¿è¡Œå°±æŒ‚æ‰â€¦â€¦

```java
public class DeadLock {	
	
	public static void main(String[] args) {		
		
		//å¼€å¯ä¸¤ä¸ªçº¿ç¨‹ï¼Œåˆ†åˆ«æ‰”ä¸¤ä¸ªè‡ªå®šä¹‰çš„Runnableè¿›å»
		new Thread(new MyRunnable(true)).start();;
		new Thread(new MyRunnable(false)).start();;

	}
}

class MyRunnable implements Runnable
{
	private boolean flag; //ç”¨äºåˆ¤æ–­ï¼Œæ‰§è¡Œä¸åŒçš„åŒæ­¥ä»£ç å—
	
	MyRunnable(boolean flag) { //æ„é€ æ–¹æ³•
		this.flag = flag;
	}
	
	@Override
	public void run()
	{
		if(flag)
		{
			while(true){			
				synchronized(MyLock.lock_a)
				{
					System.out.println("--threadA---lock_a--");
					synchronized(MyLock.lock_b)
					{
						System.out.println("--threadA---lock_b--");
					}	
				}
			}
		}
		else
		{
			while(true){			
				synchronized(MyLock.lock_b)
				{
					System.out.println("--threadB---lock_a--");
					synchronized(MyLock.lock_a)
					{
						System.out.println("--threadB---lock_b--");
					}	
				}
			}
		}
	}
}

class MyLock //æŠŠä¸¤æŠŠé”æ”¾åˆ°ä¸€ä¸ªç±»ä¸­å®šä¹‰ï¼Œæ˜¯ä¸ºäº†ä¸¤ä¸ªçº¿ç¨‹ä½¿ç”¨çš„éƒ½æ˜¯è¿™ä¸¤æŠŠé”
{
	public static final Object lock_a = new Object();
	public static final Object lock_b = new Object();	
}
```
è¿™ä¸ªæ­»é”å°±å‰å®³äº†ï¼Œä¸€è¿è¡Œï¼Œå•ªå½ä¸€ä¸‹ç›´æ¥å°±æŒ‚æ‰äº†â€¦â€¦çœ‹ä¸‹è¿è¡Œç»“æœï¼š

>--threadA---lock_a--<br>
>--threadB---lock_b--<br>

ä»¥ä¸Šæ˜¯æ­»é”çš„ä¸¤ä¸ªä¾‹å­ï¼Œéƒ½æ¯”è¾ƒå®¹æ˜“ç†è§£å’Œè®°å¿†ï¼Œä¸»è¦æ˜¯â€œè®¾è®¡æ¨¡å¼â€ä¸å¤ªä¸€æ ·ï¼Œç¬¬ä¸€ç§ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œä¸»å‡½æ•°ä¸­åªè¦è¿è¡Œé€»è¾‘å³å¯ï¼Œå…³äºåŒæ­¥çš„éƒ¨åˆ†å…¨æ‰”åˆ°Businessä¸­ï¼Œè¿™ä¸ªä¾¿äºåæœŸç»´æŠ¤ï¼Œæˆ‘éšä¾¿æŠŠBusinessæ‰”åˆ°å“ªå»æ‰§è¡Œéƒ½è¡Œï¼Œå› ä¸ºæ‰€æœ‰åŒæ­¥çš„ä¸œè¥¿éƒ½åœ¨å®ƒè‡ªå·±çš„ç±»ä¸­ï¼Œè¿™ç§è®¾è®¡æ€æƒ³å¾ˆå¥½ã€‚ç¬¬äºŒç§æ˜¯æŠŠRunnableå…ˆå®šä¹‰å¥½ï¼Œé€šè¿‡æ„é€ æ–¹æ³•ä¼ è¿›æ¥ä¸åŒçš„booleanç±»å‹å€¼å†³å®šæ‰§è¡Œrun()æ–¹æ³•ä¸­ä¸åŒçš„éƒ¨åˆ†ï¼Œè¿™ç§æ€è·¯ä¹Ÿå¾ˆå®¹æ˜“ç†è§£ï¼Œè¿™ç§æ­»é”æ›´å‰å®³ï¼Œä¸¤ä¸ªçº¿ç¨‹ç›´æ¥æ‰§è¡Œç›¸åçš„éƒ¨åˆ†ï¼Œç›´æ¥æŒ‚æ‰ï¼Œä¸ç»™å¯¹æ–¹ä¸€ç‚¹æƒ…é¢~?

å¦‚æœé¢è¯•çš„æ—¶å€™ï¼Œé¢è¯•å®˜è®©ä½ å†™ä¸ªæ­»é”ï¼Œç°åœ¨ä¼šäº†å—ï¼Ÿ

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----