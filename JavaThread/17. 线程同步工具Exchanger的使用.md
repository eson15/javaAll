> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

å¦‚æœä¸¤ä¸ªçº¿ç¨‹åœ¨è¿è¡Œè¿‡ç¨‹ä¸­éœ€è¦äº¤æ¢å½¼æ­¤çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸€ä¸ªæ•°æ®æˆ–è€…ä½¿ç”¨çš„ç©ºé—´ï¼Œå°±éœ€è¦ç”¨åˆ° Exchanger è¿™ä¸ªç±»ï¼ŒExchanger ä¸ºçº¿ç¨‹äº¤æ¢ä¿¡æ¯æä¾›äº†éå¸¸æ–¹ä¾¿çš„é€”å¾„ï¼Œå®ƒå¯ä»¥ä½œä¸ºä¸¤ä¸ªçº¿ç¨‹äº¤æ¢å¯¹è±¡çš„åŒæ­¥ç‚¹ï¼Œåªæœ‰å½“æ¯ä¸ªçº¿ç¨‹éƒ½åœ¨è¿›å…¥ `exchange ()` æ–¹æ³•å¹¶ç»™å‡ºå¯¹è±¡æ—¶ï¼Œæ‰èƒ½æ¥å—å…¶ä»–çº¿ç¨‹è¿”å›æ—¶ç»™å‡ºçš„å¯¹è±¡ã€‚

æ¯æ¬¡åªèƒ½ä¸¤ä¸ªçº¿ç¨‹äº¤æ¢æ•°æ®ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹ï¼Œä¹Ÿåªæœ‰ä¸¤ä¸ªèƒ½äº¤æ¢æ•°æ®ã€‚ä¸‹é¢çœ‹ä¸ªé€šä¿—çš„ä¾‹å­ï¼šä¸€æ‰‹äº¤é’±ä¸€é¦–äº¤è´§ï¼

```java
public class ExchangerTest { 
    public static void main(String[] args) { 
        ExecutorService service = Executors.newCachedThreadPool(); 
        final Exchanger exchanger = new Exchanger(); //å®šä¹‰ä¸€ä¸ªäº¤æ¢å¯¹è±¡ï¼Œç”¨æ¥äº¤æ¢æ•°æ®
        
        //å¼€å¯ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡
        service.execute(new Runnable(){ 
        	
        	@Override
            public void run() { 
                try {                
                    String data1 = "æµ·æ´›å› "; 
                    System.out.println("çº¿ç¨‹" + Thread.currentThread().getName() 
                    		+ "æ­£åœ¨æŠŠæ¯’å“" + data1 + "æ‹¿å‡ºæ¥");                    
                    Thread.sleep((long)(Math.random()*10000)); 
                    
                  //æŠŠè¦äº¤æ¢çš„æ•°æ®ä¼ åˆ°exchangeæ–¹æ³•ä¸­ï¼Œç„¶åè¢«é˜»å¡ï¼Œç­‰å¾…å¦ä¸€ä¸ªçº¿ç¨‹ä¸ä¹‹äº¤æ¢ã€‚è¿”å›äº¤æ¢åçš„æ•°æ®
                    String data2 = (String)exchanger.exchange(data1); 
                    
                    System.out.println("çº¿ç¨‹" + Thread.currentThread().getName() +  
                    "ç”¨æµ·æ´›å› æ¢æ¥äº†" + data2); 
                }catch(Exception e){     
                } finally {
                	service.shutdown();
                	System.out.println("äº¤æ˜“å®Œæ¯•ï¼Œæ‹¿ç€é’±å¿«è·‘ï¼");
                }
            }    
        }); 
        
        //å¼€å¯å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œä»»åŠ¡
        service.execute(new Runnable(){ 
        	
        	@Override
            public void run() { 
                try {                
                    String data1 = "300ä¸‡"; 
                    System.out.println("çº¿ç¨‹" + Thread.currentThread().getName() +  
                    "æ­£åœ¨æŠŠ" + data1 +"æ‹¿å‡ºæ¥"); 
                    Thread.sleep((long)(Math.random()*10000));   
                    
                    String data2 = (String)exchanger.exchange(data1); 
                    
                    System.out.println("çº¿ç¨‹" + Thread.currentThread().getName() +  
                    "ç”¨300ä¸‡å¼„åˆ°äº†" + data2); 
                }catch(Exception e){     
                } finally {
                	service.shutdown();
                	System.out.println("äº¤æ˜“å®Œæ¯•ï¼Œæ‹¿ç€æµ·æ´›å› å¿«è·‘ï¼");
                }
            }    
        });         
    } 
} 
```

ä»ä»£ç ä¸­æˆ‘ä»¿ä½›çœ‹åˆ°äº†ä¸¤ä¸ªäººåœ¨äº¤æ˜“æ¯’å“çš„åœºé¢â€¦â€¦æ¥çœ‹ä¸€ä¸‹äº¤æ˜“ç»“æœå¦‚ä½•ï¼š

>çº¿ç¨‹pool-1-thread-1æ­£åœ¨æŠŠæ¯’å“æµ·æ´›å› æ‹¿å‡ºæ¥<br>
çº¿ç¨‹pool-1-thread-2æ­£åœ¨æŠŠ300ä¸‡æ‹¿å‡ºæ¥<br>
çº¿ç¨‹pool-1-thread-2ç”¨300ä¸‡å¼„åˆ°äº†æµ·æ´›å› <br>
çº¿ç¨‹pool-1-thread-1ç”¨æµ·æ´›å› æ¢æ¥äº†300ä¸‡<br>
äº¤æ˜“å®Œæ¯•ï¼Œæ‹¿ç€æµ·æ´›å› å¿«è·‘ï¼<br>
äº¤æ˜“å®Œæ¯•ï¼Œæ‹¿ç€é’±å¿«è·‘ï¼<br> 

è·‘çš„å€’æ˜¯å¿«ï¼Œä»è¿è¡Œç»“æœæ¥çœ‹ï¼Œç¡®å®å®ç°äº†æ•°æ®çš„äº¤æ¢ï¼Œè¿™ä¸ªåªæ˜¯äº¤æ¢ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„æ•°æ®è€Œå·²ï¼Œå®ƒçœŸæ­£çš„ç”¨å¤„ä¸ä»…ä»…å±€é™äºæ­¤ï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥äº¤æ¢ä¸€ä¸ªå¯¹è±¡ï¼Œè¿™å°±æœ‰ç”¨äº†ï¼ŒJDKå®˜æ–¹æåˆ°äº†ä¸€ä¸ªé«˜çº§çš„åº”ç”¨ï¼š

>ä½¿ç”¨ Exchanger åœ¨çº¿ç¨‹é—´äº¤æ¢ç¼“å†²åŒºï¼Œå› æ­¤ï¼Œåœ¨éœ€è¦æ—¶ï¼Œå¡«å……ç¼“å†²åŒºçš„çº¿ç¨‹è·å–ä¸€ä¸ªæ–°è…¾ç©ºçš„ç¼“å†²åŒºï¼Œå¹¶å°†å¡«æ»¡çš„ç¼“å†²åŒºä¼ é€’ç»™è…¾ç©ºç¼“å†²åŒºçš„çº¿ç¨‹ã€‚

è¿™å°±å¾—æ ¹æ®å®é™…æƒ…å†µäº†ï¼Œæ€æƒ³å’Œä¸Šé¢çš„ä¸€æ ·ï¼Œå®é™…ä¸­è‚¯å®šè¦å®šä¹‰ä¸€ä¸ªç¼“å†²åŒºçš„ç±»ï¼Œç„¶åä¸¤ä¸ªçº¿ç¨‹ä¹‹é—´äº¤æ¢çš„å°±æ˜¯è¿™ä¸ªç¼“å†²åŒºçš„ç±»å³å¯ï¼Œè‡³äºç±»ä¸­å¦‚ä½•å®ç°ï¼Œå°±å¾—çœ‹å®é™…æƒ…å†µäº†ã€‚

Exchanger çš„ä½¿ç”¨å°±æ€»ç»“è¿™ä¹ˆå¤šå§~å¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿è®¨è®ºï¼Œæˆ‘ä»¬ä¸€èµ·è¿›æ­¥ã€‚

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----