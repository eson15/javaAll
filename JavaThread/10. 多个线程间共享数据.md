> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----

å…ˆçœ‹ä¸€ä¸ªå¤šçº¿ç¨‹é—´å…±äº«æ•°æ®çš„é—®é¢˜ï¼š

>è®¾è®¡å››ä¸ªçº¿ç¨‹ï¼Œå…¶ä¸­ä¸¤ä¸ªçº¿ç¨‹æ¯æ¬¡å¯¹dataå¢åŠ 1ï¼Œå¦å¤–ä¸¤ä¸ªçº¿ç¨‹æ¯æ¬¡å¯¹dataå‡å°‘1ã€‚

ä»é—®é¢˜æ¥çœ‹ï¼Œå¾ˆæ˜æ˜¾æ¶‰åŠåˆ°äº†çº¿ç¨‹é—´é€šæ•°æ®çš„å…±äº«ï¼Œå››ä¸ªçº¿ç¨‹å…±äº«ä¸€ä¸ª dataï¼Œå…±åŒæ“ä½œä¸€ä¸ª dataã€‚æˆ‘ä»¬å…ˆæŠŠä¸Šé¢è¿™ä¸ªé—®é¢˜æ”¾åœ¨ä¸€è¾¹ï¼Œæ…¢æ…¢åˆ†æå¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®çš„ä¸€äº›æƒ…å†µï¼Œä»æœ€ç®€å•å¼€å§‹ï¼Œåˆ†ç±»åˆ†æå®Œäº†åï¼Œåˆ°æ—¶å€™ä¹Ÿå¥½è§£å†³ä¸Šé¢è¿™ä¸ªé—®é¢˜äº†ã€‚

## 1. æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä»»åŠ¡ç›¸åŒ

è¿™æ˜¯æœ€ç®€å•çš„ä¸€ç§æƒ…å†µï¼Œæ¯”å¦‚å–ç¥¨ï¼Œå‡ ä¸ªçº¿ç¨‹å…±åŒæ“ä½œè®°å½•ç¥¨æ•°çš„é‚£ä¸ªå˜é‡ï¼Œä»»åŠ¡éƒ½æ˜¯ä½¿å®ƒå‡ä¸€ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªç±»å®ç° Runnable æ¥å£å³å¯ï¼Œåœ¨ `run()` æ–¹æ³•ä¸­å¯¹è¿™ä¸ªç¥¨è¿›è¡Œå‡ä¸€ï¼Œç„¶åå°†è¿™ä¸ª Runnable æ‰”ç»™å¤šä¸ªçº¿ç¨‹å»æ‰§è¡Œï¼Œè‡ªç„¶å®ƒä»¬å°±æ“ä½œåŒä¸€ä¸ªdataäº†ã€‚çœ‹ä¸€ä¸‹ä»£ç ï¼š
```java
public class MultiThreadShareData {

	public static void main(String[] args) {
		
		ShareData task = new ShareData(); //ä¸€ä¸ªç±»å®ç°äº†Runnableæ¥å£
		
		for(int i = 0; i < 4; i ++) {	//å››ä¸ªçº¿ç¨‹æ¥å–ç¥¨		
			new Thread(task).start();
		}

	}

}

class ShareData implements Runnable {

	private int data = 100;
	@Override
	public void run() { //å–ç¥¨ï¼Œæ¯æ¬¡ä¸€ä¸ªçº¿ç¨‹è¿›æ¥ï¼Œå…ˆåˆ¤æ–­ç¥¨æ•°æ˜¯å¦å¤§äº0
//		while(data > 0) {
			synchronized(this) {
				if(data > 0) {
					System.out.println(Thread.currentThread().getName() + ": " + data);
					data--;
				}
			}
//		}
	}
}
```
è¿™å¾ˆå¥½ç†è§£ï¼Œä¹Ÿå¾ˆå®¹æ˜“å®ç°ï¼Œå››ä¸ªçº¿ç¨‹å–äº†4å¼ ç¥¨ã€‚è¿è¡Œç»“æœä¸ºï¼š
>Thread-0: 100<br>
Thread-3: 99<br>
Thread-2: 98<br>
Thread-1: 97<br>

## 2. æ¯ä¸ªçº¿ç¨‹æ‰§è¡Œä¸åŒçš„ä»»åŠ¡

å°±å¦‚ä¸Šé¢é‚£ä¸ªé¢˜ç›®æ‰€æè¿°çš„ï¼Œä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œ data å¢ï¼Œä¸¤ä¸ªçº¿ç¨‹æ‰§è¡Œ data å‡ã€‚é’ˆå¯¹è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬è¦å®ç°ä¸¤ä¸ª Runnable äº†ï¼Œå› ä¸ºå¾ˆæ˜æ˜¾æœ‰ä¸¤ä¸ªä¸åŒçš„ä»»åŠ¡äº†ï¼Œä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ data å¢ï¼Œå¦ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œ data å‡ã€‚ä¸ºäº†ä¾¿äºç»´æŠ¤ï¼Œå¯ä»¥å°†ä¸¤ä¸ªä»»åŠ¡æ–¹æ³•æ”¾åˆ°ä¸€ä¸ªç±»ä¸­ï¼Œç„¶åå°† data ä¹Ÿæ”¾åœ¨è¿™ä¸ªç±»ä¸­ï¼Œç„¶åä¼ åˆ°ä¸åŒçš„ Runnabl eä¸­ï¼Œå³å¯å®Œæˆæ•°æ®çš„å…±äº«ã€‚å¦‚ä¸‹ï¼š
```java
public class MultiThreadShareData {

	public static void main(String[] args) {
		
		ShareData task = new ShareData(); //å…¬å…±æ•°æ®å’Œä»»åŠ¡æ”¾åœ¨taskä¸­

		for(int i = 0; i < 2; i ++) { //å¼€å¯ä¸¤ä¸ªçº¿ç¨‹å¢åŠ data
			
			new Thread(new Runnable() {
				
				@Override
				public void run() {
					task.increment();
				}
			}).start();
		}
		
		for(int i = 0; i < 2; i ++) { //å¼€å¯ä¸¤ä¸ªçº¿ç¨‹å‡å°‘data
			
			new Thread(new Runnable() {
				
				@Override
				public void run() {
					task.decrement();
				}
			}).start();
		}			
	}
}	


class ShareData /*implements Runnable*/ {

	private int data = 0;
	public synchronized void increment() { //å¢åŠ data
		System.out.println(Thread.currentThread().getName() + ": before : " + data);
		data++;
		System.out.println(Thread.currentThread().getName() + ": after : " + data);
	}
	
	public synchronized void decrement() { //å‡å°‘data
		System.out.println(Thread.currentThread().getName() + ": before : " + data);
		data--;
		System.out.println(Thread.currentThread().getName() + ": after : " + data);
	}
}
```
çœ‹ä¸€ä¸‹æ‰“å°ç»“æœï¼š
>Thread-0: before : 0<br>
Thread-0: after : 1<br>
Thread-1: before : 1<br>
Thread-1: after : 2<br>
Thread-2: before : 2<br>
Thread-2: after : 1<br>
Thread-3: before : 1<br>
Thread-3: after : 0<br>

è¿™æ ·å†™çš„å¥½å¤„æ˜¯ä¸¤ä¸ªä»»åŠ¡æ–¹æ³•å¯ä»¥ç›´æ¥åœ¨æ–¹æ³•åä¸Šè¿›è¡ŒåŒæ­¥æ“ä½œï¼Œè¿™ç§æ¨¡å¼çš„å¥½å¤„åœ¨å‰é¢çš„åšæ–‡ä¸­å·²ç»æœ‰è¯´è¿‡äº†ï¼Œå°è£…çš„å¥½ã€‚

æœ€åæ€»ç»“ä¸€ä¸‹ï¼Œå¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®ä¸»è¦å…³æ³¨ä¸¤ç‚¹å°±è¡Œï¼šä¸€æ˜¯ä»€ä¹ˆä»»åŠ¡ï¼Ÿå‡ ä¸ªä»»åŠ¡ï¼ŸäºŒæ˜¯å‡ ä¸ªçº¿ç¨‹ï¼Ÿè®°ä½ ä¸€ç‚¹ï¼šå‡ ä¸ªä»»åŠ¡å’Œå‡ ä¸ªçº¿ç¨‹æ˜¯æ²¡æœ‰å…³ç³»çš„ï¼100ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œ2ä¸ªä»»åŠ¡ï¼Œ3ä¸ªä»»åŠ¡â€¦â€¦

å¦‚æœåªæœ‰ä¸€ä¸ªä»»åŠ¡ï¼Œé‚£è¯´æ˜å¤šä¸ªçº¿ç¨‹æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæˆ‘ä»¬åªè¦å®ç°ä¸€ä¸ª Runnable æ¥å£ï¼ŒæŠŠå…¬å…± data æ”¾è¿› Runnableï¼ŒæŠŠä»»åŠ¡æ”¾è¿›å» `run()` ä¸­å³å¯ï¼ˆä»»åŠ¡æ³¨æ„è¦åŒæ­¥ï¼‰ï¼Œç„¶åå¼€å¯Nä¸ªçº¿ç¨‹å»æ‰§è¡Œè¿™ä¸ªä»»åŠ¡å³å¯ï¼›å¦‚æœæœ‰Mä¸ªä»»åŠ¡ï¼Œé‚£æˆ‘ä»¬æ–°å»ºä¸€ä¸ªä¸“é—¨æ‰§è¡Œä»»åŠ¡çš„ç±»ï¼ŒæŠŠå…¬å…±çš„ data æ”¾è¿›ç±»ä¸­ï¼ŒæŠŠä»»åŠ¡ä½œä¸ºç±»ä¸­çš„åŒæ­¥æ–¹æ³•å³å¯ï¼Œç„¶åå¼€å¯Nä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­æ‰”ä¸€ä¸ª Runnableï¼ŒæŒ‰ç…§è¦æ±‚æ‰§è¡Œä»»åŠ¡ç±»ä¸­çš„æ–¹æ³•å³å¯ã€‚

åˆ°è¿™é‡Œï¼Œè¯»è€…åº”è¯¥èƒ½ä½“ä¼šåˆ°ä»»åŠ¡å’Œçº¿ç¨‹çš„åˆ†ç¦»äº†ï¼Œè¿™ç§æ€æƒ³ä¹Ÿç®—æ˜¯é¢å‘å¯¹è±¡çš„ä¸€ç§å§ï¼Œæ€è·¯å¾ˆæ¸…æ™°ã€‚

å¤šä¸ªçº¿ç¨‹ä¹‹é—´å…±äº«æ•°æ®å°±æ€»ç»“è¿™ä¹ˆå¤šï¼Œå¦‚æœ‰é—®é¢˜ï¼Œæ¬¢è¿äº¤æµï¼Œæˆ‘ä»¬å…±åŒè¿›æ­¥~

----

> æ–‡ç« å¯ä»¥ç™½å«–ï¼Œè€é“ä»¬é¡ºä¾¿å…³æ³¨ä¸€ä¸‹æˆ‘çš„å…¬ä¼—å·ï¼Œæ‰‹åŠ¨æ»‘ç¨½ğŸ¤£ğŸ¤£ &nbsp;
>
> æ¬¢è¿å¤§å®¶å…³æ³¨ï¼š**æ­¦å“¥èŠç¼–ç¨‹**ã€**Javaå¼€å‘å®å…¸**ã€**Javaç§ƒå¤´å“¥**ï¼Œæ‚¨çš„æ”¯æŒï¼Œæ˜¯æˆ‘åˆ›ä½œçš„æŒç»­åŠ¨åŠ›ï¼&nbsp;&nbsp;

![æ­¦å“¥èŠç¼–ç¨‹](https://img-blog.csdnimg.cn/202002150421550.jpg)![Javaå¼€å‘å®å…¸](https://img-blog.csdnimg.cn/20200608005630228.png)![Javaç§ƒå¤´å“¥](https://img-blog.csdnimg.cn/20201025170941235.png)

----